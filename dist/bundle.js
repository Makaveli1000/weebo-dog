(()=>{var Ip=Object.defineProperty,wp=Object.defineProperties;var Ep=Object.getOwnPropertyDescriptors;var jr=Object.getOwnPropertySymbols;var Zu=Object.prototype.hasOwnProperty,el=Object.prototype.propertyIsEnumerable;var Xu=(n,e,t)=>e in n?Ip(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,V=(n,e)=>{for(var t in e||(e={}))Zu.call(e,t)&&Xu(n,t,e[t]);if(jr)for(var t of jr(e))el.call(e,t)&&Xu(n,t,e[t]);return n},de=(n,e)=>wp(n,Ep(e));var $r=(n,e)=>{var t={};for(var r in n)Zu.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&jr)for(var r of jr(n))e.indexOf(r)<0&&el.call(n,r)&&(t[r]=n[r]);return t};var tl=()=>{};var Tp={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var Hr=function(n,e){if(!n)throw vp(e)},vp=function(n){return new Error("Firebase Database ("+Tp.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};var il=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Ap=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],a=n[t++],u=n[t++],h=((i&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{let o=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},sl={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],a=i+1<n.length,u=a?n[i+1]:0,h=i+2<n.length,f=h?n[i+2]:0,_=o>>2,y=(o&3)<<4|u>>4,A=(u&15)<<2|f>>6,P=f&63;h||(P=64,a||(A=64)),r.push(t[_],t[y],t[A],t[P])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(il(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Ap(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;let f=i<n.length?t[n.charAt(i)]:64;++i;let y=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||u==null||f==null||y==null)throw new qs;let A=o<<2|u>>4;if(r.push(A),f!==64){let P=u<<4&240|f>>2;if(r.push(P),y!==64){let k=f<<6&192|y;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},qs=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},bp=function(n){let e=il(n);return sl.encodeByteArray(e,!0)},Un=function(n){return bp(n).replace(/\./g,"")},Kr=function(n){try{return sl.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ol(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Sp=()=>ol().__FIREBASE_DEFAULTS__,Rp=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Pp=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}let e=n&&Kr(n[1]);return e&&JSON.parse(e)},Wr=()=>{try{return tl()||Sp()||Rp()||Pp()}catch(n){console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(n));return}},js=n=>{var e,t;return(t=(e=Wr())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},Qr=n=>{let e=js(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error("Invalid host ".concat(e," with no separate hostname and port!"));let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},$s=()=>{var n;return(n=Wr())==null?void 0:n.config},Gs=n=>{var e;return(e=Wr())==null?void 0:e["_".concat(n)]};var Gr=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Ue(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch(e){return!1}}async function Kt(n){return(await fetch(n,{credentials:"include"})).ok}function Jr(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=V({iss:"https://securetoken.google.com/".concat(r),aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Un(JSON.stringify(t)),Un(JSON.stringify(a)),""].join(".")}var Fn={};function Cp(){let n={prod:[],emulator:[]};for(let e of Object.keys(Fn))Fn[e]?n.emulator.push(e):n.prod.push(e);return n}function kp(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var nl=!1;function Wt(n,e){if(typeof window>"u"||typeof document>"u"||!Ue(window.location.host)||Fn[n]===e||Fn[n]||nl)return;Fn[n]=e;function t(A){return"__firebase__banner__".concat(A)}let r="__firebase__banner",o=Cp().prod.length>0;function a(){let A=document.getElementById(r);A&&A.remove()}function u(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function h(A,P){A.setAttribute("width","24"),A.setAttribute("id",P),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function f(){let A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{nl=!0,a()},A}function _(A,P){A.setAttribute("id",P),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function y(){let A=kp(r),P=t("text"),k=document.getElementById(P)||document.createElement("span"),O=t("learnmore"),N=document.getElementById(O)||document.createElement("a"),U=t("preprendIcon"),B=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){let $=A.element;u($),_(N,O);let G=f();h(B,U),$.append(B,k,N,G),document.body.appendChild($)}o?(k.innerText="Preview backend disconnected.",B.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(B.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',k.innerText="Preview backend running in this workspace."),k.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function ue(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function al(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ue())}function Np(){var e;let n=(e=Wr())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(t){return!1}}function cl(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ul(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ll(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hl(){let n=ue();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function dl(){return!Np()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Bn(){try{return typeof indexedDB=="object"}catch(n){return!1}}function Hs(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(t){e(t)}})}var Dp="FirebaseError",oe=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Dp,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ce.prototype.create)}},Ce=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i="".concat(this.service,"/").concat(e),o=this.errors[e],a=o?Op(o,r):"Error",u="".concat(this.serviceName,": ").concat(a," (").concat(i,").");return new oe(i,u,r)}};function Op(n,e){return n.replace(xp,(t,r)=>{let i=e[r];return i!=null?String(i):"<".concat(r,"?>")})}var xp=/\{\$([^}]+)}/g;function fl(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function De(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],a=e[i];if(rl(o)&&rl(a)){if(!De(o,a))return!1}else if(o!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function rl(n){return n!==null&&typeof n=="object"}function Qt(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Jt(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Yt(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function pl(n,e){let t=new zs(n,e);return t.subscribe.bind(t)}var zs=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Vp(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Bs),i.error===void 0&&(i.error=Bs),i.complete===void 0&&(i.complete=Bs);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(a){}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Vp(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Bs(){}var Lp=1e3,Mp=2,Fp=14400*1e3,Up=.5;function Ks(n,e=Lp,t=Mp){let r=e*Math.pow(t,n),i=Math.round(Up*r*(Math.random()-.5)*2);return Math.min(Fp,r+i)}function me(n){return n&&n._delegate?n._delegate:n}var ae=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var St="[DEFAULT]";var Ws=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Gr;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch(i){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var i;let t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(i=e==null?void 0:e.optional)!=null?i:!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error("Service ".concat(this.name," is not available"))}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,!!this.shouldAutoInitialize()){if(qp(e))try{this.getOrInitializeService({instanceIdentifier:St})}catch(t){}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch(o){}}}}clearInstance(e=St){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=St){return this.instances.has(e)}getOptions(e=St){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,a]of this.instancesDeferred.entries()){let u=this.normalizeInstanceIdentifier(o);r===u&&a.resolve(i)}return i}onInit(e,t){var a;let r=this.normalizeInstanceIdentifier(t),i=(a=this.onInitCallbacks.get(r))!=null?a:new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch(o){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Bp(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(i){}return r||null}normalizeInstanceIdentifier(e=St){return this.component?this.component.multipleInstances?e:St:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Bp(n){return n===St?void 0:n}function qp(n){return n.instantiationMode==="EAGER"}var Yr=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Ws(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var zp=[],F;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(F||(F={}));var jp={debug:F.DEBUG,verbose:F.VERBOSE,info:F.INFO,warn:F.WARN,error:F.ERROR,silent:F.SILENT},$p=F.INFO,Gp={[F.DEBUG]:"log",[F.VERBOSE]:"log",[F.INFO]:"info",[F.WARN]:"warn",[F.ERROR]:"error"},Hp=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Gp[e];if(i)console[i]("[".concat(r,"]  ").concat(n.name,":"),...t);else throw new Error("Attempted to log a message with an invalid logType (value: ".concat(e,")"))},Be=class{constructor(e){this.name=e,this._logLevel=$p,this._logHandler=Hp,this._userLogHandler=null,zp.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in F))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jp[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,F.DEBUG,...e),this._logHandler(this,F.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,F.VERBOSE,...e),this._logHandler(this,F.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,F.INFO,...e),this._logHandler(this,F.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,F.WARN,...e),this._logHandler(this,F.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,F.ERROR,...e),this._logHandler(this,F.ERROR,...e)}};var Kp=(n,e)=>e.some(t=>n instanceof t),ml,gl;function Wp(){return ml||(ml=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Qp(){return gl||(gl=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var _l=new WeakMap,Js=new WeakMap,yl=new WeakMap,Qs=new WeakMap,Xs=new WeakMap;function Jp(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{t(qe(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&_l.set(t,n)}).catch(()=>{}),Xs.set(e,n),e}function Yp(n){if(Js.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});Js.set(n,e)}var Ys={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Js.get(n);if(e==="objectStoreNames")return n.objectStoreNames||yl.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return qe(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Il(n){Ys=n(Ys)}function Xp(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Xr(this),e,...t);return yl.set(r,e.sort?e.sort():[e]),qe(r)}:Qp().includes(n)?function(...e){return n.apply(Xr(this),e),qe(_l.get(this))}:function(...e){return qe(n.apply(Xr(this),e))}}function Zp(n){return typeof n=="function"?Xp(n):(n instanceof IDBTransaction&&Yp(n),Kp(n,Wp())?new Proxy(n,Ys):n)}function qe(n){if(n instanceof IDBRequest)return Jp(n);if(Qs.has(n))return Qs.get(n);let e=Zp(n);return e!==n&&(Qs.set(n,e),Xs.set(e,n)),e}var Xr=n=>Xs.get(n);function Zr(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let a=indexedDB.open(n,e),u=qe(a);return r&&a.addEventListener("upgradeneeded",h=>{r(qe(a.result),h.oldVersion,h.newVersion,qe(a.transaction),h)}),t&&a.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}var em=["get","getKey","getAll","getAllKeys","count"],tm=["put","add","delete","clear"],Zs=new Map;function wl(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Zs.get(e))return Zs.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=tm.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||em.includes(t)))return;let o=async function(a,...u){let h=this.transaction(a,i?"readwrite":"readonly"),f=h.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),i&&h.done]))[0]};return Zs.set(e,o),o}Il(n=>de(V({},n),{get:(e,t,r)=>wl(e,t)||n.get(e,t,r),has:(e,t)=>!!wl(e,t)||n.has(e,t)}));var to=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(nm(t)){let r=t.getImmediate();return"".concat(r.library,"/").concat(r.version)}else return null}).filter(t=>t).join(" ")}};function nm(n){let e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}var no="@firebase/app",El="0.14.6";var Je=new Be("@firebase/app"),rm="@firebase/app-compat",im="@firebase/analytics-compat",sm="@firebase/analytics",om="@firebase/app-check-compat",am="@firebase/app-check",cm="@firebase/auth",um="@firebase/auth-compat",lm="@firebase/database",hm="@firebase/data-connect",dm="@firebase/database-compat",fm="@firebase/functions",pm="@firebase/functions-compat",mm="@firebase/installations",gm="@firebase/installations-compat",_m="@firebase/messaging",ym="@firebase/messaging-compat",Im="@firebase/performance",wm="@firebase/performance-compat",Em="@firebase/remote-config",Tm="@firebase/remote-config-compat",vm="@firebase/storage",Am="@firebase/storage-compat",bm="@firebase/firestore",Sm="@firebase/ai",Rm="@firebase/firestore-compat",Pm="firebase",Cm="12.6.0";var ro="[DEFAULT]",km={[no]:"fire-core",[rm]:"fire-core-compat",[sm]:"fire-analytics",[im]:"fire-analytics-compat",[am]:"fire-app-check",[om]:"fire-app-check-compat",[cm]:"fire-auth",[um]:"fire-auth-compat",[lm]:"fire-rtdb",[hm]:"fire-data-connect",[dm]:"fire-rtdb-compat",[fm]:"fire-fn",[pm]:"fire-fn-compat",[mm]:"fire-iid",[gm]:"fire-iid-compat",[_m]:"fire-fcm",[ym]:"fire-fcm-compat",[Im]:"fire-perf",[wm]:"fire-perf-compat",[Em]:"fire-rc",[Tm]:"fire-rc-compat",[vm]:"fire-gcs",[Am]:"fire-gcs-compat",[bm]:"fire-fst",[Rm]:"fire-fst-compat",[Sm]:"fire-vertex","fire-js":"fire-js",[Pm]:"fire-js-all"};var ei=new Map,Nm=new Map,io=new Map;function Tl(n,e){try{n.container.addComponent(e)}catch(t){Je.debug("Component ".concat(e.name," failed to register with FirebaseApp ").concat(n.name),t)}}function Ee(n){let e=n.name;if(io.has(e))return Je.debug("There were multiple attempts to register component ".concat(e,".")),!1;io.set(e,n);for(let t of ei.values())Tl(t,n);for(let t of Nm.values())Tl(t,n);return!0}function Oe(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Te(n){return n==null?!1:n.settings!==void 0}var Dm={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ht=new Ce("app","Firebase",Dm);var so=class{constructor(e,t,r){this._isDeleted=!1,this._options=V({},e),this._config=V({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ae("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ht.create("app-deleted",{appName:this._name})}};var ke=Cm;function co(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=V({name:ro,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ht.create("bad-app-name",{appName:String(i)});if(t||(t=$s()),!t)throw ht.create("no-options");let o=ei.get(i);if(o){if(De(t,o.options)&&De(r,o.config))return o;throw ht.create("duplicate-app",{appName:i})}let a=new Yr(i);for(let h of io.values())a.addComponent(h);let u=new so(t,r,a);return ei.set(i,u),u}function Ye(n=ro){let e=ei.get(n);if(!e&&n===ro&&$s())return co();if(!e)throw ht.create("no-app",{appName:n});return e}function Y(n,e,t){var a;let r=(a=km[n])!=null?a:n;t&&(r+="-".concat(t));let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let u=['Unable to register library "'.concat(r,'" with version "').concat(e,'":')];i&&u.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),i&&o&&u.push("and"),o&&u.push('version name "'.concat(e,'" contains illegal characters (whitespace or "/")')),Je.warn(u.join(" "));return}Ee(new ae("".concat(r,"-version"),()=>({library:r,version:e}),"VERSION"))}var Om="firebase-heartbeat-database",xm=1,qn="firebase-heartbeat-store",eo=null;function Sl(){return eo||(eo=Zr(Om,xm,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(qn)}catch(t){console.warn(t)}}}}).catch(n=>{throw ht.create("idb-open",{originalErrorMessage:n.message})})),eo}async function Vm(n){try{let t=(await Sl()).transaction(qn),r=await t.objectStore(qn).get(Rl(n));return await t.done,r}catch(e){if(e instanceof oe)Je.warn(e.message);else{let t=ht.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Je.warn(t.message)}}}async function vl(n,e){try{let r=(await Sl()).transaction(qn,"readwrite");await r.objectStore(qn).put(e,Rl(n)),await r.done}catch(t){if(t instanceof oe)Je.warn(t.message);else{let r=ht.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Je.warn(r.message)}}}function Rl(n){return"".concat(n.name,"!").concat(n.options.appId)}var Lm=1024,Mm=30,oo=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new ao(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Al();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>Mm){let a=Um(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Je.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Al(),{heartbeatsToSend:r,unsentEntries:i}=Fm(this._heartbeatsCache.heartbeats),o=Un(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Je.warn(t),""}}};function Al(){return new Date().toISOString().substring(0,10)}function Fm(n,e=Lm){let t=[],r=n.slice();for(let i of n){let o=t.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),bl(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),bl(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var ao=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Bn()?Hs().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await Vm(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){let i=await this.read();return vl(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!=null?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){let i=await this.read();return vl(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!=null?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function bl(n){return Un(JSON.stringify({version:2,heartbeats:n})).length}function Um(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function Bm(n){Ee(new ae("platform-logger",e=>new to(e),"PRIVATE")),Ee(new ae("heartbeat",e=>new oo(e),"PRIVATE")),Y(no,El,n),Y(no,El,"esm2020"),Y("fire-js","")}Bm("");var qm="firebase",zm="12.6.0";Y(qm,zm,"app");var Pl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Cl={};var ti,kl;(function(){var n;function e(w,p){function g(){}g.prototype=p.prototype,w.F=p.prototype,w.prototype=new g,w.prototype.constructor=w,w.D=function(E,I,v){for(var m=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)m[Ae-2]=arguments[Ae];return p.prototype[I].apply(E,m)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,p,g){g||(g=0);let E=Array(16);if(typeof p=="string")for(var I=0;I<16;++I)E[I]=p.charCodeAt(g++)|p.charCodeAt(g++)<<8|p.charCodeAt(g++)<<16|p.charCodeAt(g++)<<24;else for(I=0;I<16;++I)E[I]=p[g++]|p[g++]<<8|p[g++]<<16|p[g++]<<24;p=w.g[0],g=w.g[1],I=w.g[2];let v=w.g[3],m;m=p+(v^g&(I^v))+E[0]+3614090360&4294967295,p=g+(m<<7&4294967295|m>>>25),m=v+(I^p&(g^I))+E[1]+3905402710&4294967295,v=p+(m<<12&4294967295|m>>>20),m=I+(g^v&(p^g))+E[2]+606105819&4294967295,I=v+(m<<17&4294967295|m>>>15),m=g+(p^I&(v^p))+E[3]+3250441966&4294967295,g=I+(m<<22&4294967295|m>>>10),m=p+(v^g&(I^v))+E[4]+4118548399&4294967295,p=g+(m<<7&4294967295|m>>>25),m=v+(I^p&(g^I))+E[5]+1200080426&4294967295,v=p+(m<<12&4294967295|m>>>20),m=I+(g^v&(p^g))+E[6]+2821735955&4294967295,I=v+(m<<17&4294967295|m>>>15),m=g+(p^I&(v^p))+E[7]+4249261313&4294967295,g=I+(m<<22&4294967295|m>>>10),m=p+(v^g&(I^v))+E[8]+1770035416&4294967295,p=g+(m<<7&4294967295|m>>>25),m=v+(I^p&(g^I))+E[9]+2336552879&4294967295,v=p+(m<<12&4294967295|m>>>20),m=I+(g^v&(p^g))+E[10]+4294925233&4294967295,I=v+(m<<17&4294967295|m>>>15),m=g+(p^I&(v^p))+E[11]+2304563134&4294967295,g=I+(m<<22&4294967295|m>>>10),m=p+(v^g&(I^v))+E[12]+1804603682&4294967295,p=g+(m<<7&4294967295|m>>>25),m=v+(I^p&(g^I))+E[13]+4254626195&4294967295,v=p+(m<<12&4294967295|m>>>20),m=I+(g^v&(p^g))+E[14]+2792965006&4294967295,I=v+(m<<17&4294967295|m>>>15),m=g+(p^I&(v^p))+E[15]+1236535329&4294967295,g=I+(m<<22&4294967295|m>>>10),m=p+(I^v&(g^I))+E[1]+4129170786&4294967295,p=g+(m<<5&4294967295|m>>>27),m=v+(g^I&(p^g))+E[6]+3225465664&4294967295,v=p+(m<<9&4294967295|m>>>23),m=I+(p^g&(v^p))+E[11]+643717713&4294967295,I=v+(m<<14&4294967295|m>>>18),m=g+(v^p&(I^v))+E[0]+3921069994&4294967295,g=I+(m<<20&4294967295|m>>>12),m=p+(I^v&(g^I))+E[5]+3593408605&4294967295,p=g+(m<<5&4294967295|m>>>27),m=v+(g^I&(p^g))+E[10]+38016083&4294967295,v=p+(m<<9&4294967295|m>>>23),m=I+(p^g&(v^p))+E[15]+3634488961&4294967295,I=v+(m<<14&4294967295|m>>>18),m=g+(v^p&(I^v))+E[4]+3889429448&4294967295,g=I+(m<<20&4294967295|m>>>12),m=p+(I^v&(g^I))+E[9]+568446438&4294967295,p=g+(m<<5&4294967295|m>>>27),m=v+(g^I&(p^g))+E[14]+3275163606&4294967295,v=p+(m<<9&4294967295|m>>>23),m=I+(p^g&(v^p))+E[3]+4107603335&4294967295,I=v+(m<<14&4294967295|m>>>18),m=g+(v^p&(I^v))+E[8]+1163531501&4294967295,g=I+(m<<20&4294967295|m>>>12),m=p+(I^v&(g^I))+E[13]+2850285829&4294967295,p=g+(m<<5&4294967295|m>>>27),m=v+(g^I&(p^g))+E[2]+4243563512&4294967295,v=p+(m<<9&4294967295|m>>>23),m=I+(p^g&(v^p))+E[7]+1735328473&4294967295,I=v+(m<<14&4294967295|m>>>18),m=g+(v^p&(I^v))+E[12]+2368359562&4294967295,g=I+(m<<20&4294967295|m>>>12),m=p+(g^I^v)+E[5]+4294588738&4294967295,p=g+(m<<4&4294967295|m>>>28),m=v+(p^g^I)+E[8]+2272392833&4294967295,v=p+(m<<11&4294967295|m>>>21),m=I+(v^p^g)+E[11]+1839030562&4294967295,I=v+(m<<16&4294967295|m>>>16),m=g+(I^v^p)+E[14]+4259657740&4294967295,g=I+(m<<23&4294967295|m>>>9),m=p+(g^I^v)+E[1]+2763975236&4294967295,p=g+(m<<4&4294967295|m>>>28),m=v+(p^g^I)+E[4]+1272893353&4294967295,v=p+(m<<11&4294967295|m>>>21),m=I+(v^p^g)+E[7]+4139469664&4294967295,I=v+(m<<16&4294967295|m>>>16),m=g+(I^v^p)+E[10]+3200236656&4294967295,g=I+(m<<23&4294967295|m>>>9),m=p+(g^I^v)+E[13]+681279174&4294967295,p=g+(m<<4&4294967295|m>>>28),m=v+(p^g^I)+E[0]+3936430074&4294967295,v=p+(m<<11&4294967295|m>>>21),m=I+(v^p^g)+E[3]+3572445317&4294967295,I=v+(m<<16&4294967295|m>>>16),m=g+(I^v^p)+E[6]+76029189&4294967295,g=I+(m<<23&4294967295|m>>>9),m=p+(g^I^v)+E[9]+3654602809&4294967295,p=g+(m<<4&4294967295|m>>>28),m=v+(p^g^I)+E[12]+3873151461&4294967295,v=p+(m<<11&4294967295|m>>>21),m=I+(v^p^g)+E[15]+530742520&4294967295,I=v+(m<<16&4294967295|m>>>16),m=g+(I^v^p)+E[2]+3299628645&4294967295,g=I+(m<<23&4294967295|m>>>9),m=p+(I^(g|~v))+E[0]+4096336452&4294967295,p=g+(m<<6&4294967295|m>>>26),m=v+(g^(p|~I))+E[7]+1126891415&4294967295,v=p+(m<<10&4294967295|m>>>22),m=I+(p^(v|~g))+E[14]+2878612391&4294967295,I=v+(m<<15&4294967295|m>>>17),m=g+(v^(I|~p))+E[5]+4237533241&4294967295,g=I+(m<<21&4294967295|m>>>11),m=p+(I^(g|~v))+E[12]+1700485571&4294967295,p=g+(m<<6&4294967295|m>>>26),m=v+(g^(p|~I))+E[3]+2399980690&4294967295,v=p+(m<<10&4294967295|m>>>22),m=I+(p^(v|~g))+E[10]+4293915773&4294967295,I=v+(m<<15&4294967295|m>>>17),m=g+(v^(I|~p))+E[1]+2240044497&4294967295,g=I+(m<<21&4294967295|m>>>11),m=p+(I^(g|~v))+E[8]+1873313359&4294967295,p=g+(m<<6&4294967295|m>>>26),m=v+(g^(p|~I))+E[15]+4264355552&4294967295,v=p+(m<<10&4294967295|m>>>22),m=I+(p^(v|~g))+E[6]+2734768916&4294967295,I=v+(m<<15&4294967295|m>>>17),m=g+(v^(I|~p))+E[13]+1309151649&4294967295,g=I+(m<<21&4294967295|m>>>11),m=p+(I^(g|~v))+E[4]+4149444226&4294967295,p=g+(m<<6&4294967295|m>>>26),m=v+(g^(p|~I))+E[11]+3174756917&4294967295,v=p+(m<<10&4294967295|m>>>22),m=I+(p^(v|~g))+E[2]+718787259&4294967295,I=v+(m<<15&4294967295|m>>>17),m=g+(v^(I|~p))+E[9]+3951481745&4294967295,w.g[0]=w.g[0]+p&4294967295,w.g[1]=w.g[1]+(I+(m<<21&4294967295|m>>>11))&4294967295,w.g[2]=w.g[2]+I&4294967295,w.g[3]=w.g[3]+v&4294967295}r.prototype.v=function(w,p){p===void 0&&(p=w.length);let g=p-this.blockSize,E=this.C,I=this.h,v=0;for(;v<p;){if(I==0)for(;v<=g;)i(this,w,v),v+=this.blockSize;if(typeof w=="string"){for(;v<p;)if(E[I++]=w.charCodeAt(v++),I==this.blockSize){i(this,E),I=0;break}}else for(;v<p;)if(E[I++]=w[v++],I==this.blockSize){i(this,E),I=0;break}}this.h=I,this.o+=p},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var p=1;p<w.length-8;++p)w[p]=0;p=this.o*8;for(var g=w.length-8;g<w.length;++g)w[g]=p&255,p/=256;for(this.v(w),w=Array(16),p=0,g=0;g<4;++g)for(let E=0;E<32;E+=8)w[p++]=this.g[g]>>>E&255;return w};function o(w,p){var g=u;return Object.prototype.hasOwnProperty.call(g,w)?g[w]:g[w]=p(w)}function a(w,p){this.h=p;let g=[],E=!0;for(let I=w.length-1;I>=0;I--){let v=w[I]|0;E&&v==p||(g[I]=v,E=!1)}this.g=g}var u={};function h(w){return-128<=w&&w<128?o(w,function(p){return new a([p|0],p<0?-1:0)}):new a([w|0],w<0?-1:0)}function f(w){if(isNaN(w)||!isFinite(w))return y;if(w<0)return N(f(-w));let p=[],g=1;for(let E=0;w>=g;E++)p[E]=w/g|0,g*=4294967296;return new a(p,0)}function _(w,p){if(w.length==0)throw Error("number format error: empty string");if(p=p||10,p<2||36<p)throw Error("radix out of range: "+p);if(w.charAt(0)=="-")return N(_(w.substring(1),p));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');let g=f(Math.pow(p,8)),E=y;for(let v=0;v<w.length;v+=8){var I=Math.min(8,w.length-v);let m=parseInt(w.substring(v,v+I),p);I<8?(I=f(Math.pow(p,I)),E=E.j(I).add(f(m))):(E=E.j(g),E=E.add(f(m)))}return E}var y=h(0),A=h(1),P=h(16777216);n=a.prototype,n.m=function(){if(O(this))return-N(this).m();let w=0,p=1;for(let g=0;g<this.g.length;g++){let E=this.i(g);w+=(E>=0?E:4294967296+E)*p,p*=4294967296}return w},n.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(k(this))return"0";if(O(this))return"-"+N(this).toString(w);let p=f(Math.pow(w,6));var g=this;let E="";for(;;){let I=G(g,p).g;g=U(g,I.j(p));let v=((g.g.length>0?g.g[0]:g.h)>>>0).toString(w);if(g=I,k(g))return v+E;for(;v.length<6;)v="0"+v;E=v+E}},n.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function k(w){if(w.h!=0)return!1;for(let p=0;p<w.g.length;p++)if(w.g[p]!=0)return!1;return!0}function O(w){return w.h==-1}n.l=function(w){return w=U(this,w),O(w)?-1:k(w)?0:1};function N(w){let p=w.g.length,g=[];for(let E=0;E<p;E++)g[E]=~w.g[E];return new a(g,~w.h).add(A)}n.abs=function(){return O(this)?N(this):this},n.add=function(w){let p=Math.max(this.g.length,w.g.length),g=[],E=0;for(let I=0;I<=p;I++){let v=E+(this.i(I)&65535)+(w.i(I)&65535),m=(v>>>16)+(this.i(I)>>>16)+(w.i(I)>>>16);E=m>>>16,v&=65535,m&=65535,g[I]=m<<16|v}return new a(g,g[g.length-1]&-2147483648?-1:0)};function U(w,p){return w.add(N(p))}n.j=function(w){if(k(this)||k(w))return y;if(O(this))return O(w)?N(this).j(N(w)):N(N(this).j(w));if(O(w))return N(this.j(N(w)));if(this.l(P)<0&&w.l(P)<0)return f(this.m()*w.m());let p=this.g.length+w.g.length,g=[];for(var E=0;E<2*p;E++)g[E]=0;for(E=0;E<this.g.length;E++)for(let I=0;I<w.g.length;I++){let v=this.i(E)>>>16,m=this.i(E)&65535,Ae=w.i(I)>>>16,it=w.i(I)&65535;g[2*E+2*I]+=m*it,B(g,2*E+2*I),g[2*E+2*I+1]+=v*it,B(g,2*E+2*I+1),g[2*E+2*I+1]+=m*Ae,B(g,2*E+2*I+1),g[2*E+2*I+2]+=v*Ae,B(g,2*E+2*I+2)}for(w=0;w<p;w++)g[w]=g[2*w+1]<<16|g[2*w];for(w=p;w<2*p;w++)g[w]=0;return new a(g,0)};function B(w,p){for(;(w[p]&65535)!=w[p];)w[p+1]+=w[p]>>>16,w[p]&=65535,p++}function $(w,p){this.g=w,this.h=p}function G(w,p){if(k(p))throw Error("division by zero");if(k(w))return new $(y,y);if(O(w))return p=G(N(w),p),new $(N(p.g),N(p.h));if(O(p))return p=G(w,N(p)),new $(N(p.g),p.h);if(w.g.length>30){if(O(w)||O(p))throw Error("slowDivide_ only works with positive integers.");for(var g=A,E=p;E.l(w)<=0;)g=ie(g),E=ie(E);var I=Q(g,1),v=Q(E,1);for(E=Q(E,2),g=Q(g,2);!k(E);){var m=v.add(E);m.l(w)<=0&&(I=I.add(g),v=m),E=Q(E,1),g=Q(g,1)}return p=U(w,I.j(p)),new $(I,p)}for(I=y;w.l(p)>=0;){for(g=Math.max(1,Math.floor(w.m()/p.m())),E=Math.ceil(Math.log(g)/Math.LN2),E=E<=48?1:Math.pow(2,E-48),v=f(g),m=v.j(p);O(m)||m.l(w)>0;)g-=E,v=f(g),m=v.j(p);k(v)&&(v=A),I=I.add(v),w=U(w,m)}return new $(I,w)}n.B=function(w){return G(this,w).h},n.and=function(w){let p=Math.max(this.g.length,w.g.length),g=[];for(let E=0;E<p;E++)g[E]=this.i(E)&w.i(E);return new a(g,this.h&w.h)},n.or=function(w){let p=Math.max(this.g.length,w.g.length),g=[];for(let E=0;E<p;E++)g[E]=this.i(E)|w.i(E);return new a(g,this.h|w.h)},n.xor=function(w){let p=Math.max(this.g.length,w.g.length),g=[];for(let E=0;E<p;E++)g[E]=this.i(E)^w.i(E);return new a(g,this.h^w.h)};function ie(w){let p=w.g.length+1,g=[];for(let E=0;E<p;E++)g[E]=w.i(E)<<1|w.i(E-1)>>>31;return new a(g,w.h)}function Q(w,p){let g=p>>5;p%=32;let E=w.g.length-g,I=[];for(let v=0;v<E;v++)I[v]=p>0?w.i(v+g)>>>p|w.i(v+g+1)<<32-p:w.i(v+g);return new a(I,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,kl=Cl.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=_,ti=Cl.Integer=a}).apply(typeof Pl<"u"?Pl:typeof self<"u"?self:typeof window<"u"?window:{});var ni=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xe={};var uo,jm,Xt,lo,zn,ri,ho,fo,po;(function(){var n,e=Object.defineProperty;function t(s){s=[typeof globalThis=="object"&&globalThis,s,typeof window=="object"&&window,typeof self=="object"&&self,typeof ni=="object"&&ni];for(var c=0;c<s.length;++c){var l=s[c];if(l&&l.Math==Math)return l}throw Error("Cannot find global object")}var r=t(this);function i(s,c){if(c)e:{var l=r;s=s.split(".");for(var d=0;d<s.length-1;d++){var T=s[d];if(!(T in l))break e;l=l[T]}s=s[s.length-1],d=l[s],c=c(d),c!=d&&c!=null&&e(l,s,{configurable:!0,writable:!0,value:c})}}i("Symbol.dispose",function(s){return s||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(s){return s||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(s){return s||function(c){var l=[],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&l.push([d,c[d]]);return l}});var o=o||{},a=this||self;function u(s){var c=typeof s;return c=="object"&&s!=null||c=="function"}function h(s,c,l){return s.call.apply(s.bind,arguments)}function f(s,c,l){return f=h,f.apply(null,arguments)}function _(s,c){var l=Array.prototype.slice.call(arguments,1);return function(){var d=l.slice();return d.push.apply(d,arguments),s.apply(this,d)}}function y(s,c){function l(){}l.prototype=c.prototype,s.Z=c.prototype,s.prototype=new l,s.prototype.constructor=s,s.Ob=function(d,T,b){for(var R=Array(arguments.length-2),M=2;M<arguments.length;M++)R[M-2]=arguments[M];return c.prototype[T].apply(d,R)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?s=>s&&AsyncContext.Snapshot.wrap(s):s=>s;function P(s){let c=s.length;if(c>0){let l=Array(c);for(let d=0;d<c;d++)l[d]=s[d];return l}return[]}function k(s,c){for(let d=1;d<arguments.length;d++){let T=arguments[d];var l=typeof T;if(l=l!="object"?l:T?Array.isArray(T)?"array":l:"null",l=="array"||l=="object"&&typeof T.length=="number"){l=s.length||0;let b=T.length||0;s.length=l+b;for(let R=0;R<b;R++)s[l+R]=T[R]}else s.push(T)}}class O{constructor(c,l){this.i=c,this.j=l,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function N(s){a.setTimeout(()=>{throw s},0)}function U(){var s=w;let c=null;return s.g&&(c=s.g,s.g=s.g.next,s.g||(s.h=null),c.next=null),c}class B{constructor(){this.h=this.g=null}add(c,l){let d=$.get();d.set(c,l),this.h?this.h.next=d:this.g=d,this.h=d}}var $=new O(()=>new G,s=>s.reset());class G{constructor(){this.next=this.g=this.h=null}set(c,l){this.h=c,this.g=l,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,Q=!1,w=new B,p=()=>{let s=Promise.resolve(void 0);ie=()=>{s.then(g)}};function g(){for(var s;s=U();){try{s.h.call(s.g)}catch(l){N(l)}var c=$;c.j(s),c.h<100&&(c.h++,s.next=c.g,c.g=s)}Q=!1}function E(){this.u=this.u,this.C=this.C}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(s,c){this.type=s,this.g=this.target=c,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var v=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var s=!1,c=Object.defineProperty({},"passive",{get:function(){s=!0}});try{let l=()=>{};a.addEventListener("test",l,c),a.removeEventListener("test",l,c)}catch(l){}return s})();function m(s){return/^[\s\xa0]*$/.test(s)}function Ae(s,c){I.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s&&this.init(s,c)}y(Ae,I),Ae.prototype.init=function(s,c){let l=this.type=s.type,d=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;this.target=s.target||s.srcElement,this.g=c,c=s.relatedTarget,c||(l=="mouseover"?c=s.fromElement:l=="mouseout"&&(c=s.toElement)),this.relatedTarget=c,d?(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType=s.pointerType,this.state=s.state,this.i=s,s.defaultPrevented&&Ae.Z.h.call(this)},Ae.prototype.h=function(){Ae.Z.h.call(this);let s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var it="closure_listenable_"+(Math.random()*1e6|0),zf=0;function jf(s,c,l,d,T){this.listener=s,this.proxy=null,this.src=c,this.type=l,this.capture=!!d,this.ha=T,this.key=++zf,this.da=this.fa=!1}function Rr(s){s.da=!0,s.listener=null,s.proxy=null,s.src=null,s.ha=null}function Pr(s,c,l){for(let d in s)c.call(l,s[d],d,s)}function $f(s,c){for(let l in s)c.call(void 0,s[l],l,s)}function Jc(s){let c={};for(let l in s)c[l]=s[l];return c}let Yc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xc(s,c){let l,d;for(let T=1;T<arguments.length;T++){d=arguments[T];for(l in d)s[l]=d[l];for(let b=0;b<Yc.length;b++)l=Yc[b],Object.prototype.hasOwnProperty.call(d,l)&&(s[l]=d[l])}}function Cr(s){this.src=s,this.g={},this.h=0}Cr.prototype.add=function(s,c,l,d,T){let b=s.toString();s=this.g[b],s||(s=this.g[b]=[],this.h++);let R=_s(s,c,d,T);return R>-1?(c=s[R],l||(c.fa=!1)):(c=new jf(c,this.src,b,!!d,T),c.fa=l,s.push(c)),c};function gs(s,c){let l=c.type;if(l in s.g){var d=s.g[l],T=Array.prototype.indexOf.call(d,c,void 0),b;(b=T>=0)&&Array.prototype.splice.call(d,T,1),b&&(Rr(c),s.g[l].length==0&&(delete s.g[l],s.h--))}}function _s(s,c,l,d){for(let T=0;T<s.length;++T){let b=s[T];if(!b.da&&b.listener==c&&b.capture==!!l&&b.ha==d)return T}return-1}var ys="closure_lm_"+(Math.random()*1e6|0),Is={};function Zc(s,c,l,d,T){if(d&&d.once)return tu(s,c,l,d,T);if(Array.isArray(c)){for(let b=0;b<c.length;b++)Zc(s,c[b],l,d,T);return null}return l=vs(l),s&&s[it]?s.J(c,l,u(d)?!!d.capture:!!d,T):eu(s,c,l,!1,d,T)}function eu(s,c,l,d,T,b){if(!c)throw Error("Invalid event type");let R=u(T)?!!T.capture:!!T,M=Es(s);if(M||(s[ys]=M=new Cr(s)),l=M.add(c,l,d,R,b),l.proxy)return l;if(d=Gf(),l.proxy=d,d.src=s,d.listener=l,s.addEventListener)v||(T=R),T===void 0&&(T=!1),s.addEventListener(c.toString(),d,T);else if(s.attachEvent)s.attachEvent(ru(c.toString()),d);else if(s.addListener&&s.removeListener)s.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");return l}function Gf(){function s(l){return c.call(s.src,s.listener,l)}let c=Hf;return s}function tu(s,c,l,d,T){if(Array.isArray(c)){for(let b=0;b<c.length;b++)tu(s,c[b],l,d,T);return null}return l=vs(l),s&&s[it]?s.K(c,l,u(d)?!!d.capture:!!d,T):eu(s,c,l,!0,d,T)}function nu(s,c,l,d,T){if(Array.isArray(c))for(var b=0;b<c.length;b++)nu(s,c[b],l,d,T);else d=u(d)?!!d.capture:!!d,l=vs(l),s&&s[it]?(s=s.i,b=String(c).toString(),b in s.g&&(c=s.g[b],l=_s(c,l,d,T),l>-1&&(Rr(c[l]),Array.prototype.splice.call(c,l,1),c.length==0&&(delete s.g[b],s.h--)))):s&&(s=Es(s))&&(c=s.g[c.toString()],s=-1,c&&(s=_s(c,l,d,T)),(l=s>-1?c[s]:null)&&ws(l))}function ws(s){if(typeof s!="number"&&s&&!s.da){var c=s.src;if(c&&c[it])gs(c.i,s);else{var l=s.type,d=s.proxy;c.removeEventListener?c.removeEventListener(l,d,s.capture):c.detachEvent?c.detachEvent(ru(l),d):c.addListener&&c.removeListener&&c.removeListener(d),(l=Es(c))?(gs(l,s),l.h==0&&(l.src=null,c[ys]=null)):Rr(s)}}}function ru(s){return s in Is?Is[s]:Is[s]="on"+s}function Hf(s,c){if(s.da)s=!0;else{c=new Ae(c,this);let l=s.listener,d=s.ha||s.src;s.fa&&ws(s),s=l.call(d,c)}return s}function Es(s){return s=s[ys],s instanceof Cr?s:null}var Ts="__closure_events_fn_"+(Math.random()*1e9>>>0);function vs(s){return typeof s=="function"?s:(s[Ts]||(s[Ts]=function(c){return s.handleEvent(c)}),s[Ts])}function pe(){E.call(this),this.i=new Cr(this),this.M=this,this.G=null}y(pe,E),pe.prototype[it]=!0,pe.prototype.removeEventListener=function(s,c,l,d){nu(this,s,c,l,d)};function Ie(s,c){var l,d=s.G;if(d)for(l=[];d;d=d.G)l.push(d);if(s=s.M,d=c.type||c,typeof c=="string")c=new I(c,s);else if(c instanceof I)c.target=c.target||s;else{var T=c;c=new I(d,s),Xc(c,T)}T=!0;let b,R;if(l)for(R=l.length-1;R>=0;R--)b=c.g=l[R],T=kr(b,d,!0,c)&&T;if(b=c.g=s,T=kr(b,d,!0,c)&&T,T=kr(b,d,!1,c)&&T,l)for(R=0;R<l.length;R++)b=c.g=l[R],T=kr(b,d,!1,c)&&T}pe.prototype.N=function(){if(pe.Z.N.call(this),this.i){var s=this.i;for(let c in s.g){let l=s.g[c];for(let d=0;d<l.length;d++)Rr(l[d]);delete s.g[c],s.h--}}this.G=null},pe.prototype.J=function(s,c,l,d){return this.i.add(String(s),c,!1,l,d)},pe.prototype.K=function(s,c,l,d){return this.i.add(String(s),c,!0,l,d)};function kr(s,c,l,d){if(c=s.i.g[String(c)],!c)return!0;c=c.concat();let T=!0;for(let b=0;b<c.length;++b){let R=c[b];if(R&&!R.da&&R.capture==l){let M=R.listener,se=R.ha||R.src;R.fa&&gs(s.i,R),T=M.call(se,d)!==!1&&T}}return T&&!d.defaultPrevented}function Kf(s,c){if(typeof s!="function")if(s&&typeof s.handleEvent=="function")s=f(s.handleEvent,s);else throw Error("Invalid listener argument");return Number(c)>2147483647?-1:a.setTimeout(s,c||0)}function iu(s){s.g=Kf(()=>{s.g=null,s.i&&(s.i=!1,iu(s))},s.l);let c=s.h;s.h=null,s.m.apply(null,c)}class Wf extends E{constructor(c,l){super(),this.m=c,this.l=l,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:iu(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tn(s){E.call(this),this.h=s,this.g={}}y(Tn,E);var su=[];function ou(s){Pr(s.g,function(c,l){this.g.hasOwnProperty(l)&&ws(c)},s),s.g={}}Tn.prototype.N=function(){Tn.Z.N.call(this),ou(this)},Tn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var As=a.JSON.stringify,Qf=a.JSON.parse,Jf=class{stringify(s){return a.JSON.stringify(s,void 0)}parse(s){return a.JSON.parse(s,void 0)}};function au(){}function cu(){}var vn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function bs(){I.call(this,"d")}y(bs,I);function Ss(){I.call(this,"c")}y(Ss,I);var Et={},uu=null;function Nr(){return uu=uu||new pe}Et.Ia="serverreachability";function lu(s){I.call(this,Et.Ia,s)}y(lu,I);function An(s){let c=Nr();Ie(c,new lu(c))}Et.STAT_EVENT="statevent";function hu(s,c){I.call(this,Et.STAT_EVENT,s),this.stat=c}y(hu,I);function we(s){let c=Nr();Ie(c,new hu(c,s))}Et.Ja="timingevent";function du(s,c){I.call(this,Et.Ja,s),this.size=c}y(du,I);function bn(s,c){if(typeof s!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){s()},c)}function Sn(){this.g=!0}Sn.prototype.ua=function(){this.g=!1};function Yf(s,c,l,d,T,b){s.info(function(){if(s.g)if(b){var R="",M=b.split("&");for(let H=0;H<M.length;H++){var se=M[H].split("=");if(se.length>1){let ce=se[0];se=se[1];let Fe=ce.split("_");R=Fe.length>=2&&Fe[1]=="type"?R+(ce+"="+se+"&"):R+(ce+"=redacted&")}}}else R=null;else R=b;return"XMLHTTP REQ ("+d+") [attempt "+T+"]: "+c+"\n"+l+"\n"+R})}function Xf(s,c,l,d,T,b,R){s.info(function(){return"XMLHTTP RESP ("+d+") [ attempt "+T+"]: "+c+"\n"+l+"\n"+b+" "+R})}function $t(s,c,l,d){s.info(function(){return"XMLHTTP TEXT ("+c+"): "+ep(s,l)+(d?" "+d:"")})}function Zf(s,c){s.info(function(){return"TIMEOUT: "+c})}Sn.prototype.info=function(){};function ep(s,c){if(!s.g)return c;if(!c)return null;try{let b=JSON.parse(c);if(b){for(s=0;s<b.length;s++)if(Array.isArray(b[s])){var l=b[s];if(!(l.length<2)){var d=l[1];if(Array.isArray(d)&&!(d.length<1)){var T=d[0];if(T!="noop"&&T!="stop"&&T!="close")for(let R=1;R<d.length;R++)d[R]=""}}}}return As(b)}catch(b){return c}}var Dr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},fu={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},pu;function Rs(){}y(Rs,au),Rs.prototype.g=function(){return new XMLHttpRequest},pu=new Rs;function Rn(s){return encodeURIComponent(String(s))}function tp(s){var c=1;s=s.split(":");let l=[];for(;c>0&&s.length;)l.push(s.shift()),c--;return s.length&&l.push(s.join(":")),l}function st(s,c,l,d){this.j=s,this.i=c,this.l=l,this.S=d||1,this.V=new Tn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new mu}function mu(){this.i=null,this.g="",this.h=!1}var gu={},Ps={};function Cs(s,c,l){s.M=1,s.A=xr(Me(c)),s.u=l,s.R=!0,_u(s,null)}function _u(s,c){s.F=Date.now(),Or(s),s.B=Me(s.A);var l=s.B,d=s.S;Array.isArray(d)||(d=[String(d)]),ku(l.i,"t",d),s.C=0,l=s.j.L,s.h=new mu,s.g=Wu(s.j,l?c:null,!s.u),s.P>0&&(s.O=new Wf(f(s.Y,s,s.g),s.P)),c=s.V,l=s.g,d=s.ba;var T="readystatechange";Array.isArray(T)||(T&&(su[0]=T.toString()),T=su);for(let b=0;b<T.length;b++){let R=Zc(l,T[b],d||c.handleEvent,!1,c.h||c);if(!R)break;c.g[R.key]=R}c=s.J?Jc(s.J):{},s.u?(s.v||(s.v="POST"),c["Content-Type"]="application/x-www-form-urlencoded",s.g.ea(s.B,s.v,s.u,c)):(s.v="GET",s.g.ea(s.B,s.v,null,c)),An(),Yf(s.i,s.v,s.B,s.l,s.S,s.u)}st.prototype.ba=function(s){s=s.target;let c=this.O;c&&ct(s)==3?c.j():this.Y(s)},st.prototype.Y=function(s){try{if(s==this.g)e:{let M=ct(this.g),se=this.g.ya(),H=this.g.ca();if(!(M<3)&&(M!=3||this.g&&(this.h.h||this.g.la()||Mu(this.g)))){this.K||M!=4||se==7||(se==8||H<=0?An(3):An(2)),ks(this);var c=this.g.ca();this.X=c;var l=np(this);if(this.o=c==200,Xf(this.i,this.v,this.B,this.l,this.S,M,c),this.o){if(this.U&&!this.L){t:{if(this.g){var d,T=this.g;if((d=T.g?T.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(d)){var b=d;break t}}b=null}if(s=b)$t(this.i,this.l,s,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ns(this,s);else{this.o=!1,this.m=3,we(12),Tt(this),Pn(this);break e}}if(this.R){s=!0;let ce;for(;!this.K&&this.C<l.length;)if(ce=rp(this,l),ce==Ps){M==4&&(this.m=4,we(14),s=!1),$t(this.i,this.l,null,"[Incomplete Response]");break}else if(ce==gu){this.m=4,we(15),$t(this.i,this.l,l,"[Invalid Chunk]"),s=!1;break}else $t(this.i,this.l,ce,null),Ns(this,ce);if(yu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),M!=4||l.length!=0||this.h.h||(this.m=1,we(16),s=!1),this.o=this.o&&s,!s)$t(this.i,this.l,l,"[Invalid Chunked Response]"),Tt(this),Pn(this);else if(l.length>0&&!this.W){this.W=!0;var R=this.j;R.g==this&&R.aa&&!R.P&&(R.j.info("Great, no buffering proxy detected. Bytes received: "+l.length),Fs(R),R.P=!0,we(11))}}else $t(this.i,this.l,l,null),Ns(this,l);M==4&&Tt(this),this.o&&!this.K&&(M==4?$u(this.j,this):(this.o=!1,Or(this)))}else _p(this.g),c==400&&l.indexOf("Unknown SID")>0?(this.m=3,we(12)):(this.m=0,we(13)),Tt(this),Pn(this)}}}catch(M){}finally{}};function np(s){if(!yu(s))return s.g.la();let c=Mu(s.g);if(c==="")return"";let l="",d=c.length,T=ct(s.g)==4;if(!s.h.i){if(typeof TextDecoder>"u")return Tt(s),Pn(s),"";s.h.i=new a.TextDecoder}for(let b=0;b<d;b++)s.h.h=!0,l+=s.h.i.decode(c[b],{stream:!(T&&b==d-1)});return c.length=0,s.h.g+=l,s.C=0,s.h.g}function yu(s){return s.g?s.v=="GET"&&s.M!=2&&s.j.Aa:!1}function rp(s,c){var l=s.C,d=c.indexOf("\n",l);return d==-1?Ps:(l=Number(c.substring(l,d)),isNaN(l)?gu:(d+=1,d+l>c.length?Ps:(c=c.slice(d,d+l),s.C=d+l,c)))}st.prototype.cancel=function(){this.K=!0,Tt(this)};function Or(s){s.T=Date.now()+s.H,Iu(s,s.H)}function Iu(s,c){if(s.D!=null)throw Error("WatchDog timer not null");s.D=bn(f(s.aa,s),c)}function ks(s){s.D&&(a.clearTimeout(s.D),s.D=null)}st.prototype.aa=function(){this.D=null;let s=Date.now();s-this.T>=0?(Zf(this.i,this.B),this.M!=2&&(An(),we(17)),Tt(this),this.m=2,Pn(this)):Iu(this,this.T-s)};function Pn(s){s.j.I==0||s.K||$u(s.j,s)}function Tt(s){ks(s);var c=s.O;c&&typeof c.dispose=="function"&&c.dispose(),s.O=null,ou(s.V),s.g&&(c=s.g,s.g=null,c.abort(),c.dispose())}function Ns(s,c){try{var l=s.j;if(l.I!=0&&(l.g==s||Ds(l.h,s))){if(!s.L&&Ds(l.h,s)&&l.I==3){try{var d=l.Ba.g.parse(c)}catch(H){d=null}if(Array.isArray(d)&&d.length==3){var T=d;if(T[0]==0){e:if(!l.v){if(l.g)if(l.g.F+3e3<s.F)Br(l),Fr(l);else break e;Ms(l),we(18)}}else l.xa=T[1],0<l.xa-l.K&&T[2]<37500&&l.F&&l.A==0&&!l.C&&(l.C=bn(f(l.Va,l),6e3));Tu(l.h)<=1&&l.ta&&(l.ta=void 0)}else At(l,11)}else if((s.L||l.g==s)&&Br(l),!m(c))for(T=l.Ba.g.parse(c),c=0;c<T.length;c++){let H=T[c],ce=H[0];if(!(ce<=l.K))if(l.K=ce,H=H[1],l.I==2)if(H[0]=="c"){l.M=H[1],l.ba=H[2];let Fe=H[3];Fe!=null&&(l.ka=Fe,l.j.info("VER="+l.ka));let bt=H[4];bt!=null&&(l.za=bt,l.j.info("SVER="+l.za));let ut=H[5];ut!=null&&typeof ut=="number"&&ut>0&&(d=1.5*ut,l.O=d,l.j.info("backChannelRequestTimeoutMs_="+d)),d=l;let lt=s.g;if(lt){let zr=lt.g?lt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zr){var b=d.h;b.g||zr.indexOf("spdy")==-1&&zr.indexOf("quic")==-1&&zr.indexOf("h2")==-1||(b.j=b.l,b.g=new Set,b.h&&(Os(b,b.h),b.h=null))}if(d.G){let Us=lt.g?lt.g.getResponseHeader("X-HTTP-Session-Id"):null;Us&&(d.wa=Us,W(d.J,d.G,Us))}}l.I=3,l.l&&l.l.ra(),l.aa&&(l.T=Date.now()-s.F,l.j.info("Handshake RTT: "+l.T+"ms")),d=l;var R=s;if(d.na=Ku(d,d.L?d.ba:null,d.W),R.L){vu(d.h,R);var M=R,se=d.O;se&&(M.H=se),M.D&&(ks(M),Or(M)),d.g=R}else zu(d);l.i.length>0&&Ur(l)}else H[0]!="stop"&&H[0]!="close"||At(l,7);else l.I==3&&(H[0]=="stop"||H[0]=="close"?H[0]=="stop"?At(l,7):Ls(l):H[0]!="noop"&&l.l&&l.l.qa(H),l.A=0)}}An(4)}catch(H){}}var ip=class{constructor(s,c){this.g=s,this.map=c}};function wu(s){this.l=s||10,a.PerformanceNavigationTiming?(s=a.performance.getEntriesByType("navigation"),s=s.length>0&&(s[0].nextHopProtocol=="hq"||s[0].nextHopProtocol=="h2")):s=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=s?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Eu(s){return s.h?!0:s.g?s.g.size>=s.j:!1}function Tu(s){return s.h?1:s.g?s.g.size:0}function Ds(s,c){return s.h?s.h==c:s.g?s.g.has(c):!1}function Os(s,c){s.g?s.g.add(c):s.h=c}function vu(s,c){s.h&&s.h==c?s.h=null:s.g&&s.g.has(c)&&s.g.delete(c)}wu.prototype.cancel=function(){if(this.i=Au(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let s of this.g.values())s.cancel();this.g.clear()}};function Au(s){if(s.h!=null)return s.i.concat(s.h.G);if(s.g!=null&&s.g.size!==0){let c=s.i;for(let l of s.g.values())c=c.concat(l.G);return c}return P(s.i)}var bu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sp(s,c){if(s){s=s.split("&");for(let l=0;l<s.length;l++){let d=s[l].indexOf("="),T,b=null;d>=0?(T=s[l].substring(0,d),b=s[l].substring(d+1)):T=s[l],c(T,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function ot(s){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let c;s instanceof ot?(this.l=s.l,Cn(this,s.j),this.o=s.o,this.g=s.g,kn(this,s.u),this.h=s.h,xs(this,Nu(s.i)),this.m=s.m):s&&(c=String(s).match(bu))?(this.l=!1,Cn(this,c[1]||"",!0),this.o=Nn(c[2]||""),this.g=Nn(c[3]||"",!0),kn(this,c[4]),this.h=Nn(c[5]||"",!0),xs(this,c[6]||"",!0),this.m=Nn(c[7]||"")):(this.l=!1,this.i=new On(null,this.l))}ot.prototype.toString=function(){let s=[];var c=this.j;c&&s.push(Dn(c,Su,!0),":");var l=this.g;return(l||c=="file")&&(s.push("//"),(c=this.o)&&s.push(Dn(c,Su,!0),"@"),s.push(Rn(l).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l=this.u,l!=null&&s.push(":",String(l))),(l=this.h)&&(this.g&&l.charAt(0)!="/"&&s.push("/"),s.push(Dn(l,l.charAt(0)=="/"?cp:ap,!0))),(l=this.i.toString())&&s.push("?",l),(l=this.m)&&s.push("#",Dn(l,lp)),s.join("")},ot.prototype.resolve=function(s){let c=Me(this),l=!!s.j;l?Cn(c,s.j):l=!!s.o,l?c.o=s.o:l=!!s.g,l?c.g=s.g:l=s.u!=null;var d=s.h;if(l)kn(c,s.u);else if(l=!!s.h){if(d.charAt(0)!="/")if(this.g&&!this.h)d="/"+d;else{var T=c.h.lastIndexOf("/");T!=-1&&(d=c.h.slice(0,T+1)+d)}if(T=d,T==".."||T==".")d="";else if(T.indexOf("./")!=-1||T.indexOf("/.")!=-1){d=T.lastIndexOf("/",0)==0,T=T.split("/");let b=[];for(let R=0;R<T.length;){let M=T[R++];M=="."?d&&R==T.length&&b.push(""):M==".."?((b.length>1||b.length==1&&b[0]!="")&&b.pop(),d&&R==T.length&&b.push("")):(b.push(M),d=!0)}d=b.join("/")}else d=T}return l?c.h=d:l=s.i.toString()!=="",l?xs(c,Nu(s.i)):l=!!s.m,l&&(c.m=s.m),c};function Me(s){return new ot(s)}function Cn(s,c,l){s.j=l?Nn(c,!0):c,s.j&&(s.j=s.j.replace(/:$/,""))}function kn(s,c){if(c){if(c=Number(c),isNaN(c)||c<0)throw Error("Bad port number "+c);s.u=c}else s.u=null}function xs(s,c,l){c instanceof On?(s.i=c,hp(s.i,s.l)):(l||(c=Dn(c,up)),s.i=new On(c,s.l))}function W(s,c,l){s.i.set(c,l)}function xr(s){return W(s,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),s}function Nn(s,c){return s?c?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function Dn(s,c,l){return typeof s=="string"?(s=encodeURI(s).replace(c,op),l&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function op(s){return s=s.charCodeAt(0),"%"+(s>>4&15).toString(16)+(s&15).toString(16)}var Su=/[#\/\?@]/g,ap=/[#\?:]/g,cp=/[#\?]/g,up=/[#\?@]/g,lp=/#/g;function On(s,c){this.h=this.g=null,this.i=s||null,this.j=!!c}function vt(s){s.g||(s.g=new Map,s.h=0,s.i&&sp(s.i,function(c,l){s.add(decodeURIComponent(c.replace(/\+/g," ")),l)}))}n=On.prototype,n.add=function(s,c){vt(this),this.i=null,s=Gt(this,s);let l=this.g.get(s);return l||this.g.set(s,l=[]),l.push(c),this.h+=1,this};function Ru(s,c){vt(s),c=Gt(s,c),s.g.has(c)&&(s.i=null,s.h-=s.g.get(c).length,s.g.delete(c))}function Pu(s,c){return vt(s),c=Gt(s,c),s.g.has(c)}n.forEach=function(s,c){vt(this),this.g.forEach(function(l,d){l.forEach(function(T){s.call(c,T,d,this)},this)},this)};function Cu(s,c){vt(s);let l=[];if(typeof c=="string")Pu(s,c)&&(l=l.concat(s.g.get(Gt(s,c))));else for(s=Array.from(s.g.values()),c=0;c<s.length;c++)l=l.concat(s[c]);return l}n.set=function(s,c){return vt(this),this.i=null,s=Gt(this,s),Pu(this,s)&&(this.h-=this.g.get(s).length),this.g.set(s,[c]),this.h+=1,this},n.get=function(s,c){return s?(s=Cu(this,s),s.length>0?String(s[0]):c):c};function ku(s,c,l){Ru(s,c),l.length>0&&(s.i=null,s.g.set(Gt(s,c),P(l)),s.h+=l.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let s=[],c=Array.from(this.g.keys());for(let d=0;d<c.length;d++){var l=c[d];let T=Rn(l);l=Cu(this,l);for(let b=0;b<l.length;b++){let R=T;l[b]!==""&&(R+="="+Rn(l[b])),s.push(R)}}return this.i=s.join("&")};function Nu(s){let c=new On;return c.i=s.i,s.g&&(c.g=new Map(s.g),c.h=s.h),c}function Gt(s,c){return c=String(c),s.j&&(c=c.toLowerCase()),c}function hp(s,c){c&&!s.j&&(vt(s),s.i=null,s.g.forEach(function(l,d){let T=d.toLowerCase();d!=T&&(Ru(this,d),ku(this,T,l))},s)),s.j=c}function dp(s,c){let l=new Sn;if(a.Image){let d=new Image;d.onload=_(at,l,"TestLoadImage: loaded",!0,c,d),d.onerror=_(at,l,"TestLoadImage: error",!1,c,d),d.onabort=_(at,l,"TestLoadImage: abort",!1,c,d),d.ontimeout=_(at,l,"TestLoadImage: timeout",!1,c,d),a.setTimeout(function(){d.ontimeout&&d.ontimeout()},1e4),d.src=s}else c(!1)}function fp(s,c){let l=new Sn,d=new AbortController,T=setTimeout(()=>{d.abort(),at(l,"TestPingServer: timeout",!1,c)},1e4);fetch(s,{signal:d.signal}).then(b=>{clearTimeout(T),b.ok?at(l,"TestPingServer: ok",!0,c):at(l,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(T),at(l,"TestPingServer: error",!1,c)})}function at(s,c,l,d,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),d(l)}catch(b){}}function pp(){this.g=new Jf}function Vr(s){this.i=s.Sb||null,this.h=s.ab||!1}y(Vr,au),Vr.prototype.g=function(){return new Lr(this.i,this.h)};function Lr(s,c){pe.call(this),this.H=s,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Lr,pe),n=Lr.prototype,n.open=function(s,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=s,this.D=c,this.readyState=1,Vn(this)},n.send=function(s){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let c={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};s&&(c.body=s),(this.H||a).fetch(new Request(this.D,c)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,xn(this)),this.readyState=0},n.Pa=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,Vn(this)),this.g&&(this.readyState=3,Vn(this),this.g)))if(this.responseType==="arraybuffer")s.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in s){if(this.j=s.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Du(this)}else s.text().then(this.Oa.bind(this),this.ga.bind(this))};function Du(s){s.j.read().then(s.Ma.bind(s)).catch(s.ga.bind(s))}n.Ma=function(s){if(this.g){if(this.o&&s.value)this.response.push(s.value);else if(!this.o){var c=s.value?s.value:new Uint8Array(0);(c=this.B.decode(c,{stream:!s.done}))&&(this.response=this.responseText+=c)}s.done?xn(this):Vn(this),this.readyState==3&&Du(this)}},n.Oa=function(s){this.g&&(this.response=this.responseText=s,xn(this))},n.Na=function(s){this.g&&(this.response=s,xn(this))},n.ga=function(){this.g&&xn(this)};function xn(s){s.readyState=4,s.l=null,s.j=null,s.B=null,Vn(s)}n.setRequestHeader=function(s,c){this.A.append(s,c)},n.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let s=[],c=this.h.entries();for(var l=c.next();!l.done;)l=l.value,s.push(l[0]+": "+l[1]),l=c.next();return s.join("\r\n")};function Vn(s){s.onreadystatechange&&s.onreadystatechange.call(s)}Object.defineProperty(Lr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(s){this.m=s?"include":"same-origin"}});function Ou(s){let c="";return Pr(s,function(l,d){c+=d,c+=":",c+=l,c+="\r\n"}),c}function Vs(s,c,l){e:{for(d in l){var d=!1;break e}d=!0}d||(l=Ou(l),typeof s=="string"?l!=null&&Rn(l):W(s,c,l))}function J(s){pe.call(this),this.headers=new Map,this.L=s||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(J,pe);var mp=/^https?$/i,gp=["POST","PUT"];n=J.prototype,n.Fa=function(s){this.H=s},n.ea=function(s,c,l,d){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+s);c=c?c.toUpperCase():"GET",this.D=s,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():pu.g(),this.g.onreadystatechange=A(f(this.Ca,this));try{this.B=!0,this.g.open(c,String(s),!0),this.B=!1}catch(b){xu(this,b);return}if(s=l||"",l=new Map(this.headers),d)if(Object.getPrototypeOf(d)===Object.prototype)for(var T in d)l.set(T,d[T]);else if(typeof d.keys=="function"&&typeof d.get=="function")for(let b of d.keys())l.set(b,d.get(b));else throw Error("Unknown input type for opt_headers: "+String(d));d=Array.from(l.keys()).find(b=>b.toLowerCase()=="content-type"),T=a.FormData&&s instanceof a.FormData,!(Array.prototype.indexOf.call(gp,c,void 0)>=0)||d||T||l.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[b,R]of l)this.g.setRequestHeader(b,R);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(s),this.v=!1}catch(b){xu(this,b)}};function xu(s,c){s.h=!1,s.g&&(s.j=!0,s.g.abort(),s.j=!1),s.l=c,s.o=5,Vu(s),Mr(s)}function Vu(s){s.A||(s.A=!0,Ie(s,"complete"),Ie(s,"error"))}n.abort=function(s){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=s||7,Ie(this,"complete"),Ie(this,"abort"),Mr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mr(this,!0)),J.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Lu(this):this.Xa())},n.Xa=function(){Lu(this)};function Lu(s){if(s.h&&typeof o<"u"){if(s.v&&ct(s)==4)setTimeout(s.Ca.bind(s),0);else if(Ie(s,"readystatechange"),ct(s)==4){s.h=!1;try{let b=s.ca();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var l;if(!(l=c)){var d;if(d=b===0){let R=String(s.D).match(bu)[1]||null;!R&&a.self&&a.self.location&&(R=a.self.location.protocol.slice(0,-1)),d=!mp.test(R?R.toLowerCase():"")}l=d}if(l)Ie(s,"complete"),Ie(s,"success");else{s.o=6;try{var T=ct(s)>2?s.g.statusText:""}catch(R){T=""}s.l=T+" ["+s.ca()+"]",Vu(s)}}finally{Mr(s)}}}}function Mr(s,c){if(s.g){s.m&&(clearTimeout(s.m),s.m=null);let l=s.g;s.g=null,c||Ie(s,"ready");try{l.onreadystatechange=null}catch(d){}}}n.isActive=function(){return!!this.g};function ct(s){return s.g?s.g.readyState:0}n.ca=function(){try{return ct(this)>2?this.g.status:-1}catch(s){return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch(s){return""}},n.La=function(s){if(this.g){var c=this.g.responseText;return s&&c.indexOf(s)==0&&(c=c.substring(s.length)),Qf(c)}};function Mu(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.F){case"":case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch(c){return null}}function _p(s){let c={};s=(s.g&&ct(s)>=2&&s.g.getAllResponseHeaders()||"").split("\r\n");for(let d=0;d<s.length;d++){if(m(s[d]))continue;var l=tp(s[d]);let T=l[0];if(l=l[1],typeof l!="string")continue;l=l.trim();let b=c[T]||[];c[T]=b,b.push(l)}$f(c,function(d){return d.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ln(s,c,l){return l&&l.internalChannelParams&&l.internalChannelParams[s]||c}function Fu(s){this.za=0,this.i=[],this.j=new Sn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ln("failFast",!1,s),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ln("baseRetryDelayMs",5e3,s),this.Za=Ln("retryDelaySeedMs",1e4,s),this.Ta=Ln("forwardChannelMaxRetries",2,s),this.va=Ln("forwardChannelRequestTimeoutMs",2e4,s),this.ma=s&&s.xmlHttpFactory||void 0,this.Ua=s&&s.Rb||void 0,this.Aa=s&&s.useFetchStreams||!1,this.O=void 0,this.L=s&&s.supportsCrossDomainXhr||!1,this.M="",this.h=new wu(s&&s.concurrentRequestLimit),this.Ba=new pp,this.S=s&&s.fastHandshake||!1,this.R=s&&s.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=s&&s.Pb||!1,s&&s.ua&&this.j.ua(),s&&s.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&s&&s.detectBufferingProxy||!1,this.ia=void 0,s&&s.longPollingTimeout&&s.longPollingTimeout>0&&(this.ia=s.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Fu.prototype,n.ka=8,n.I=1,n.connect=function(s,c,l,d){we(0),this.W=s,this.H=c||{},l&&d!==void 0&&(this.H.OSID=l,this.H.OAID=d),this.F=this.X,this.J=Ku(this,null,this.W),Ur(this)};function Ls(s){if(Uu(s),s.I==3){var c=s.V++,l=Me(s.J);if(W(l,"SID",s.M),W(l,"RID",c),W(l,"TYPE","terminate"),Mn(s,l),c=new st(s,s.j,c),c.M=2,c.A=xr(Me(l)),l=!1,a.navigator&&a.navigator.sendBeacon)try{l=a.navigator.sendBeacon(c.A.toString(),"")}catch(d){}!l&&a.Image&&(new Image().src=c.A,l=!0),l||(c.g=Wu(c.j,null),c.g.ea(c.A)),c.F=Date.now(),Or(c)}Hu(s)}function Fr(s){s.g&&(Fs(s),s.g.cancel(),s.g=null)}function Uu(s){Fr(s),s.v&&(a.clearTimeout(s.v),s.v=null),Br(s),s.h.cancel(),s.m&&(typeof s.m=="number"&&a.clearTimeout(s.m),s.m=null)}function Ur(s){if(!Eu(s.h)&&!s.m){s.m=!0;var c=s.Ea;ie||p(),Q||(ie(),Q=!0),w.add(c,s),s.D=0}}function yp(s,c){return Tu(s.h)>=s.h.j-(s.m?1:0)?!1:s.m?(s.i=c.G.concat(s.i),!0):s.I==1||s.I==2||s.D>=(s.Sa?0:s.Ta)?!1:(s.m=bn(f(s.Ea,s,c),Gu(s,s.D)),s.D++,!0)}n.Ea=function(s){if(this.m)if(this.m=null,this.I==1){if(!s){this.V=Math.floor(Math.random()*1e5),s=this.V++;let T=new st(this,this.j,s),b=this.o;if(this.U&&(b?(b=Jc(b),Xc(b,this.U)):b=this.U),this.u!==null||this.R||(T.J=b,b=null),this.S)e:{for(var c=0,l=0;l<this.i.length;l++){t:{var d=this.i[l];if("__data__"in d.map&&(d=d.map.__data__,typeof d=="string")){d=d.length;break t}d=void 0}if(d===void 0)break;if(c+=d,c>4096){c=l;break e}if(c===4096||l===this.i.length-1){c=l+1;break e}}c=1e3}else c=1e3;c=qu(this,T,c),l=Me(this.J),W(l,"RID",s),W(l,"CVER",22),this.G&&W(l,"X-HTTP-Session-Id",this.G),Mn(this,l),b&&(this.R?c="headers="+Rn(Ou(b))+"&"+c:this.u&&Vs(l,this.u,b)),Os(this.h,T),this.Ra&&W(l,"TYPE","init"),this.S?(W(l,"$req",c),W(l,"SID","null"),T.U=!0,Cs(T,l,null)):Cs(T,l,c),this.I=2}}else this.I==3&&(s?Bu(this,s):this.i.length==0||Eu(this.h)||Bu(this))};function Bu(s,c){var l;c?l=c.l:l=s.V++;let d=Me(s.J);W(d,"SID",s.M),W(d,"RID",l),W(d,"AID",s.K),Mn(s,d),s.u&&s.o&&Vs(d,s.u,s.o),l=new st(s,s.j,l,s.D+1),s.u===null&&(l.J=s.o),c&&(s.i=c.G.concat(s.i)),c=qu(s,l,1e3),l.H=Math.round(s.va*.5)+Math.round(s.va*.5*Math.random()),Os(s.h,l),Cs(l,d,c)}function Mn(s,c){s.H&&Pr(s.H,function(l,d){W(c,d,l)}),s.l&&Pr({},function(l,d){W(c,d,l)})}function qu(s,c,l){l=Math.min(s.i.length,l);let d=s.l?f(s.l.Ka,s.l,s):null;e:{var T=s.i;let M=-1;for(;;){let se=["count="+l];M==-1?l>0?(M=T[0].g,se.push("ofs="+M)):M=0:se.push("ofs="+M);let H=!0;for(let ce=0;ce<l;ce++){var b=T[ce].g;let Fe=T[ce].map;if(b-=M,b<0)M=Math.max(0,T[ce].g-100),H=!1;else try{b="req"+b+"_"||"";try{var R=Fe instanceof Map?Fe:Object.entries(Fe);for(let[bt,ut]of R){let lt=ut;u(ut)&&(lt=As(ut)),se.push(b+bt+"="+encodeURIComponent(lt))}}catch(bt){throw se.push(b+"type="+encodeURIComponent("_badmap")),bt}}catch(bt){d&&d(Fe)}}if(H){R=se.join("&");break e}}R=void 0}return s=s.i.splice(0,l),c.G=s,R}function zu(s){if(!s.g&&!s.v){s.Y=1;var c=s.Da;ie||p(),Q||(ie(),Q=!0),w.add(c,s),s.A=0}}function Ms(s){return s.g||s.v||s.A>=3?!1:(s.Y++,s.v=bn(f(s.Da,s),Gu(s,s.A)),s.A++,!0)}n.Da=function(){if(this.v=null,ju(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var s=4*this.T;this.j.info("BP detection timer enabled: "+s),this.B=bn(f(this.Wa,this),s)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,we(10),Fr(this),ju(this))};function Fs(s){s.B!=null&&(a.clearTimeout(s.B),s.B=null)}function ju(s){s.g=new st(s,s.j,"rpc",s.Y),s.u===null&&(s.g.J=s.o),s.g.P=0;var c=Me(s.na);W(c,"RID","rpc"),W(c,"SID",s.M),W(c,"AID",s.K),W(c,"CI",s.F?"0":"1"),!s.F&&s.ia&&W(c,"TO",s.ia),W(c,"TYPE","xmlhttp"),Mn(s,c),s.u&&s.o&&Vs(c,s.u,s.o),s.O&&(s.g.H=s.O);var l=s.g;s=s.ba,l.M=1,l.A=xr(Me(c)),l.u=null,l.R=!0,_u(l,s)}n.Va=function(){this.C!=null&&(this.C=null,Fr(this),Ms(this),we(19))};function Br(s){s.C!=null&&(a.clearTimeout(s.C),s.C=null)}function $u(s,c){var l=null;if(s.g==c){Br(s),Fs(s),s.g=null;var d=2}else if(Ds(s.h,c))l=c.G,vu(s.h,c),d=1;else return;if(s.I!=0){if(c.o)if(d==1){l=c.u?c.u.length:0,c=Date.now()-c.F;var T=s.D;d=Nr(),Ie(d,new du(d,l)),Ur(s)}else zu(s);else if(T=c.m,T==3||T==0&&c.X>0||!(d==1&&yp(s,c)||d==2&&Ms(s)))switch(l&&l.length>0&&(c=s.h,c.i=c.i.concat(l)),T){case 1:At(s,5);break;case 4:At(s,10);break;case 3:At(s,6);break;default:At(s,2)}}}function Gu(s,c){let l=s.Qa+Math.floor(Math.random()*s.Za);return s.isActive()||(l*=2),l*c}function At(s,c){if(s.j.info("Error code "+c),c==2){var l=f(s.bb,s),d=s.Ua;let T=!d;d=new ot(d||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Cn(d,"https"),xr(d),T?dp(d.toString(),l):fp(d.toString(),l)}else we(2);s.I=0,s.l&&s.l.pa(c),Hu(s),Uu(s)}n.bb=function(s){s?(this.j.info("Successfully pinged google.com"),we(2)):(this.j.info("Failed to ping google.com"),we(1))};function Hu(s){if(s.I=0,s.ja=[],s.l){let c=Au(s.h);(c.length!=0||s.i.length!=0)&&(k(s.ja,c),k(s.ja,s.i),s.h.i.length=0,P(s.i),s.i.length=0),s.l.oa()}}function Ku(s,c,l){var d=l instanceof ot?Me(l):new ot(l);if(d.g!="")c&&(d.g=c+"."+d.g),kn(d,d.u);else{var T=a.location;d=T.protocol,c=c?c+"."+T.hostname:T.hostname,T=+T.port;let b=new ot(null);d&&Cn(b,d),c&&(b.g=c),T&&kn(b,T),l&&(b.h=l),d=b}return l=s.G,c=s.wa,l&&c&&W(d,l,c),W(d,"VER",s.ka),Mn(s,d),d}function Wu(s,c,l){if(c&&!s.L)throw Error("Can't create secondary domain capable XhrIo object.");return c=s.Aa&&!s.ma?new J(new Vr({ab:l})):new J(s.ma),c.Fa(s.L),c}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qu(){}n=Qu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function qr(){}qr.prototype.g=function(s,c){return new Pe(s,c)};function Pe(s,c){pe.call(this),this.g=new Fu(c),this.l=s,this.h=c&&c.messageUrlParams||null,s=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.o=s,s=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(s?s["X-WebChannel-Content-Type"]=c.messageContentType:s={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.sa&&(s?s["X-WebChannel-Client-Profile"]=c.sa:s={"X-WebChannel-Client-Profile":c.sa}),this.g.U=s,(s=c&&c.Qb)&&!m(s)&&(this.g.u=s),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!m(c)&&(this.g.G=c,s=this.h,s!==null&&c in s&&(s=this.h,c in s&&delete s[c])),this.j=new Ht(this)}y(Pe,pe),Pe.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Pe.prototype.close=function(){Ls(this.g)},Pe.prototype.o=function(s){var c=this.g;if(typeof s=="string"){var l={};l.__data__=s,s=l}else this.v&&(l={},l.__data__=As(s),s=l);c.i.push(new ip(c.Ya++,s)),c.I==3&&Ur(c)},Pe.prototype.N=function(){this.g.l=null,delete this.j,Ls(this.g),delete this.g,Pe.Z.N.call(this)};function Ju(s){bs.call(this),s.__headers__&&(this.headers=s.__headers__,this.statusCode=s.__status__,delete s.__headers__,delete s.__status__);var c=s.__sm__;if(c){e:{for(let l in c){s=l;break e}s=void 0}(this.i=s)&&(s=this.i,c=c!==null&&s in c?c[s]:void 0),this.data=c}else this.data=s}y(Ju,bs);function Yu(){Ss.call(this),this.status=1}y(Yu,Ss);function Ht(s){this.g=s}y(Ht,Qu),Ht.prototype.ra=function(){Ie(this.g,"a")},Ht.prototype.qa=function(s){Ie(this.g,new Ju(s))},Ht.prototype.pa=function(s){Ie(this.g,new Yu)},Ht.prototype.oa=function(){Ie(this.g,"b")},qr.prototype.createWebChannel=qr.prototype.g,Pe.prototype.send=Pe.prototype.o,Pe.prototype.open=Pe.prototype.m,Pe.prototype.close=Pe.prototype.close,po=Xe.createWebChannelTransport=function(){return new qr},fo=Xe.getStatEventTarget=function(){return Nr()},ho=Xe.Event=Et,ri=Xe.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Dr.NO_ERROR=0,Dr.TIMEOUT=8,Dr.HTTP_ERROR=6,zn=Xe.ErrorCode=Dr,fu.COMPLETE="complete",lo=Xe.EventType=fu,cu.EventType=vn,vn.OPEN="a",vn.CLOSE="b",vn.ERROR="c",vn.MESSAGE="d",pe.prototype.listen=pe.prototype.J,Xt=Xe.WebChannel=cu,jm=Xe.FetchXmlHttpFactory=Vr,J.prototype.listenOnce=J.prototype.K,J.prototype.getLastError=J.prototype.Ha,J.prototype.getLastErrorCode=J.prototype.ya,J.prototype.getStatus=J.prototype.ca,J.prototype.getResponseJson=J.prototype.La,J.prototype.getResponseText=J.prototype.la,J.prototype.send=J.prototype.ea,J.prototype.setWithCredentials=J.prototype.Fa,uo=Xe.XhrIo=J}).apply(typeof ni<"u"?ni:typeof self<"u"?self:typeof window<"u"?window:{});var Nl="@firebase/firestore",Dl="4.9.2";var fe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};fe.UNAUTHENTICATED=new fe(null),fe.GOOGLE_CREDENTIALS=new fe("google-credentials-uid"),fe.FIRST_PARTY=new fe("first-party-uid"),fe.MOCK_USER=new fe("mock-user");var In="12.3.0";var Dt=new Be("@firebase/firestore");function jn(){return Dt.logLevel}function L(n,...e){if(Dt.logLevel<=F.DEBUG){let t=e.map(La);Dt.debug("Firestore (".concat(In,"): ").concat(n),...t)}}function Pi(n,...e){if(Dt.logLevel<=F.ERROR){let t=e.map(La);Dt.error("Firestore (".concat(In,"): ").concat(n),...t)}}function Va(n,...e){if(Dt.logLevel<=F.WARN){let t=e.map(La);Dt.warn("Firestore (".concat(In,"): ").concat(n),...t)}}function La(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch(e){return n}}function j(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,sh(n,r,t)}function sh(n,e,t){let r="FIRESTORE (".concat(In,") INTERNAL ASSERTION FAILED: ").concat(e," (ID: ").concat(n.toString(16),")");if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch(i){r+=" CONTEXT: "+t}throw Pi(r),new Error(r)}function be(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||sh(e,i,r)}function Re(n,e){return n}var C={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},x=class extends oe{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}};var Ct=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}};var ci=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}},Io=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(fe.UNAUTHENTICATED)))}shutdown(){}},wo=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}},Eo=class{constructor(e){this.t=e,this.currentUser=fe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){be(this.o===void 0,42304);let r=this.i,i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve(),o=new Ct;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ct,e.enqueueRetryable((()=>i(this.currentUser)))};let a=()=>{let h=o;e.enqueueRetryable((async()=>{await h.promise,await i(this.currentUser)}))},u=h=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((h=>u(h))),setTimeout((()=>{if(!this.auth){let h=this.t.getImmediate({optional:!0});h?u(h):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ct)}}),0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(be(typeof r.accessToken=="string",31837,{l:r}),new ci(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return be(e===null||typeof e=="string",2055,{h:e}),new fe(e)}},To=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=fe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},vo=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new To(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(fe.FIRST_PARTY)))}shutdown(){}invalidateToken(){}},ui=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ao=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Te(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){be(this.o===void 0,3512);let r=o=>{o.error!=null&&L("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(o.error.message));let a=o.token!==this.m;return this.m=o.token,L("FirebaseAppCheckTokenProvider","Received ".concat(a?"new":"existing"," token.")),a?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};let i=o=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ui(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(be(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ui(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function $m(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var bo=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=$m(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function K(n,e){return n<e?-1:n>e?1:0}function So(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return mo(i)===mo(o)?K(i,o):mo(i)?1:-1}return K(n.length,e.length)}var Gm=55296,Hm=57343;function mo(n){let e=n.charCodeAt(0);return e>=Gm&&e<=Hm}function sn(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}var Ol="__name__",li=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&j(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&j(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return K(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):So(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ti.fromString(e.substring(4,e.length-2))}},_e=class n extends li{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new x(C.INVALID_ARGUMENT,"Invalid segment (".concat(r,"). Paths must not contain // in them."));t.push(...r.split("/").filter((i=>i.length>0)))}return new n(t)}static emptyPath(){return new n([])}},Km=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ve=class n extends li{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Km.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ol}static keyField(){return new n([Ol])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new x(C.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},a=!1;for(;i<e.length;){let u=e[i];if(u==="\\"){if(i+1===e.length)throw new x(C.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new x(C.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(r+=u,i++):(o(),i++)}if(o(),a)throw new x(C.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var q=class n{constructor(e){this.path=e}static fromPath(e){return new n(_e.fromString(e))}static fromName(e){return new n(_e.fromString(e).popFirst(5))}static empty(){return new n(_e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return _e.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new _e(e.slice()))}};function Wm(n,e,t,r){if(e===!0&&r===!0)throw new x(C.INVALID_ARGUMENT,"".concat(n," and ").concat(t," cannot be used together."))}function Qm(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Jm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n="".concat(n.substring(0,20),"...")),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?"a custom ".concat(e," object"):"an object"}}return typeof n=="function"?"a function":j(12329,{type:typeof n})}function Ym(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new x(C.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Jm(n);throw new x(C.INVALID_ARGUMENT,"Expected type '".concat(e.name,"', but it was: ").concat(t))}}return n}function ne(n,e){let t={typeString:n};return e&&(t.value=e),t}function ar(n,e){if(!Qm(n))throw new x(C.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t="JSON missing required field: '".concat(r,"'");break}let a=n[r];if(i&&typeof a!==i){t="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(o!==void 0&&a!==o.value){t="Expected '".concat(r,"' field to equal '").concat(o.value,"'");break}}if(t)throw new x(C.INVALID_ARGUMENT,t);return!0}var xl=-62135596800,Vl=1e6,Se=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Vl);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new x(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new x(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<xl)throw new x(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new x(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Vl}_compareTo(e){return this.seconds===e.seconds?K(this.nanoseconds,e.nanoseconds):K(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ar(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-xl;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Se._jsonSchemaVersion="firestore/timestamp/1.0",Se._jsonSchema={type:ne("string",Se._jsonSchemaVersion),seconds:ne("number"),nanoseconds:ne("number")};var Z=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Se(0,0))}static max(){return new n(new Se(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var er=-1,Ro=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Ro.UNKNOWN_ID=-1;function Xm(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Z.fromTimestamp(r===1e9?new Se(t+1,0):new Se(t,r));return new Ot(i,q.empty(),e)}function Zm(n){return new Ot(n.readTime,n.key,er)}var Ot=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Z.min(),q.empty(),er)}static max(){return new n(Z.max(),q.empty(),er)}};function eg(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=q.comparator(n.documentKey,e.documentKey),t!==0?t:K(n.largestBatchId,e.largestBatchId))}var Po=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}};var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&j(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n(((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):n.reject(t)}static resolve(e){return new n(((t,r)=>{t(e)}))}static reject(e){return new n(((t,r)=>{r(e)}))}static waitFor(e){return new n(((t,r)=>{let i=0,o=0,a=!1;e.forEach((u=>{++i,u.next((()=>{++o,a&&o===i&&t()}),(h=>r(h)))})),a=!0,o===i&&t()}))}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next((i=>i?n.resolve(i):r()));return t}static forEach(e,t){let r=[];return e.forEach(((i,o)=>{r.push(t.call(this,i,o))})),this.waitFor(r)}static mapArray(e,t){return new n(((r,i)=>{let o=e.length,a=new Array(o),u=0;for(let h=0;h<o;h++){let f=h;t(e[f]).next((_=>{a[f]=_,++u,u===o&&r(a)}),(_=>i(_)))}}))}static doWhile(e,t){return new n(((r,i)=>{let o=()=>{e()===!0?t().next((()=>{o()}),i):r()};o()}))}};function tg(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function oh(n){return n.name==="IndexedDbTransactionError"}var hi=class{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ue&&this.ue(e),e}};hi.ce=-1;var ng=-1;function Ma(n){return n==null}function di(n){return n===0&&1/n==-1/0}var rg="remoteDocuments",ah="owner";var ch="mutationQueues";var uh="mutations";var lh="documentMutations",ig="remoteDocumentsV14";var hh="remoteDocumentGlobal";var dh="targets";var fh="targetDocuments";var ph="targetGlobal",mh="collectionParents";var gh="clientMetadata";var _h="bundles";var yh="namedQueries";var sg="indexConfiguration";var og="indexState";var ag="indexEntries";var Ih="documentOverlays";var cg="globals";var ug=[ch,uh,lh,rg,dh,ah,ph,fh,gh,hh,mh,_h,yh],hE=[...ug,Ih],lg=[ch,uh,lh,ig,dh,ah,ph,fh,gh,hh,mh,_h,yh,Ih],hg=lg,dg=[...hg,sg,og,ag];var dE=[...dg,cg];function Ll(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Fa(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function fg(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var xe=class n{constructor(e,t){this.comparator=e,this.root=t||je.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,je.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,je.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){let e=[];return this.inorderTraversal(((t,r)=>(e.push("".concat(t,":").concat(r)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new en(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new en(this.root,e,this.comparator,!1)}getReverseIterator(){return new en(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new en(this.root,e,this.comparator,!0)}},en=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},je=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r!=null?r:n.RED,this.left=i!=null?i:n.EMPTY,this.right=o!=null?o:n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e!=null?e:this.key,t!=null?t:this.value,r!=null?r:this.color,i!=null?i:this.left,o!=null?o:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw j(43730,{key:this.key,value:this.value});if(this.right.isRed())throw j(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw j(27949);return e+(this.isRed()?0:1)}};je.EMPTY=null,je.RED=!0,je.BLACK=!1;je.EMPTY=new class{constructor(){this.size=0}get key(){throw j(57766)}get value(){throw j(16141)}get color(){throw j(16727)}get left(){throw j(29726)}get right(){throw j(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new je(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ve=class n{constructor(e){this.comparator=e,this.data=new xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fi(this.data.getIterator())}getIteratorFrom(e){return new fi(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach((t=>{e.push(t)})),e}toString(){let e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},fi=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Rt=class n{constructor(e){this.fields=e,e.sort(Ve.comparator)}static empty(){return new n([])}unionWith(e){let t=new ve(Ve.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sn(this.fields,e.fields,((t,r)=>t.isEqual(r)))}};var Co=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ze=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Co("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return K(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ze.EMPTY_BYTE_STRING=new Ze("");var pg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ft(n){if(be(!!n,39018),typeof n=="string"){let e=0,t=pg.exec(n);if(be(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:te(n.seconds),nanos:te(n.nanos)}}function te(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function on(n){return typeof n=="string"?Ze.fromBase64String(n):Ze.fromUint8Array(n)}var wh="server_timestamp",Eh="__type__",Th="__previous_value__",vh="__local_write_time__";function Ua(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Eh])==null?void 0:r.stringValue)===wh}function Ah(n){let e=n.mapValue.fields[Th];return Ua(e)?Ah(e):e}function pi(n){let e=ft(n.mapValue.fields[vh].timestampValue);return new Se(e.seconds,e.nanos)}var mi="(default)",ko=class n{constructor(e,t){this.projectId=e,this.database=t||mi}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===mi}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var bh="__type__",Sh="__max__",ii={mapValue:{fields:{__type__:{stringValue:Sh}}}},Rh="__vector__",gi="value";function an(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ua(n)?4:Ch(n)?9007199254740991:Ph(n)?10:11:j(28295,{value:n})}function $e(n,e){if(n===e)return!0;let t=an(n);if(t!==an(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return pi(n).isEqual(pi(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let a=ft(i.timestampValue),u=ft(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return on(i.bytesValue).isEqual(on(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return te(i.geoPointValue.latitude)===te(o.geoPointValue.latitude)&&te(i.geoPointValue.longitude)===te(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return te(i.integerValue)===te(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let a=te(i.doubleValue),u=te(o.doubleValue);return a===u?di(a)===di(u):isNaN(a)&&isNaN(u)}return!1})(n,e);case 9:return sn(n.arrayValue.values||[],e.arrayValue.values||[],$e);case 10:case 11:return(function(i,o){let a=i.mapValue.fields||{},u=o.mapValue.fields||{};if(Ll(a)!==Ll(u))return!1;for(let h in a)if(a.hasOwnProperty(h)&&(u[h]===void 0||!$e(a[h],u[h])))return!1;return!0})(n,e);default:return j(52216,{left:n})}}function tr(n,e){return(n.values||[]).find((t=>$e(t,e)))!==void 0}function cn(n,e){if(n===e)return 0;let t=an(n),r=an(e);if(t!==r)return K(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return K(n.booleanValue,e.booleanValue);case 2:return(function(o,a){let u=te(o.integerValue||o.doubleValue),h=te(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1})(n,e);case 3:return Ml(n.timestampValue,e.timestampValue);case 4:return Ml(pi(n),pi(e));case 5:return So(n.stringValue,e.stringValue);case 6:return(function(o,a){let u=on(o),h=on(a);return u.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(o,a){let u=o.split("/"),h=a.split("/");for(let f=0;f<u.length&&f<h.length;f++){let _=K(u[f],h[f]);if(_!==0)return _}return K(u.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,a){let u=K(te(o.latitude),te(a.latitude));return u!==0?u:K(te(o.longitude),te(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Fl(n.arrayValue,e.arrayValue);case 10:return(function(o,a){var A,P,k,O;let u=o.fields||{},h=a.fields||{},f=(A=u[gi])==null?void 0:A.arrayValue,_=(P=h[gi])==null?void 0:P.arrayValue,y=K(((k=f==null?void 0:f.values)==null?void 0:k.length)||0,((O=_==null?void 0:_.values)==null?void 0:O.length)||0);return y!==0?y:Fl(f,_)})(n.mapValue,e.mapValue);case 11:return(function(o,a){if(o===ii.mapValue&&a===ii.mapValue)return 0;if(o===ii.mapValue)return 1;if(a===ii.mapValue)return-1;let u=o.fields||{},h=Object.keys(u),f=a.fields||{},_=Object.keys(f);h.sort(),_.sort();for(let y=0;y<h.length&&y<_.length;++y){let A=So(h[y],_[y]);if(A!==0)return A;let P=cn(u[h[y]],f[_[y]]);if(P!==0)return P}return K(h.length,_.length)})(n.mapValue,e.mapValue);default:throw j(23264,{he:t})}}function Ml(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return K(n,e);let t=ft(n),r=ft(e),i=K(t.seconds,r.seconds);return i!==0?i:K(t.nanos,r.nanos)}function Fl(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=cn(t[i],r[i]);if(o)return o}return K(t.length,r.length)}function un(n){return No(n)}function No(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=ft(t);return"time(".concat(r.seconds,",").concat(r.nanos,")")})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return on(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return q.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return"geo(".concat(t.latitude,",").concat(t.longitude,")")})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=No(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let a of r)o?o=!1:i+=",",i+="".concat(a,":").concat(No(t.fields[a]));return i+"}"})(n.mapValue):j(61005,{value:n})}function Do(n){return!!n&&"integerValue"in n}function Ba(n){return!!n&&"arrayValue"in n}function go(n){return!!n&&"mapValue"in n}function Ph(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[bh])==null?void 0:r.stringValue)===Rh}function Gn(n){if(n.geoPointValue)return{geoPointValue:V({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:V({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Fa(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Gn(r))),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gn(n.arrayValue.values[t]);return e}return V({},n)}function Ch(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Sh}var pE={mapValue:{fields:{[bh]:{stringValue:Rh},[gi]:{arrayValue:{}}}}};var dt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!go(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gn(t)}setAll(e){let t=Ve.emptyPath(),r={},i=[];e.forEach(((a,u)=>{if(!t.isImmediateParentOf(u)){let h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=u.popLast()}a?r[u.lastSegment()]=Gn(a):i.push(u.lastSegment())}));let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());go(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $e(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];go(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Fa(t,((i,o)=>e[i]=o));for(let i of r)delete e[i]}clone(){return new n(Gn(this.value))}};var ln=class n{constructor(e,t,r,i,o,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new n(e,0,Z.min(),Z.min(),Z.min(),dt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Z.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Z.min(),Z.min(),dt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Z.min(),Z.min(),dt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}};var hn=class{constructor(e,t){this.position=e,this.inclusive=t}};function Ul(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],a=n.position[i];if(o.field.isKeyField()?r=q.comparator(q.fromName(a.referenceValue),t.key):r=cn(a,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Bl(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$e(n.position[t],e.position[t]))return!1;return!0}var dn=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function mg(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var _i=class{},le=class n extends _i{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new xo(e,t,r):t==="array-contains"?new Mo(e,r):t==="in"?new Fo(e,r):t==="not-in"?new Uo(e,r):t==="array-contains-any"?new Bo(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Vo(e,r):new Lo(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(cn(t,this.value)):t!==null&&an(this.value)===an(t)&&this.matchesComparison(cn(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return j(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},pt=class n extends _i{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return kh(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function kh(n){return n.op==="and"}function Nh(n){return gg(n)&&kh(n)}function gg(n){for(let e of n.filters)if(e instanceof pt)return!1;return!0}function Oo(n){if(n instanceof le)return n.field.canonicalString()+n.op.toString()+un(n.value);if(Nh(n))return n.filters.map((e=>Oo(e))).join(",");{let e=n.filters.map((t=>Oo(t))).join(",");return"".concat(n.op,"(").concat(e,")")}}function Dh(n,e){return n instanceof le?(function(r,i){return i instanceof le&&r.op===i.op&&r.field.isEqual(i.field)&&$e(r.value,i.value)})(n,e):n instanceof pt?(function(r,i){return i instanceof pt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((o,a,u)=>o&&Dh(a,i.filters[u])),!0):!1})(n,e):void j(19439)}function Oh(n){return n instanceof le?(function(t){return"".concat(t.field.canonicalString()," ").concat(t.op," ").concat(un(t.value))})(n):n instanceof pt?(function(t){return t.op.toString()+" {"+t.getFilters().map(Oh).join(" ,")+"}"})(n):"Filter"}var xo=class extends le{constructor(e,t,r){super(e,t,r),this.key=q.fromName(r.referenceValue)}matches(e){let t=q.comparator(e.key,this.key);return this.matchesComparison(t)}},Vo=class extends le{constructor(e,t){super(e,"in",t),this.keys=xh("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}},Lo=class extends le{constructor(e,t){super(e,"not-in",t),this.keys=xh("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}};function xh(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>q.fromName(r.referenceValue)))}var Mo=class extends le{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Ba(t)&&tr(t.arrayValue,this.value)}},Fo=class extends le{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&tr(this.value.arrayValue,t)}},Uo=class extends le{constructor(e,t){super(e,"not-in",t)}matches(e){if(tr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!tr(this.value.arrayValue,t)}},Bo=class extends le{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Ba(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>tr(this.value.arrayValue,r)))}};var qo=class{constructor(e,t=null,r=[],i=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=u,this.Te=null}};function ql(n,e=null,t=[],r=[],i=null,o=null,a=null){return new qo(n,e,t,r,i,o,a)}function qa(n){let e=Re(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Oo(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),Ma(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>un(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>un(r))).join(",")),e.Te=t}return e.Te}function za(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!mg(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Dh(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Bl(n.startAt,e.startAt)&&Bl(n.endAt,e.endAt)}var fn=class{constructor(e,t=null,r=[],i=[],o=null,a="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function _g(n,e,t,r,i,o,a,u){return new fn(n,e,t,r,i,o,a,u)}function yg(n){return new fn(n)}function zl(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Ig(n){return n.collectionGroup!==null}function Hn(n){let e=Re(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new ve(Ve.comparator);return a.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new dn(o,r))})),t.has(Ve.keyField().canonicalString())||e.Ie.push(new dn(Ve.keyField(),r))}return e.Ie}function kt(n){let e=Re(n);return e.Ee||(e.Ee=wg(e,Hn(n))),e.Ee}function wg(n,e){if(n.limitType==="F")return ql(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{let o=i.dir==="desc"?"asc":"desc";return new dn(i.field,o)}));let t=n.endAt?new hn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new hn(n.startAt.position,n.startAt.inclusive):null;return ql(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function zo(n,e,t){return new fn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Vh(n,e){return za(kt(n),kt(e))&&n.limitType===e.limitType}function Lh(n){return"".concat(qa(kt(n)),"|lt:").concat(n.limitType)}function $n(n){return"Query(target=".concat((function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=", filters: [".concat(t.filters.map((i=>Oh(i))).join(", "),"]")),Ma(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=", orderBy: [".concat(t.orderBy.map((i=>(function(a){return"".concat(a.field.canonicalString()," (").concat(a.dir,")")})(i))).join(", "),"]")),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>un(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>un(i))).join(",")),"Target(".concat(r,")")})(kt(n)),"; limitType=").concat(n.limitType,")")}function ja(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Hn(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,u,h){let f=Ul(a,u,h);return a.inclusive?f<=0:f<0})(r.startAt,Hn(r),i)||r.endAt&&!(function(a,u,h){let f=Ul(a,u,h);return a.inclusive?f>=0:f>0})(r.endAt,Hn(r),i))})(n,e)}function Eg(n){return(e,t)=>{let r=!1;for(let i of Hn(n)){let o=Tg(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Tg(n,e,t){let r=n.field.isKeyField()?q.comparator(e.key,t.key):(function(o,a,u){let h=a.data.field(o),f=u.data.field(o);return h!==null&&f!==null?cn(h,f):j(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return j(19790,{direction:n.dir})}}var mt=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Fa(this.inner,((t,r)=>{for(let[i,o]of r)e(i,o)}))}isEmpty(){return fg(this.inner)}size(){return this.innerSize}};var vg=new xe(q.comparator);function jo(){return vg}var Mh=new xe(q.comparator);function si(...n){let e=Mh;for(let t of n)e=e.insert(t.key,t);return e}function Ag(n){let e=Mh;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Pt(){return Kn()}function Fh(){return Kn()}function Kn(){return new mt((n=>n.toString()),((n,e)=>n.isEqual(e)))}var mE=new xe(q.comparator),bg=new ve(q.comparator);function Ne(...n){let e=bg;for(let t of n)e=e.add(t);return e}var Sg=new ve(K);function Rg(){return Sg}function Pg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:di(e)?"-0":e}}function Cg(n){return{integerValue:""+n}}var pn=class{constructor(){this._=void 0}};function kg(n,e,t){return n instanceof mn?(function(i,o){let a={fields:{[Eh]:{stringValue:wh},[vh]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Ua(o)&&(o=Ah(o)),o&&(a.fields[Th]=o),{mapValue:a}})(t,e):n instanceof gn?Uh(n,e):n instanceof _n?Bh(n,e):(function(i,o){let a=Dg(i,o),u=jl(a)+jl(i.Ae);return Do(a)&&Do(i.Ae)?Cg(u):Pg(i.serializer,u)})(n,e)}function Ng(n,e,t){return n instanceof gn?Uh(n,e):n instanceof _n?Bh(n,e):t}function Dg(n,e){return n instanceof nr?(function(r){return Do(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var mn=class extends pn{},gn=class extends pn{constructor(e){super(),this.elements=e}};function Uh(n,e){let t=qh(e);for(let r of n.elements)t.some((i=>$e(i,r)))||t.push(r);return{arrayValue:{values:t}}}var _n=class extends pn{constructor(e){super(),this.elements=e}};function Bh(n,e){let t=qh(e);for(let r of n.elements)t=t.filter((i=>!$e(i,r)));return{arrayValue:{values:t}}}var nr=class extends pn{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function jl(n){return te(n.integerValue||n.doubleValue)}function qh(n){return Ba(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var $o=class{constructor(e,t){this.field=e,this.transform=t}};function Og(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof gn&&i instanceof gn||r instanceof _n&&i instanceof _n?sn(r.elements,i.elements,$e):r instanceof nr&&i instanceof nr?$e(r.Ae,i.Ae):r instanceof mn&&i instanceof mn})(n.transform,e.transform)}var Wn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ai(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var rr=class{};function zh(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Go(n.key,Wn.none()):new ir(n.key,n.data,Wn.none());{let t=n.data,r=dt.empty(),i=new ve(Ve.comparator);for(let o of e.fields)if(!i.has(o)){let a=t.field(o);a===null&&o.length>1&&(o=o.popLast(),a=t.field(o)),a===null?r.delete(o):r.set(o,a),i=i.add(o)}return new yn(n.key,r,new Rt(i.toArray()),Wn.none())}}function xg(n,e,t){n instanceof ir?(function(i,o,a){let u=i.value.clone(),h=Gl(i.fieldTransforms,o,a.transformResults);u.setAll(h),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(n,e,t):n instanceof yn?(function(i,o,a){if(!ai(i.precondition,o))return void o.convertToUnknownDocument(a.version);let u=Gl(i.fieldTransforms,o,a.transformResults),h=o.data;h.setAll(jh(i)),h.setAll(u),o.convertToFoundDocument(a.version,h).setHasCommittedMutations()})(n,e,t):(function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function Qn(n,e,t,r){return n instanceof ir?(function(o,a,u,h){if(!ai(o.precondition,a))return u;let f=o.value.clone(),_=Hl(o.fieldTransforms,h,a);return f.setAll(_),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null})(n,e,t,r):n instanceof yn?(function(o,a,u,h){if(!ai(o.precondition,a))return u;let f=Hl(o.fieldTransforms,h,a),_=a.data;return _.setAll(jh(o)),_.setAll(f),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((y=>y.field)))})(n,e,t,r):(function(o,a,u){return ai(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u})(n,e,t)}function $l(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&sn(r,i,((o,a)=>Og(o,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ir=class extends rr{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},yn=class extends rr{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function jh(n){let e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}})),e}function Gl(n,e,t){let r=new Map;be(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let o=n[i],a=o.transform,u=e.data.field(o.field);r.set(o.field,Ng(a,u,t[i]))}return r}function Hl(n,e,t){let r=new Map;for(let i of n){let o=i.transform,a=t.data.field(i.field);r.set(i.field,kg(o,a,e))}return r}var Go=class extends rr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var Ho=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&xg(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Qn(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Qn(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Fh();return this.mutations.forEach((i=>{let o=e.get(i.key),a=o.overlayedDocument,u=this.applyToLocalView(a,o.mutatedFields);u=t.has(i.key)?null:u;let h=zh(a,u);h!==null&&r.set(i.key,h),a.isValidDocument()||a.convertToNoDocument(Z.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ne())}isEqual(e){return this.batchId===e.batchId&&sn(this.mutations,e.mutations,((t,r)=>$l(t,r)))&&sn(this.baseMutations,e.baseMutations,((t,r)=>$l(t,r)))}};var Ko=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}};var X,z;function Vg(n){if(n===void 0)return Pi("GRPC error has no .code"),C.UNKNOWN;switch(n){case X.OK:return C.OK;case X.CANCELLED:return C.CANCELLED;case X.UNKNOWN:return C.UNKNOWN;case X.DEADLINE_EXCEEDED:return C.DEADLINE_EXCEEDED;case X.RESOURCE_EXHAUSTED:return C.RESOURCE_EXHAUSTED;case X.INTERNAL:return C.INTERNAL;case X.UNAVAILABLE:return C.UNAVAILABLE;case X.UNAUTHENTICATED:return C.UNAUTHENTICATED;case X.INVALID_ARGUMENT:return C.INVALID_ARGUMENT;case X.NOT_FOUND:return C.NOT_FOUND;case X.ALREADY_EXISTS:return C.ALREADY_EXISTS;case X.PERMISSION_DENIED:return C.PERMISSION_DENIED;case X.FAILED_PRECONDITION:return C.FAILED_PRECONDITION;case X.ABORTED:return C.ABORTED;case X.OUT_OF_RANGE:return C.OUT_OF_RANGE;case X.UNIMPLEMENTED:return C.UNIMPLEMENTED;case X.DATA_LOSS:return C.DATA_LOSS;default:return j(39323,{code:n})}}(z=X||(X={}))[z.OK=0]="OK",z[z.CANCELLED=1]="CANCELLED",z[z.UNKNOWN=2]="UNKNOWN",z[z.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",z[z.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",z[z.NOT_FOUND=5]="NOT_FOUND",z[z.ALREADY_EXISTS=6]="ALREADY_EXISTS",z[z.PERMISSION_DENIED=7]="PERMISSION_DENIED",z[z.UNAUTHENTICATED=16]="UNAUTHENTICATED",z[z.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",z[z.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",z[z.ABORTED=10]="ABORTED",z[z.OUT_OF_RANGE=11]="OUT_OF_RANGE",z[z.UNIMPLEMENTED=12]="UNIMPLEMENTED",z[z.INTERNAL=13]="INTERNAL",z[z.UNAVAILABLE=14]="UNAVAILABLE",z[z.DATA_LOSS=15]="DATA_LOSS";var gE=new ti([4294967295,4294967295],0);var Wo=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Kl(n){return be(!!n,49232),Z.fromTimestamp((function(t){let r=ft(t);return new Se(r.seconds,r.nanos)})(n))}function Wl(n,e){let t=(function(i){return new _e(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Lg(n){let e=_e.fromString(n);return be(Bg(e),10190,{key:e.toString()}),e}function Mg(n){let e=Lg(n);return e.length===4?_e.emptyPath():Fg(e)}function Fg(n){return be(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Ug(n){let e=Mg(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){be(r===1,65062);let _=t.from[0];_.allDescendants?i=_.collectionId:e=e.child(_.collectionId)}let o=[];t.where&&(o=(function(y){let A=$h(y);return A instanceof pt&&Nh(A)?A.getFilters():[A]})(t.where));let a=[];t.orderBy&&(a=(function(y){return y.map((A=>(function(k){return new dn(Zt(k.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(A)))})(t.orderBy));let u=null;t.limit&&(u=(function(y){let A;return A=typeof y=="object"?y.value:y,Ma(A)?null:A})(t.limit));let h=null;t.startAt&&(h=(function(y){let A=!!y.before,P=y.values||[];return new hn(P,A)})(t.startAt));let f=null;return t.endAt&&(f=(function(y){let A=!y.before,P=y.values||[];return new hn(P,A)})(t.endAt)),_g(e,i,a,o,u,"F",h,f)}function $h(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Zt(t.unaryFilter.field);return le.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Zt(t.unaryFilter.field);return le.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Zt(t.unaryFilter.field);return le.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=Zt(t.unaryFilter.field);return le.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return j(61313);default:return j(60726)}})(n):n.fieldFilter!==void 0?(function(t){return le.create(Zt(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return j(58110);default:return j(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return pt.create(t.compositeFilter.filters.map((r=>$h(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return j(1026)}})(t.compositeFilter.op))})(n):j(30097,{filter:n})}function Zt(n){return Ve.fromServerFormat(n.fieldPath)}function Bg(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Qo=class{constructor(e){this.yt=e}};function qg(n){let e=Ug({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?zo(e,e.limit,"L"):e}var yi=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(te(e.integerValue));else if("doubleValue"in e){let r=te(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),di(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=ft(r)),t.xt("".concat(r.seconds||"")),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(on(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?Ch(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Ph(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):j(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){var a,u;let r=e.fields||{};this.Ft(t,53);let i=gi,o=((u=(a=r[i].arrayValue)==null?void 0:a.values)==null?void 0:u.length)||0;this.Ft(t,15),t.Mt(te(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),q.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};yi.Kt=new yi;var Jo=class{constructor(){this.Cn=new Yo}addToCollectionParentIndex(e,t){return this.Cn.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(Ot.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(Ot.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},Yo=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ve(_e.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ve(_e.comparator)).toArray()}};var _E=new Uint8Array(0);var Gh=41943040,ze=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};ze.DEFAULT_COLLECTION_PERCENTILE=10,ze.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ze.DEFAULT=new ze(Gh,ze.DEFAULT_COLLECTION_PERCENTILE,ze.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ze.DISABLED=new ze(-1,0,0);var sr=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var zg=1048576;var Xo=class{constructor(){this.changes=new mt((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Zo=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var ea=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&Qn(r.mutation,i,Rt.empty(),Se.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ne()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ne()){let i=Pt();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((o=>{let a=si();return o.forEach(((u,h)=>{a=a.insert(u,h.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){let r=Pt();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ne())))}populateOverlays(e,t,r){let i=[];return r.forEach((o=>{t.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((a,u)=>{t.set(a,u)}))}))}computeViews(e,t,r,i){let o=jo(),a=Kn(),u=(function(){return Kn()})();return t.forEach(((h,f)=>{let _=r.get(f.key);i.has(f.key)&&(_===void 0||_.mutation instanceof yn)?o=o.insert(f.key,f):_!==void 0?(a.set(f.key,_.mutation.getFieldMask()),Qn(_.mutation,f,_.mutation.getFieldMask(),Se.now())):a.set(f.key,Rt.empty())})),this.recalculateAndSaveOverlays(e,o).next((h=>(h.forEach(((f,_)=>a.set(f,_))),t.forEach(((f,_)=>{var y;return u.set(f,new Zo(_,(y=a.get(f))!=null?y:null))})),u)))}recalculateAndSaveOverlays(e,t){let r=Kn(),i=new xe(((a,u)=>a-u)),o=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(let u of a)u.keys().forEach((h=>{let f=t.get(h);if(f===null)return;let _=r.get(h)||Rt.empty();_=u.applyToLocalView(f,_),r.set(h,_);let y=(i.get(u.batchId)||Ne()).add(h);i=i.insert(u.batchId,y)}))})).next((()=>{let a=[],u=i.getReverseIterator();for(;u.hasNext();){let h=u.getNext(),f=h.key,_=h.value,y=Fh();_.forEach((A=>{if(!o.has(A)){let P=zh(t.get(A),r.get(A));P!==null&&y.set(A,P),o=o.add(A)}})),a.push(this.documentOverlayCache.saveOverlays(e,f,y))}return S.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(a){return q.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ig(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((o=>{let a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(Pt()),u=er,h=o;return a.next((f=>S.forEach(f,((_,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(_)?S.resolve():this.remoteDocumentCache.getEntry(e,_).next((A=>{h=h.insert(_,A)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,h,f,Ne()))).next((_=>({batchId:u,changes:Ag(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new q(t)).next((r=>{let i=si();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,a=si();return this.indexManager.getCollectionParents(e,o).next((u=>S.forEach(u,(h=>{let f=(function(y,A){return new fn(A,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next((_=>{_.forEach(((y,A)=>{a=a.insert(y,A)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i)))).next((a=>{o.forEach(((h,f)=>{let _=f.getKey();a.get(_)===null&&(a=a.insert(_,ln.newInvalidDocument(_)))}));let u=si();return a.forEach(((h,f)=>{let _=o.get(h);_!==void 0&&Qn(_.mutation,f,Rt.empty(),Se.now()),ja(t,f)&&(u=u.insert(h,f))})),u}))}};var ta=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return S.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Kl(i.createTime)}})(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:qg(i.bundledQuery),readTime:Kl(i.readTime)}})(t)),S.resolve()}};var na=class{constructor(){this.overlays=new xe(q.comparator),this.qr=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Pt();return S.forEach(t,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,o)=>{this.St(e,t,o)})),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=Pt(),o=t.length+1,a=new q(t.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){let h=u.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>r&&i.set(h.getKey(),h)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new xe(((f,_)=>f-_)),a=this.overlays.getIterator();for(;a.hasNext();){let f=a.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let _=o.get(f.largestBatchId);_===null&&(_=Pt(),o=o.insert(f.largestBatchId,_)),_.set(f.getKey(),f)}}let u=Pt(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,_)=>u.set(f,_))),!(u.size()>=i)););return S.resolve(u)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Ko(t,r));let o=this.qr.get(t);o===void 0&&(o=Ne(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}};var ra=class{constructor(){this.sessionToken=Ze.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var or=class{constructor(){this.Qr=new ve(ee.$r),this.Ur=new ve(ee.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new ee(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new ee(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){let t=new q(new _e([])),r=new ee(t,e),i=new ee(t,e+1),o=[];return this.Ur.forEachInRange([r,i],(a=>{this.Gr(a),o.push(a.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new q(new _e([])),r=new ee(t,e),i=new ee(t,e+1),o=Ne();return this.Ur.forEachInRange([r,i],(a=>{o=o.add(a.key)})),o}containsKey(e){let t=new ee(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ee=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return q.comparator(e.key,t.key)||K(e.Yr,t.Yr)}static Kr(e,t){return K(e.Yr,t.Yr)||q.comparator(e.key,t.key)}};var ia=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new ve(ee.$r)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new Ho(o,t,r,i);this.mutationQueue.push(a);for(let u of i)this.Zr=this.Zr.add(new ee(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return S.resolve(a)}lookupMutationBatch(e,t){return S.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?ng:this.tr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ee(t,0),i=new ee(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],(a=>{let u=this.Xr(a.Yr);o.push(u)})),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ve(K);return t.forEach((i=>{let o=new ee(i,0),a=new ee(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],(u=>{r=r.add(u.Yr)}))})),S.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;q.isDocumentKey(o)||(o=o.child(""));let a=new ee(new q(o),0),u=new ve(K);return this.Zr.forEachWhile((h=>{let f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(u=u.add(h.Yr)),!0)}),a),S.resolve(this.ti(u))}ti(e){let t=[];return e.forEach((r=>{let i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){be(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return S.forEach(t.mutations,(i=>{let o=new ee(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){let r=new ee(t,0),i=this.Zr.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var sa=class{constructor(e){this.ri=e,this.docs=(function(){return new xe(q.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():ln.newInvalidDocument(t))}getEntries(e,t){let r=jo();return t.forEach((i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ln.newInvalidDocument(i))})),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=jo(),a=t.path,u=new q(a.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){let{key:f,value:{document:_}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||eg(Zm(_),r)<=0||(i.has(_.key)||ja(t,_))&&(o=o.insert(_.key,_.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){j(9500)}ii(e,t){return S.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new oa(this)}getSize(e){return S.resolve(this.size)}},oa=class extends Xo{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),S.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var aa=class{constructor(e){this.persistence=e,this.si=new mt((t=>qa(t)),za),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.oi=0,this._i=new or,this.targetCount=0,this.ai=sr.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),S.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new sr(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Pr(t),S.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.si.forEach(((a,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),S.waitFor(o).next((()=>i))}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach((a=>{o.push(i.markPotentiallyOrphaned(e,a))})),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this._i.containsKey(t))}};var ca=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new hi(0),this.li=!1,this.li=!0,this.hi=new ra,this.referenceDelegate=e(this),this.Pi=new aa(this),this.indexManager=new Jo,this.remoteDocumentCache=(function(i){return new sa(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new Qo(t),this.Ii=new ta(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new na,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new ia(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){L("MemoryPersistence","Starting transaction:",e);let i=new ua(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((o=>this.referenceDelegate.di(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ai(e,t){return S.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}},ua=class extends Po{constructor(e){super(),this.currentSequenceNumber=e}},la=class n{constructor(e){this.persistence=e,this.Ri=new or,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw j(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),S.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.fi,(r=>{let i=q.fromPath(r);return this.gi(e,i).next((o=>{o||t.removeEntry(i,Z.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return S.or([()=>S.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}};var ha=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Ne(),i=Ne();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var da=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var fa=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return dl()?8:tg(ue())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ys(e,t).next((a=>{o.result=a})).next((()=>{if(!o.result)return this.ws(e,t,i,r).next((a=>{o.result=a}))})).next((()=>{if(o.result)return;let a=new da;return this.Ss(e,t,a).next((u=>{if(o.result=u,this.Vs)return this.bs(e,t,a,u.size)}))})).next((()=>o.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(jn()<=F.DEBUG&&L("QueryEngine","SDK will not create cache indexes for query:",$n(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),S.resolve()):(jn()<=F.DEBUG&&L("QueryEngine","Query:",$n(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(jn()<=F.DEBUG&&L("QueryEngine","The SDK decides to create cache indexes for query:",$n(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kt(t))):S.resolve())}ys(e,t){if(zl(t))return S.resolve(null);let r=kt(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=zo(t,null,"F"),r=kt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{let a=Ne(...o);return this.ps.getDocuments(e,a).next((u=>this.indexManager.getMinOffset(e,r).next((h=>{let f=this.Ds(t,u);return this.Cs(t,f,a,h.readTime)?this.ys(e,zo(t,null,"F")):this.vs(e,f,t,h)}))))})))))}ws(e,t,r,i){return zl(t)||i.isEqual(Z.min())?S.resolve(null):this.ps.getDocuments(e,r).next((o=>{let a=this.Ds(t,o);return this.Cs(t,a,r,i)?S.resolve(null):(jn()<=F.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$n(t)),this.vs(e,a,t,Xm(i,er)).next((u=>u)))}))}Ds(e,t){let r=new ve(Eg(e));return t.forEach(((i,o)=>{ja(e,o)&&(r=r.add(o))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return jn()<=F.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",$n(t)),this.ps.getDocumentsMatchingQuery(e,t,Ot.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((o=>(t.forEach((a=>{o=o.insert(a.key,a)})),o)))}};var jg="LocalStore";var pa=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new xe(K),this.xs=new mt((o=>qa(o)),za),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ea(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}};function $g(n,e,t,r){return new pa(n,e,t,r)}async function Gg(n,e){let t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{let a=[],u=[],h=Ne();for(let f of i){a.push(f.batchId);for(let _ of f.mutations)h=h.add(_.key)}for(let f of o){u.push(f.batchId);for(let _ of f.mutations)h=h.add(_.key)}return t.localDocuments.getDocuments(r,h).next((f=>({Ls:f,removedBatchIds:a,addedBatchIds:u})))}))}))}var Ii=class{constructor(){this.activeTargetIds=Rg()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var ma=class{constructor(){this.Mo=new Ii,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ii,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var ga=class{Oo(e){}shutdown(){}};var Ql="ConnectivityMonitor",wi=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){L(Ql,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){L(Ql,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var oi=null;function _a(){return oi===null?oi=(function(){return 268435456+Math.round(2147483648*Math.random())})():oi++,"0x"+oi.toString(16)}var _o="RestConnection",Hg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},ya=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(r,"/databases/").concat(i),this.Wo=this.databaseId.database===mi?"project_id=".concat(r):"project_id=".concat(r,"&database_id=").concat(i)}Go(e,t,r,i,o){let a=_a(),u=this.zo(e,t.toUriEncodedString());L(_o,"Sending RPC '".concat(e,"' ").concat(a,":"),u,r);let h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,i,o);let{host:f}=new URL(u),_=Ue(f);return this.Jo(e,u,h,r,_).then((y=>(L(_o,"Received RPC '".concat(e,"' ").concat(a,": "),y),y)),(y=>{throw Va(_o,"RPC '".concat(e,"' ").concat(a," failed with error: "),y,"url: ",u,"request:",r),y}))}Ho(e,t,r,i,o,a){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+In})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,o)=>e[o]=i)),r&&r.headers.forEach(((i,o)=>e[o]=i))}zo(e,t){let r=Hg[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(r)}terminate(){}};var Ia=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var ge="WebChannelConnection",wa=class extends ya{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let a=_a();return new Promise(((u,h)=>{let f=new uo;f.setWithCredentials(!0),f.listenOnce(lo.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case zn.NO_ERROR:let y=f.getResponseJson();L(ge,"XHR for RPC '".concat(e,"' ").concat(a," received:"),JSON.stringify(y)),u(y);break;case zn.TIMEOUT:L(ge,"RPC '".concat(e,"' ").concat(a," timed out")),h(new x(C.DEADLINE_EXCEEDED,"Request time out"));break;case zn.HTTP_ERROR:let A=f.getStatus();if(L(ge,"RPC '".concat(e,"' ").concat(a," failed with status:"),A,"response text:",f.getResponseText()),A>0){let P=f.getResponseJson();Array.isArray(P)&&(P=P[0]);let k=P==null?void 0:P.error;if(k&&k.status&&k.message){let O=(function(U){let B=U.toLowerCase().replace(/_/g,"-");return Object.values(C).indexOf(B)>=0?B:C.UNKNOWN})(k.status);h(new x(O,k.message))}else h(new x(C.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new x(C.UNAVAILABLE,"Connection failed."));break;default:j(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{L(ge,"RPC '".concat(e,"' ").concat(a," completed."))}}));let _=JSON.stringify(i);L(ge,"RPC '".concat(e,"' ").concat(a," sending request:"),i),f.send(t,"POST",_,r,15)}))}T_(e,t,r){let i=_a(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=po(),u=fo(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;let _=o.join("");L(ge,"Creating RPC '".concat(e,"' stream ").concat(i,": ").concat(_),h);let y=a.createWebChannel(_,h);this.I_(y);let A=!1,P=!1,k=new Ia({Yo:N=>{P?L(ge,"Not sending because RPC '".concat(e,"' stream ").concat(i," is closed:"),N):(A||(L(ge,"Opening RPC '".concat(e,"' stream ").concat(i," transport.")),y.open(),A=!0),L(ge,"RPC '".concat(e,"' stream ").concat(i," sending:"),N),y.send(N))},Zo:()=>y.close()}),O=(N,U,B)=>{N.listen(U,($=>{try{B($)}catch(G){setTimeout((()=>{throw G}),0)}}))};return O(y,Xt.EventType.OPEN,(()=>{P||(L(ge,"RPC '".concat(e,"' stream ").concat(i," transport opened.")),k.o_())})),O(y,Xt.EventType.CLOSE,(()=>{P||(P=!0,L(ge,"RPC '".concat(e,"' stream ").concat(i," transport closed")),k.a_(),this.E_(y))})),O(y,Xt.EventType.ERROR,(N=>{P||(P=!0,Va(ge,"RPC '".concat(e,"' stream ").concat(i," transport errored. Name:"),N.name,"Message:",N.message),k.a_(new x(C.UNAVAILABLE,"The operation could not be completed")))})),O(y,Xt.EventType.MESSAGE,(N=>{var U;if(!P){let B=N.data[0];be(!!B,16349);let $=B,G=($==null?void 0:$.error)||((U=$[0])==null?void 0:U.error);if(G){L(ge,"RPC '".concat(e,"' stream ").concat(i," received error:"),G);let ie=G.status,Q=(function(g){let E=X[g];if(E!==void 0)return Vg(E)})(ie),w=G.message;Q===void 0&&(Q=C.INTERNAL,w="Unknown error status: "+ie+" with message "+G.message),P=!0,k.a_(new x(Q,w)),y.close()}else L(ge,"RPC '".concat(e,"' stream ").concat(i," received:"),B),k.u_(B)}})),O(u,ho.STAT_EVENT,(N=>{N.stat===ri.PROXY?L(ge,"RPC '".concat(e,"' stream ").concat(i," detected buffering proxy")):N.stat===ri.NOPROXY&&L(ge,"RPC '".concat(e,"' stream ").concat(i," detected no buffering proxy"))})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}};function yo(){return typeof document<"u"?document:null}function Hh(n){return new Wo(n,!0)}var Ea=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&L("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(r," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var Ta=class{},va=class extends Ta{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new x(C.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Go(e,Wl(t,r),i,o,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new x(C.UNKNOWN,o.toString())}))}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Ho(e,Wl(t,r),i,a,u,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new x(C.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}},Aa=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(Pi(t),this.aa=!1):L("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Kh="RemoteStore",ba=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{Qh(this)&&(L(Kh,"Restarting streams for network reachability change."),await(async function(h){let f=Re(h);f.Ea.add(4),await $a(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Wh(f)})(this))}))})),this.Ra=new Aa(r,i)}};async function Wh(n){if(Qh(n))for(let e of n.da)await e(!0)}async function $a(n){for(let e of n.da)await e(!1)}function Qh(n){return Re(n).Ea.size===0}async function Kg(n,e){let t=Re(n);e?(t.Ea.delete(2),await Wh(t)):e||(t.Ea.add(2),await $a(t),t.Ra.set("Unknown"))}var Sa=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ct,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let a=Date.now()+r,u=new n(e,t,a,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new x(C.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var Ra=class{constructor(){this.queries=Jl(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=Re(t),o=i.queries;i.queries=Jl(),o.forEach(((a,u)=>{for(let h of u.Sa)h.onError(r)}))})(this,new x(C.ABORTED,"Firestore shutting down"))}};function Jl(){return new mt((n=>Lh(n)),Vh)}function Wg(n){n.Ca.forEach((e=>{e.next()}))}var Yl,Xl;(Xl=Yl||(Yl={})).Ma="default",Xl.Cache="cache";var Qg="SyncEngine";var Pa=class{constructor(e,t,r,i,o,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new mt((u=>Lh(u)),Vh),this.Iu=new Map,this.Eu=new Set,this.du=new xe(q.comparator),this.Au=new Map,this.Ru=new or,this.Vu={},this.mu=new Map,this.fu=sr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function Zl(n,e,t){let r=Re(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach(((o,a)=>{let u=a.view.va(e);u.snapshot&&i.push(u.snapshot)})),(function(a,u){let h=Re(a);h.onlineState=u;let f=!1;h.queries.forEach(((_,y)=>{for(let A of y.Sa)A.va(u)&&(f=!0)})),f&&Wg(h)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Jg(n,e,t){let r=Re(n),i=[],o=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,h)=>{a.push(r.pu(h,e,t).then((f=>{var _;if((f||t)&&r.isPrimaryClient){let y=f?!f.fromCache:(_=t==null?void 0:t.targetChanges.get(h.targetId))==null?void 0:_.current;r.sharedClientState.updateQueryState(h.targetId,y?"current":"not-current")}if(f){i.push(f);let y=ha.As(h.targetId,f);o.push(y)}})))})),await Promise.all(a),r.Pu.H_(i),await(async function(h,f){let _=Re(h);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>S.forEach(f,(A=>S.forEach(A.Es,(P=>_.persistence.referenceDelegate.addReference(y,A.targetId,P))).next((()=>S.forEach(A.ds,(P=>_.persistence.referenceDelegate.removeReference(y,A.targetId,P)))))))))}catch(y){if(!oh(y))throw y;L(jg,"Failed to update sequence numbers: "+y)}for(let y of f){let A=y.targetId;if(!y.fromCache){let P=_.Ms.get(A),k=P.snapshotVersion,O=P.withLastLimboFreeSnapshotVersion(k);_.Ms=_.Ms.insert(A,O)}}})(r.localStore,o))}async function Yg(n,e){let t=Re(n);if(!t.currentUser.isEqual(e)){L(Qg,"User change. New user:",e.toKey());let r=await Gg(t.localStore,e);t.currentUser=e,(function(o,a){o.mu.forEach((u=>{u.forEach((h=>{h.reject(new x(C.CANCELLED,a))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Jg(t,r.Ls)}}var Ei=class{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return $g(this.persistence,new fa,e.initialUser,this.serializer)}Cu(e){return new ca(la.mi,this.serializer)}Du(e){return new ma}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}};Ei.provider={build:()=>new Ei};var Ti=class{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Zl(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Yg.bind(null,this.syncEngine),await Kg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Ra})()}createDatastore(e){let t=Hh(e.databaseInfo.databaseId),r=(function(o){return new wa(o)})(e.databaseInfo);return(function(o,a,u,h){return new va(o,a,u,h)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,o,a,u){return new ba(r,i,o,a,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>Zl(this.syncEngine,t,0)),(function(){return wi.v()?new wi:new ga})())}createSyncEngine(e,t){return(function(i,o,a,u,h,f,_){let y=new Pa(i,o,a,u,h,f);return _&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(i){let o=Re(i);L(Kh,"RemoteStore shutting down."),o.Ea.add(5),await $a(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}};Ti.provider={build:()=>new Ti};function Xg(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var eh=new Map;var Jh="firestore.googleapis.com",th=!0,vi=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new x(C.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Jh,this.ssl=th}else this.host=e.host,this.ssl=(t=e.ssl)!=null?t:th;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Gh;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<zg)throw new x(C.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Wm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xg((r=e.experimentalLongPollingOptions)!=null?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new x(C.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(o.timeoutSeconds," (must not be NaN)"));if(o.timeoutSeconds<5)throw new x(C.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(o.timeoutSeconds," (minimum allowed value is 5)"));if(o.timeoutSeconds>30)throw new x(C.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(o.timeoutSeconds," (maximum allowed value is 30)"))}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ai=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vi({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new x(C.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new x(C.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vi(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Io;switch(r.type){case"firstParty":return new vo(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new x(C.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=eh.get(t);r&&(L("ComponentProvider","Removing Datastore"),eh.delete(t),r.terminate())})(this),Promise.resolve()}};function Zg(n,e,t,r={}){var f;n=Ym(n,Ai);let i=Ue(e),o=n._getSettings(),a=de(V({},o),{emulatorOptions:n._getEmulatorOptions()}),u="".concat(e,":").concat(t);i&&(Kt("https://".concat(u)),Wt("Firestore",!0)),o.host!==Jh&&o.host!==u&&Va("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let h=de(V({},o),{host:u,ssl:i,emulatorOptions:r});if(!De(h,a)&&(n._setSettings(h),r.mockUserToken)){let _,y;if(typeof r.mockUserToken=="string")_=r.mockUserToken,y=fe.MOCK_USER;else{_=Jr(r.mockUserToken,(f=n._app)==null?void 0:f.options.projectId);let A=r.mockUserToken.sub||r.mockUserToken.user_id;if(!A)throw new x(C.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new fe(A)}n._authCredentials=new wo(new ci(_,y))}}var Ca=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Nt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ka(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ar(t,n._jsonSchema))return new n(e,r||null,new q(_e.fromString(t.referencePath)))}};Nt._jsonSchemaVersion="firestore/documentReference/1.0",Nt._jsonSchema={type:ne("string",Nt._jsonSchemaVersion),referencePath:ne("string")};var ka=class n extends Ca{constructor(e,t,r){super(e,t,yg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var nh="AsyncQueue",bi=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ea(this,"async_queue_retry"),this._c=()=>{let r=yo();r&&L(nh,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=yo();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=yo();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));let t=new Ct;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!oh(e))throw e;L(nh,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){let t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Pi("INTERNAL UNHANDLED ERROR: ",rh(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=Sa.createAndSchedule(this,e,t,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&j(47125,{Pc:rh(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function rh(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),e}var Na=class extends Ai{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new bi,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new bi(e),this._firestoreClient=void 0,await e}}};function Yh(n,e){let t=typeof n=="object"?n:Ye(),r=typeof n=="string"?n:e||mi,i=Oe(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=Qr("firestore");o&&Zg(i,...o)}return i}var Jn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ze.fromBase64String(e))}catch(t){throw new x(C.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ar(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Jn._jsonSchemaVersion="firestore/bytes/1.0",Jn._jsonSchema={type:ne("string",Jn._jsonSchemaVersion),bytes:ne("string")};var Si=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new x(C.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ve(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Da=class{constructor(e){this._methodName=e}};var Yn=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new x(C.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new x(C.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return K(this._lat,e._lat)||K(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(ar(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Yn._jsonSchemaVersion="firestore/geoPoint/1.0",Yn._jsonSchema={type:ne("string",Yn._jsonSchemaVersion),latitude:ne("number"),longitude:ne("number")};var Xn=class n{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ar(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new n(e.vectorValues);throw new x(C.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Xn._jsonSchemaVersion="firestore/vectorValue/1.0",Xn._jsonSchema={type:ne("string",Xn._jsonSchemaVersion),vectorValues:ne("object")};var Oa=class n extends Da{_toFieldTransform(e){return new $o(e.path,new mn)}isEqual(e){return e instanceof n}};var e_=new RegExp("[~\\*/\\[\\]]");function t_(n,e,t){if(e.search(e_)>=0)throw ih("Invalid field path (".concat(e,"). Paths must not contain '~', '*', '/', '[', or ']'"),n,!1,void 0,t);try{return new Si(...e.split("."))._internalPath}catch(r){throw ih("Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),n,!1,void 0,t)}}function ih(n,e,t,r,i){let o=r&&!r.isEmpty(),a=i!==void 0,u="Function ".concat(e,"() called with invalid data");t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||a)&&(h+=" (found",o&&(h+=" in field ".concat(r)),a&&(h+=" in document ".concat(i)),h+=")"),new x(C.INVALID_ARGUMENT,u+n+h)}var Ri=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new xa(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Xh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},xa=class extends Ri{data(){return super.data()}};function Xh(n,e){return typeof e=="string"?t_(n,e):e instanceof Si?e._internalPath:e._delegate._internalPath}var tn=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},nn=class n extends Ri{constructor(e,t,r,i,o,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new rn(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Xh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new x(C.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};nn._jsonSchemaVersion="firestore/documentSnapshot/1.0",nn._jsonSchema={type:ne("string",nn._jsonSchemaVersion),bundleSource:ne("string","DocumentSnapshot"),bundleName:ne("string"),bundle:ne("string")};var rn=class extends nn{data(e={}){return super.data(e)}},Zn=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new tn(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new rn(this._firestore,this._userDataWriter,r.key,r,new tn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new x(C.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((u=>{let h=new rn(i._firestore,i._userDataWriter,u.doc.key,u.doc,new tn(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{let h=new rn(i._firestore,i._userDataWriter,u.doc.key,u.doc,new tn(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter),f=-1,_=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),_=a.indexOf(u.doc.key)),{type:n_(u.type),doc:h,oldIndex:f,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new x(C.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bo.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function n_(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return j(61501,{type:n})}}Zn._jsonSchemaVersion="firestore/querySnapshot/1.0",Zn._jsonSchema={type:ne("string",Zn._jsonSchemaVersion),bundleSource:ne("string","QuerySnapshot"),bundleName:ne("string"),bundle:ne("string")};function Zh(){return new Oa("serverTimestamp")}(function(e,t=!0){(function(i){In=i})(ke),Ee(new ae("firestore",((r,{instanceIdentifier:i,options:o})=>{let a=r.getProvider("app").getImmediate(),u=new Na(new Eo(r.getProvider("auth-internal")),new Ao(a,r.getProvider("app-check-internal")),(function(f,_){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new x(C.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ko(f.options.projectId,_)})(a,i),a);return o=V({useFetchStreams:t},o),u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),Y(Nl,Dl,e),Y(Nl,Dl,"esm2020")})();function yd(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Id=yd,wd=new Ce("auth","Firebase",yd());var Vi=new Be("@firebase/auth");function r_(n,...e){Vi.logLevel<=F.WARN&&Vi.warn("Auth (".concat(ke,"): ").concat(n),...e)}function ki(n,...e){Vi.logLevel<=F.ERROR&&Vi.error("Auth (".concat(ke,"): ").concat(n),...e)}function Le(n,...e){throw mc(n,...e)}function He(n,...e){return mc(n,...e)}function Ed(n,e,t){let r=de(V({},Id()),{[e]:t});return new Ce("auth","Firebase",r).create(e,{appName:n.name})}function yt(n){return Ed(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mc(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return wd.create(n,...e)}function D(n,e,...t){if(!n)throw mc(e,...t)}function Ge(n){let e="INTERNAL ASSERTION FAILED: "+n;throw ki(e),new Error(e)}function tt(n,e){n||Ge(e)}function Ja(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function i_(){return ed()==="http:"||ed()==="https:"}function ed(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}function s_(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(i_()||ul()||"connection"in navigator)?navigator.onLine:!0}function o_(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var xt=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,tt(t>e,"Short delay should be less than long delay!"),this.isMobile=al()||ll()}get(){return s_()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function gc(n,e){tt(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?"".concat(t).concat(e.startsWith("/")?e.slice(1):e):t}var Li=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ge("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ge("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ge("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var a_={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var c_=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],u_=new xt(3e4,6e4);function he(n,e){return n.tenantId&&!e.tenantId?de(V({},e),{tenantId:n.tenantId}):e}async function ye(n,e,t,r,i={}){return Td(n,i,async()=>{let o={},a={};r&&(e==="GET"?a=r:o={body:JSON.stringify(r)});let u=Qt(V({key:n.config.apiKey},a)).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);let f=V({method:e,headers:h},o);return cl()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Ue(n.emulatorConfig.host)&&(f.credentials="include"),Li.fetch()(await vd(n,n.config.apiHost,t,u),f)})}async function Td(n,e,t){n._canInitEmulator=!1;let r=V(V({},a_),e);try{let i=new Ya(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let a=await o.json();if("needConfirmation"in a)throw ur(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{let u=o.ok?a.errorMessage:a.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw ur(n,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw ur(n,"email-already-in-use",a);if(h==="USER_DISABLED")throw ur(n,"user-disabled",a);let _=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Ed(n,_,f);Le(n,_)}}catch(i){if(i instanceof oe)throw i;Le(n,"network-request-failed",{message:String(i)})}}async function Bt(n,e,t,r,i={}){let o=await ye(n,e,t,r,i);return"mfaPendingCredential"in o&&Le(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function vd(n,e,t,r){let i="".concat(e).concat(t,"?").concat(r),o=n,a=o.config.emulator?gc(n.config,i):"".concat(n.config.apiScheme,"://").concat(i);return c_.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}function l_(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Ya=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(He(this.auth,"network-request-failed")),u_.get())})}};function ur(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=He(n,e,r);return i.customData._tokenResponse=t,i}function td(n){return n!==void 0&&n.enterprise!==void 0}var Mi=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return l_(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};async function Ad(n,e){return ye(n,"GET","/v2/recaptchaConfig",he(n,e))}async function h_(n,e){return ye(n,"POST","/v1/accounts:delete",e)}async function Fi(n,e){return ye(n,"POST","/v1/accounts:lookup",e)}function lr(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}async function bd(n,e=!1){let t=me(n),r=await t.getIdToken(e),i=_c(r);D(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:lr(Ga(i.auth_time)),issuedAtTime:lr(Ga(i.iat)),expirationTime:lr(Ga(i.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Ga(n){return Number(n)*1e3}function _c(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ki("JWT malformed, contained fewer than 3 sections"),null;try{let i=Kr(t);return i?JSON.parse(i):(ki("Failed to decode base64 JWT payload"),null)}catch(i){return ki("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function nd(n){let e=_c(n);return D(e,"internal-error"),D(typeof e.exp<"u","internal-error"),D(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function pr(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof oe&&d_(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function d_({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Xa=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!=null?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var mr=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=lr(this.lastLoginAt),this.creationTime=lr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Ui(n){var y;let e=n.auth,t=await n.getIdToken(),r=await pr(n,Fi(e,{idToken:t}));D(r==null?void 0:r.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let o=(y=i.providerUserInfo)!=null&&y.length?Rd(i.providerUserInfo):[],a=f_(n.providerData,o),u=n.isAnonymous,h=!(n.email&&i.passwordHash)&&!(a!=null&&a.length),f=u?h:!1,_={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new mr(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(n,_)}async function Sd(n){let e=me(n);await Ui(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function f_(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Rd(n){return n.map(r=>{var i=r,{providerId:e}=i,t=$r(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function p_(n,e){let t=await Td(n,{},async()=>{let r=Qt({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,a=await vd(n,i,"/v1/token","key=".concat(o)),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";let h={method:"POST",headers:u,body:r};return n.emulatorConfig&&Ue(n.emulatorConfig.host)&&(h.credentials="include"),Li.fetch()(a,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function m_(n,e){return ye(n,"POST","/v2/accounts:revokeToken",he(n,e))}var hr=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){D(e.idToken,"internal-error"),D(typeof e.idToken<"u","internal-error"),D(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nd(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){D(e.length!==0,"internal-error");let t=nd(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(D(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:o}=await p_(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,a=new n;return r&&(D(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(D(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),o&&(D(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Ge("not implemented")}};function gt(n,e){D(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var _t=class n{constructor(o){var a=o,{uid:e,auth:t,stsTokenManager:r}=a,i=$r(a,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xa(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new mr(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await pr(this,this.stsTokenManager.getToken(this.auth,e));return D(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return bd(this,e)}reload(){return Sd(this)}_assign(e){this!==e&&(D(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>V({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(de(V({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){D(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Ui(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Te(this.auth.app))return Promise.reject(yt(this.auth));let e=await this.getIdToken();return await pr(this,h_(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return de(V({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>V({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var B,$,G,ie,Q,w,p,g;let r=(B=t.displayName)!=null?B:void 0,i=($=t.email)!=null?$:void 0,o=(G=t.phoneNumber)!=null?G:void 0,a=(ie=t.photoURL)!=null?ie:void 0,u=(Q=t.tenantId)!=null?Q:void 0,h=(w=t._redirectEventId)!=null?w:void 0,f=(p=t.createdAt)!=null?p:void 0,_=(g=t.lastLoginAt)!=null?g:void 0,{uid:y,emailVerified:A,isAnonymous:P,providerData:k,stsTokenManager:O}=t;D(y&&O,e,"internal-error");let N=hr.fromJSON(this.name,O);D(typeof y=="string",e,"internal-error"),gt(r,e.name),gt(i,e.name),D(typeof A=="boolean",e,"internal-error"),D(typeof P=="boolean",e,"internal-error"),gt(o,e.name),gt(a,e.name),gt(u,e.name),gt(h,e.name),gt(f,e.name),gt(_,e.name);let U=new n({uid:y,auth:e,email:i,emailVerified:A,displayName:r,isAnonymous:P,photoURL:a,phoneNumber:o,tenantId:u,stsTokenManager:N,createdAt:f,lastLoginAt:_});return k&&Array.isArray(k)&&(U.providerData=k.map(E=>V({},E))),h&&(U._redirectEventId=h),U}static async _fromIdTokenResponse(e,t,r=!1){let i=new hr;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ui(o),o}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];D(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?Rd(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),u=new hr;u.updateFromIdToken(r);let h=new n({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new mr(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}};var rd=new Map;function et(n){tt(n instanceof Function,"Expected a class definition");let e=rd.get(n);return e?(tt(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,rd.set(n,e),e)}var Bi=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};Bi.type="NONE";var Za=Bi;function Ni(n,e,t){return"firebase:".concat(n,":").concat(e,":").concat(t)}var qi=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Ni(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ni("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await Fi(this.auth,{idToken:e}).catch(()=>{});return t?_t._fromGetAccountInfoResponse(this.auth,t,e):null}return _t._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(et(Za),e,r);let i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f),o=i[0]||et(Za),a=Ni(r,e.config.apiKey,e.name),u=null;for(let f of t)try{let _=await f._get(a);if(_){let y;if(typeof _=="string"){let A=await Fi(e,{idToken:_}).catch(()=>{});if(!A)break;y=await _t._fromGetAccountInfoResponse(e,A,_)}else y=_t._fromJSON(e,_);f!==o&&(u=y),o=f;break}}catch(_){}let h=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new n(o,e,r):(o=h[0],u&&await o._set(a,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(a)}catch(_){}})),new n(o,e,r))}};function id(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Nd(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Pd(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Od(e))return"Blackberry";if(xd(e))return"Webos";if(Cd(e))return"Safari";if((e.includes("chrome/")||kd(e))&&!e.includes("edge/"))return"Chrome";if(Dd(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Pd(n=ue()){return/firefox\//i.test(n)}function Cd(n=ue()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kd(n=ue()){return/crios\//i.test(n)}function Nd(n=ue()){return/iemobile/i.test(n)}function Dd(n=ue()){return/android/i.test(n)}function Od(n=ue()){return/blackberry/i.test(n)}function xd(n=ue()){return/webos/i.test(n)}function yc(n=ue()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function g_(n=ue()){var e;return yc(n)&&!!((e=window.navigator)!=null&&e.standalone)}function __(){return hl()&&document.documentMode===10}function Vd(n=ue()){return yc(n)||Dd(n)||xd(n)||Od(n)||/windows phone/i.test(n)||Nd(n)}function Ld(n,e=[]){let t;switch(n){case"Browser":t=id(ue());break;case"Worker":t="".concat(id(ue()),"-").concat(n);break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return"".concat(t,"/JsCore/").concat(ke,"/").concat(r)}var ec=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((a,u)=>{try{let h=e(o);a(h)}catch(h){u(h)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch(o){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}};async function y_(n,e={}){return ye(n,"GET","/v2/passwordPolicy",he(n,e))}var I_=6,tc=class{constructor(e){var r,i,o,a;let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=t.minPasswordLength)!=null?r:I_,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))!=null?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!=null?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,i,o,a,u,h;let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=(r=t.meetsMinPasswordLength)!=null?r:!0),t.isValid&&(t.isValid=(i=t.meetsMaxPasswordLength)!=null?i:!0),t.isValid&&(t.isValid=(o=t.containsLowercaseLetter)!=null?o:!0),t.isValid&&(t.isValid=(a=t.containsUppercaseLetter)!=null?a:!0),t.isValid&&(t.isValid=(u=t.containsNumericCharacter)!=null?u:!0),t.isValid&&(t.isValid=(h=t.containsNonAlphanumericCharacter)!=null?h:!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var nc=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zi(this),this.idTokenSubscription=new zi(this),this.beforeStateQueue=new ec(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wd,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=et(t)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await qi.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(a){}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Fi(this,{idToken:e}),r=await _t._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Te(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let a=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=r==null?void 0:r._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===u)&&(h!=null&&h.user)&&(r=h.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return D(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(r){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ui(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=o_()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Te(this.app))return Promise.reject(yt(this));let t=e?me(e):null;return t&&D(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&D(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Te(this.app)?Promise.reject(yt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Te(this.app)?Promise.reject(yt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(et(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await y_(this),t=new tc(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ce("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await m_(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&et(e)||this._popupRedirectResolver;D(t,this,"argument-error"),this.redirectPersistenceManager=await qi.create(this,[et(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=(r=(t=this.currentUser)==null?void 0:t.uid)!=null?r:null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),a=!1,u=this._isInitialized?Promise.resolve():this._initializationPromise;if(D(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof t=="function"){let h=e.addObserver(t,r,i);return()=>{a=!0,h()}}else{let h=e.addObserver(t);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return D(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ld(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Te(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&r_("Error while retrieving App Check token: ".concat(e.error)),e==null?void 0:e.token}};function It(n){return me(n)}var zi=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=pl(t=>this.observer=t)}get next(){return D(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var os={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function w_(n){os=n}function Md(n){return os.loadJS(n)}function E_(){return os.recaptchaEnterpriseScript}function T_(){return os.gapiScript}function Fd(n){return"__".concat(n).concat(Math.floor(Math.random()*1e6))}var rc=class{constructor(){this.enterprise=new ic}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},ic=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var v_="recaptcha-enterprise",dr="NO_RECAPTCHA",ji=class{constructor(e){this.type=v_,this.auth=It(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,u)=>{Ad(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{let f=new Mi(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,a(f.siteKey)}}).catch(h=>{u(h)})})}function i(o,a,u){let h=window.grecaptcha;td(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{a(f)}).catch(()=>{a(dr)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new rc().execute("siteKey",{action:"verify"}):new Promise((o,a)=>{r(this.auth).then(u=>{if(!t&&td(window.grecaptcha))i(u,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let h=E_();h.length!==0&&(h+=u),Md(h).then(()=>{i(u,o,a)}).catch(f=>{a(f)})}}).catch(u=>{a(u)})})}};async function cr(n,e,t,r=!1,i=!1){let o=new ji(n),a;if(i)a=dr;else try{a=await o.verify(t)}catch(h){a=await o.verify(t,!0)}let u=V({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){let h=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){let h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function fr(n,e,t,r,i){var o,a;if(i==="EMAIL_PASSWORD_PROVIDER")if((o=n._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let u=await cr(n,e,t,t==="getOobCode");return r(n,u)}else return r(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log("".concat(t," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));let h=await cr(n,e,t,t==="getOobCode");return r(n,h)}else return Promise.reject(u)});else if(i==="PHONE_PROVIDER")if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("PHONE_PROVIDER")){let u=await cr(n,e,t);return r(n,u).catch(async h=>{var f;if(((f=n._getRecaptchaConfig())==null?void 0:f.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(h.code==="auth/missing-recaptcha-token"||h.code==="auth/invalid-app-credential")){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(t," flow."));let _=await cr(n,e,t,!1,!0);return r(n,_)}return Promise.reject(h)})}else{let u=await cr(n,e,t,!1,!0);return r(n,u)}else return Promise.reject(i+" provider is not supported.")}async function A_(n){let e=It(n),t=await Ad(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Mi(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new ji(e).verify()}function Ud(n,e){let t=Oe(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(De(o,e!=null?e:{}))return i;Le(i,"already-initialized")}return t.initialize({options:e})}function b_(n,e){let t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(et);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Bd(n,e,t){let r=It(n);D(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!(t!=null&&t.disableWarnings),o=qd(e),{host:a,port:u}=S_(e),h=u===null?"":":".concat(u),f={url:"".concat(o,"//").concat(a).concat(h,"/")},_=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){D(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),D(De(f,r.config.emulator)&&De(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,Ue(a)?(Kt("".concat(o,"//").concat(a).concat(h)),Wt("Auth",!0)):i||R_()}function qd(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function S_(n){let e=qd(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:sd(r.substr(o.length+1))}}else{let[o,a]=r.split(":");return{host:o,port:sd(a)}}}function sd(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function R_(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Vt=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ge("not implemented")}_getIdTokenResponse(e){return Ge("not implemented")}_linkToIdToken(e,t){return Ge("not implemented")}_getReauthenticationResolver(e){return Ge("not implemented")}};async function P_(n,e){return ye(n,"POST","/v1/accounts:signUp",e)}async function C_(n,e){return Bt(n,"POST","/v1/accounts:signInWithPassword",he(n,e))}async function k_(n,e){return Bt(n,"POST","/v1/accounts:signInWithEmailLink",he(n,e))}async function N_(n,e){return Bt(n,"POST","/v1/accounts:signInWithEmailLink",he(n,e))}var gr=class n extends Vt{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fr(e,t,"signInWithPassword",C_,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return k_(e,{email:this._email,oobCode:this._password});default:Le(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fr(e,r,"signUpPassword",P_,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return N_(e,{idToken:t,email:this._email,oobCode:this._password});default:Le(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function wn(n,e){return Bt(n,"POST","/v1/accounts:signInWithIdp",he(n,e))}var D_="http://localhost",Lt=class n extends Vt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Le("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let u=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=u,o=$r(u,["providerId","signInMethod"]);if(!r||!i)return null;let a=new n(r,i);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){let t=this.buildRequest();return wn(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,wn(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,wn(e,t)}buildRequest(){let e={requestUri:D_,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Qt(t)}return e}};async function od(n,e){return ye(n,"POST","/v1/accounts:sendVerificationCode",he(n,e))}async function O_(n,e){return Bt(n,"POST","/v1/accounts:signInWithPhoneNumber",he(n,e))}async function x_(n,e){let t=await Bt(n,"POST","/v1/accounts:signInWithPhoneNumber",he(n,e));if(t.temporaryProof)throw ur(n,"account-exists-with-different-credential",t);return t}var V_={USER_NOT_FOUND:"user-not-found"};async function L_(n,e){let t=de(V({},e),{operation:"REAUTH"});return Bt(n,"POST","/v1/accounts:signInWithPhoneNumber",he(n,t),V_)}var _r=class n extends Vt{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new n({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new n({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return O_(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return x_(e,V({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return L_(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));let{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:o}=e;return!r&&!t&&!i&&!o?null:new n({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:o})}};function M_(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function F_(n){let e=Jt(Yt(n)).link,t=e?Jt(Yt(e)).deep_link_id:null,r=Jt(Yt(n)).deep_link_id;return(r?Jt(Yt(r)).link:null)||r||t||e||n}var $i=class n{constructor(e){var a,u,h,f,_,y;let t=Jt(Yt(e)),r=(a=t.apiKey)!=null?a:null,i=(u=t.oobCode)!=null?u:null,o=M_((h=t.mode)!=null?h:null);D(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=(f=t.continueUrl)!=null?f:null,this.languageCode=(_=t.lang)!=null?_:null,this.tenantId=(y=t.tenantId)!=null?y:null}static parseLink(e){let t=F_(e);try{return new n(t)}catch(r){return null}}};var Mt=class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(e,t){return gr._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let r=$i.parseLink(t);return D(r,"argument-error"),gr._fromEmailAndCode(e,r.code,r.tenantId)}};Mt.PROVIDER_ID="password";Mt.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Mt.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Gi=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Ft=class extends Gi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var yr=class n extends Ft{constructor(){super("facebook.com")}static credential(e){return Lt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return n.credentialFromTaggedObject(e)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return n.credential(e.oauthAccessToken)}catch(t){return null}}};yr.FACEBOOK_SIGN_IN_METHOD="facebook.com";yr.PROVIDER_ID="facebook.com";var Ir=class n extends Ft{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Lt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return n.credentialFromTaggedObject(e)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return n.credential(t,r)}catch(i){return null}}};Ir.GOOGLE_SIGN_IN_METHOD="google.com";Ir.PROVIDER_ID="google.com";var wr=class n extends Ft{constructor(){super("github.com")}static credential(e){return Lt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return n.credentialFromTaggedObject(e)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return n.credential(e.oauthAccessToken)}catch(t){return null}}};wr.GITHUB_SIGN_IN_METHOD="github.com";wr.PROVIDER_ID="github.com";var Er=class n extends Ft{constructor(){super("twitter.com")}static credential(e,t){return Lt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return n.credentialFromTaggedObject(e)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return n.credential(t,r)}catch(i){return null}}};Er.TWITTER_SIGN_IN_METHOD="twitter.com";Er.PROVIDER_ID="twitter.com";var Tr=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let o=await _t._fromIdTokenResponse(e,r,i),a=ad(r);return new n({user:o,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=ad(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function ad(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var sc=class n extends oe{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!=null?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function zd(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?sc._fromErrorAndOperation(n,o,e,r):o})}async function U_(n,e,t=!1){let r=await pr(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Tr._forOperation(n,"link",r)}async function B_(n,e,t=!1){let{auth:r}=n;if(Te(r.app))return Promise.reject(yt(r));let i="reauthenticate";try{let o=await pr(n,zd(r,i,e,n),t);D(o.idToken,r,"internal-error");let a=_c(o.idToken);D(a,r,"internal-error");let{sub:u}=a;return D(n.uid===u,r,"user-mismatch"),Tr._forOperation(n,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Le(r,"user-mismatch"),o}}async function jd(n,e,t=!1){if(Te(n.app))return Promise.reject(yt(n));let r="signIn",i=await zd(n,r,e),o=await Tr._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function $d(n,e){return jd(It(n),e)}async function q_(n){let e=It(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function Ic(n,e,t){return Te(n.app)?Promise.reject(yt(n)):$d(me(n),Mt.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&q_(n),r})}function Gd(n,e,t,r){return me(n).onIdTokenChanged(e,t,r)}function Hd(n,e,t){return me(n).beforeAuthStateChanged(e,t)}function wc(n,e,t,r){return me(n).onAuthStateChanged(e,t,r)}function cd(n,e){return ye(n,"POST","/v2/accounts/mfaEnrollment:start",he(n,e))}function z_(n,e){return ye(n,"POST","/v2/accounts/mfaEnrollment:finalize",he(n,e))}function j_(n,e){return ye(n,"POST","/v2/accounts/mfaEnrollment:start",he(n,e))}function $_(n,e){return ye(n,"POST","/v2/accounts/mfaEnrollment:finalize",he(n,e))}var Hi="__sak";var Ki=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Hi,"1"),this.storage.removeItem(Hi),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var G_=1e3,H_=10,Wi=class extends Ki{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Vd(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,u,h)=>{this.notifyListeners(a,h)});return}let r=e.key;t?this.detachListener():this.stopPolling();let i=()=>{let a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);__()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,H_):i()}notifyListeners(e,t){this.localCache[e]=t;let r=this.listeners[e];if(r)for(let i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},G_)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}};Wi.type="LOCAL";var Kd=Wi;var K_=1e3;function Ha(n){var r,i;let e=n.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),t=RegExp("".concat(e,"=([^;]+)"));return(i=(r=document.cookie.match(t))==null?void 0:r[1])!=null?i:null}function Ka(n){let e=window.location.protocol==="http:";return"".concat(e?"__dev_":"__HOST-","FIREBASE_").concat(n.split(":")[3])}var oc=class{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(typeof window===void 0)return e;let t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return typeof isSecureContext=="boolean"&&!isSecureContext||typeof navigator>"u"||typeof document>"u"?!1:(e=navigator.cookieEnabled)!=null?e:!0}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;let t=Ka(e);if(window.cookieStore){let r=await window.cookieStore.get(t);return r==null?void 0:r.value}return Ha(t)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;let r=Ka(e);document.cookie="".concat(r,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;let r=Ka(e);if(window.cookieStore){let u=(f=>{let _=f.changed.find(A=>A.name===r);_&&t(_.value),f.deleted.find(A=>A.name===r)&&t(null)}),h=()=>window.cookieStore.removeEventListener("change",u);return this.listenerUnsubscribes.set(t,h),window.cookieStore.addEventListener("change",u)}let i=Ha(r),o=setInterval(()=>{let u=Ha(r);u!==i&&(t(u),i=u)},K_),a=()=>clearInterval(o);this.listenerUnsubscribes.set(t,a)}_removeListener(e,t){let r=this.listenerUnsubscribes.get(t);r&&(r(),this.listenerUnsubscribes.delete(t))}};oc.type="COOKIE";var Qi=class extends Ki{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}};Qi.type="SESSION";var Ec=Qi;function W_(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var Ji=class n{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;let r=new n(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let t=e,{eventId:r,eventType:i,data:o}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});let u=Array.from(a).map(async f=>f(t.origin,o)),h=await W_(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}};Ji.receivers=[];function Tc(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var ac=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,a;return new Promise((u,h)=>{let f=Tc("",20);i.port1.start();let _=setTimeout(()=>{h(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(y){let A=y;if(A.data.eventId===f)switch(A.data.status){case"ack":clearTimeout(_),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(A.data.response);break;default:clearTimeout(_),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}};function Ke(){return window}function Q_(n){Ke().location.href=n}function Wd(){return typeof Ke().WorkerGlobalScope<"u"&&typeof Ke().importScripts=="function"}async function J_(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(n){return null}}function Y_(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function X_(){return Wd()?self:null}var Qd="firebaseLocalStorageDb",Z_=1,Yi="firebaseLocalStorage",Jd="fbase_key",Ut=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function as(n,e){return n.transaction([Yi],e?"readwrite":"readonly").objectStore(Yi)}function ey(){let n=indexedDB.deleteDatabase(Qd);return new Ut(n).toPromise()}function cc(){let n=indexedDB.open(Qd,Z_);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Yi,{keyPath:Jd})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(Yi)?e(r):(r.close(),await ey(),e(await cc()))})})}async function ud(n,e,t){let r=as(n,!0).put({[Jd]:e,value:t});return new Ut(r).toPromise()}async function ty(n,e){let t=as(n,!1).get(e),r=await new Ut(t).toPromise();return r===void 0?null:r.value}function ld(n,e){let t=as(n,!0).delete(e);return new Ut(t).toPromise()}var ny=800,ry=3,Xi=class{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cc(),this.db)}async _withRetries(e){let t=0;for(;;)try{let r=await this._openDb();return await e(r)}catch(r){if(t++>ry)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Wd()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ji._getInstance(X_()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await J_(),!this.activeServiceWorker)return;this.sender=new ac(this.activeServiceWorker);let e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Y_()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await cc();return await ud(e,Hi,"1"),await ld(e,Hi),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>ud(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(r=>ty(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ld(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(i=>{let o=as(i,!1).getAll();return new Ut(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];let t=[],r=new Set;if(e.length!==0)for(let{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(let i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;let r=this.listeners[e];if(r)for(let i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ny)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};Xi.type="LOCAL";var Yd=Xi;function hd(n,e){return ye(n,"POST","/v2/accounts/mfaSignIn:start",he(n,e))}function iy(n,e){return ye(n,"POST","/v2/accounts/mfaSignIn:finalize",he(n,e))}function sy(n,e){return ye(n,"POST","/v2/accounts/mfaSignIn:finalize",he(n,e))}var SE=Fd("rcb"),RE=new xt(3e4,6e4);var Di="recaptcha";async function oy(n,e,t){var r;if(!n._getRecaptchaConfig())try{await A_(n)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){let o=i.session;if("phoneNumber"in i){D(o.type==="enroll",n,"internal-error");let a={idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await fr(n,a,"mfaSmsEnrollment",async(_,y)=>{if(y.phoneEnrollmentInfo.captchaResponse===dr){D((t==null?void 0:t.type)===Di,_,"argument-error");let A=await Wa(_,y,t);return cd(_,A)}return cd(_,y)},"PHONE_PROVIDER").catch(_=>Promise.reject(_))).phoneSessionInfo.sessionInfo}else{D(o.type==="signin",n,"internal-error");let a=((r=i.multiFactorHint)==null?void 0:r.uid)||i.multiFactorUid;D(a,n,"missing-multi-factor-info");let u={mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await fr(n,u,"mfaSmsSignIn",async(y,A)=>{if(A.phoneSignInInfo.captchaResponse===dr){D((t==null?void 0:t.type)===Di,y,"argument-error");let P=await Wa(y,A,t);return hd(y,P)}return hd(y,A)},"PHONE_PROVIDER").catch(y=>Promise.reject(y))).phoneResponseInfo.sessionInfo}}else{let o={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await fr(n,o,"sendVerificationCode",async(f,_)=>{if(_.captchaResponse===dr){D((t==null?void 0:t.type)===Di,f,"argument-error");let y=await Wa(f,_,t);return od(f,y)}return od(f,_)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).sessionInfo}}finally{t==null||t._reset()}}async function Wa(n,e,t){D(t.type===Di,n,"argument-error");let r=await t.verify();D(typeof r=="string",n,"argument-error");let i=V({},e);if("phoneEnrollmentInfo"in i){let o=i.phoneEnrollmentInfo.phoneNumber,a=i.phoneEnrollmentInfo.captchaResponse,u=i.phoneEnrollmentInfo.clientType,h=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r,captchaResponse:a,clientType:u,recaptchaVersion:h}}),i}else if("phoneSignInInfo"in i){let o=i.phoneSignInInfo.captchaResponse,a=i.phoneSignInInfo.clientType,u=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:u}}),i}else return Object.assign(i,{recaptchaToken:r}),i}var vr=class n{constructor(e){this.providerId=n.PROVIDER_ID,this.auth=It(e)}verifyPhoneNumber(e,t){return oy(this.auth,e,me(t))}static credential(e,t){return _r._fromVerification(e,t)}static credentialFromResult(e){let t=e;return n.credentialFromTaggedObject(t)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:r}=e;return t&&r?_r._fromTokenResponse(t,r):null}};vr.PROVIDER_ID="phone";vr.PHONE_SIGN_IN_METHOD="phone";function ay(n,e){return e?et(e):(D(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Ar=class extends Vt{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return wn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return wn(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function cy(n){return jd(n.auth,new Ar(n),n.bypassAuthState)}function uy(n){let{auth:e,user:t}=n;return D(t,e,"internal-error"),B_(t,new Ar(n),n.bypassAuthState)}async function ly(n){let{auth:e,user:t}=n;return D(t,e,"internal-error"),U_(t,new Ar(n),n.bypassAuthState)}var Zi=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}let h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cy;case"linkViaPopup":case"linkViaRedirect":return ly;case"reauthViaPopup":case"reauthViaRedirect":return uy;default:Le(this.auth,"internal-error")}}resolve(e){tt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){tt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var hy=new xt(2e3,1e4);var uc=class n extends Zi{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return D(e,this.auth,"internal-error"),e}async onExecution(){tt(this.filter.length===1,"Popup operations only handle one event");let e=Tc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(He(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(He(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(He(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hy.get())};e()}};uc.currentPopupAction=null;var dy="pendingRedirect",Oi=new Map,lc=class extends Zi{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Oi.get(this.auth._key());if(!e){try{let r=await fy(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Oi.set(this.auth._key(),e)}return this.bypassAuthState||Oi.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function fy(n,e){let t=gy(e),r=my(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function py(n,e){Oi.set(n._key(),e)}function my(n){return et(n._redirectPersistence)}function gy(n){return Ni(dy,n.config.apiKey,n.name)}async function _y(n,e,t=!1){if(Te(n.app))return Promise.reject(yt(n));let r=It(n),i=ay(r,e),a=await new lc(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}var yy=600*1e3,hc=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Iy(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Xd(e)){let i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(He(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yy&&this.cachedEventUids.clear(),this.cachedEventUids.has(dd(e))}saveEventToCache(e){this.cachedEventUids.add(dd(e)),this.lastProcessedEventTime=Date.now()}};function dd(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Xd({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Iy(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xd(n);default:return!1}}async function wy(n,e={}){return ye(n,"GET","/v1/projects",e)}var Ey=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ty=/^https?/;async function vy(n){if(n.config.emulator)return;let{authorizedDomains:e}=await wy(n);for(let t of e)try{if(Ay(t))return}catch(r){}Le(n,"unauthorized-domain")}function Ay(n){let e=Ja(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!Ty.test(t))return!1;if(Ey.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var by=new xt(3e4,6e4);function fd(){let n=Ke().___jsl;if(n!=null&&n.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Sy(n){return new Promise((e,t)=>{var i,o,a;function r(){fd(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fd(),t(He(n,"network-request-failed"))},timeout:by.get()})}if((o=(i=Ke().gapi)==null?void 0:i.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=Ke().gapi)!=null&&a.load)r();else{let u=Fd("iframefcb");return Ke()[u]=()=>{gapi.load?r():t(He(n,"network-request-failed"))},Md("".concat(T_(),"?onload=").concat(u)).catch(h=>t(h))}}).catch(e=>{throw xi=null,e})}var xi=null;function Ry(n){return xi=xi||Sy(n),xi}var Py=new xt(5e3,15e3),Cy="__/auth/iframe",ky="emulator/auth/iframe",Ny={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Dy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Oy(n){let e=n.config;D(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?gc(e,ky):"https://".concat(n.config.authDomain,"/").concat(Cy),r={apiKey:e.apiKey,appName:n.name,v:ke},i=Dy.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(t,"?").concat(Qt(r).slice(1))}async function xy(n){let e=await Ry(n),t=Ke().gapi;return D(t,n,"internal-error"),e.open({where:document.body,url:Oy(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ny,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let a=He(n,"network-request-failed"),u=Ke().setTimeout(()=>{o(a)},Py.get());function h(){Ke().clearTimeout(u),i(r)}r.ping(h).then(h,()=>{o(a)})}))}var Vy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ly=500,My=600,Fy="_blank",Uy="http://localhost",es=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}};function By(n,e,t,r=Ly,i=My){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",h=de(V({},Vy),{width:r.toString(),height:i.toString(),top:o,left:a}),f=ue().toLowerCase();t&&(u=kd(f)?Fy:t),Pd(f)&&(e=e||Uy,h.scrollbars="yes");let _=Object.entries(h).reduce((A,[P,k])=>"".concat(A).concat(P,"=").concat(k,","),"");if(g_(f)&&u!=="_self")return qy(e||"",u),new es(null);let y=window.open(e||"",u,_);D(y,n,"popup-blocked");try{y.focus()}catch(A){}return new es(y)}function qy(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var zy="__/auth/handler",jy="emulator/auth/handler",$y=encodeURIComponent("fac");async function pd(n,e,t,r,i,o){D(n.config.authDomain,n,"auth-domain-config-required"),D(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ke,eventId:i};if(e instanceof Gi){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",fl(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[_,y]of Object.entries(o||{}))a[_]=y}if(e instanceof Ft){let _=e.getScopes().filter(y=>y!=="");_.length>0&&(a.scopes=_.join(","))}n.tenantId&&(a.tid=n.tenantId);let u=a;for(let _ of Object.keys(u))u[_]===void 0&&delete u[_];let h=await n._getAppCheckToken(),f=h?"#".concat($y,"=").concat(encodeURIComponent(h)):"";return"".concat(Gy(n),"?").concat(Qt(u).slice(1)).concat(f)}function Gy({config:n}){return n.emulator?gc(n,jy):"https://".concat(n.authDomain,"/").concat(zy)}var Qa="webStorageSupport",dc=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ec,this._completeRedirectFn=_y,this._overrideRedirectResult=py}async _openPopup(e,t,r,i){var a;tt((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");let o=await pd(e,t,r,Ja(),i);return By(e,o,Tc())}async _openRedirect(e,t,r,i){await this._originValidation(e);let o=await pd(e,t,r,Ja(),i);return Q_(o),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(tt(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await xy(e),r=new hc(e);return t.register("authEvent",i=>(D(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Qa,{type:Qa},i=>{var a;let o=(a=i==null?void 0:i[0])==null?void 0:a[Qa];o!==void 0&&t(!!o),Le(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=vy(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Vd()||Cd()||yc()}},Zd=dc,ts=class{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return Ge("unexpected MultiFactorSessionType")}}},fc=class n extends ts{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new n(e)}_finalizeEnroll(e,t,r){return z_(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return iy(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},ns=class{constructor(){}static assertion(e){return fc._fromCredential(e)}};ns.FACTOR_ID="phone";var rs=class{static assertionForEnrollment(e,t){return is._fromSecret(e,t)}static assertionForSignIn(e,t){return is._fromEnrollmentId(e,t)}static async generateSecret(e){var i;let t=e;D(typeof((i=t.user)==null?void 0:i.auth)<"u","internal-error");let r=await j_(t.user.auth,{idToken:t.credential,totpEnrollmentInfo:{}});return ss._fromStartTotpMfaEnrollmentResponse(r,t.user.auth)}};rs.FACTOR_ID="totp";var is=class n extends ts{constructor(e,t,r){super("totp"),this.otp=e,this.enrollmentId=t,this.secret=r}static _fromSecret(e,t){return new n(t,void 0,e)}static _fromEnrollmentId(e,t){return new n(t,e)}async _finalizeEnroll(e,t,r){return D(typeof this.secret<"u",e,"argument-error"),$_(e,{idToken:t,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){D(this.enrollmentId!==void 0&&this.otp!==void 0,e,"argument-error");let r={verificationCode:this.otp};return sy(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r})}},ss=class n{constructor(e,t,r,i,o,a,u){this.sessionInfo=a,this.auth=u,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=o}static _fromStartTotpMfaEnrollmentResponse(e,t){return new n(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){var i;let r=!1;return(Ci(e)||Ci(t))&&(r=!0),r&&(Ci(e)&&(e=((i=this.auth.currentUser)==null?void 0:i.email)||"unknownuser"),Ci(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}};function Ci(n){return typeof n>"u"||(n==null?void 0:n.length)===0}var md="@firebase/auth",gd="1.11.1";var pc=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){D(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Hy(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ky(n){Ee(new ae("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=r.options;D(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});let h={apiKey:a,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ld(n)},f=new nc(r,i,o,h);return b_(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ee(new ae("auth-internal",e=>{let t=It(e.getProvider("auth").getImmediate());return(r=>new pc(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Y(md,gd,Hy(n)),Y(md,gd,"esm2020")}var Wy=300,Qy=Gs("authIdTokenMaxAge")||Wy,_d=null,Jy=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Qy)return;let i=t==null?void 0:t.token;_d!==i&&(_d=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))};function vc(n=Ye()){let e=Oe(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Ud(n,{popupRedirectResolver:Zd,persistence:[Yd,Kd,Ec]}),r=Gs("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let a=Jy(o.toString());Hd(t,a,()=>a(t.currentUser)),Gd(t,u=>a(u))}}let i=js("auth");return i&&Bd(t,"http://".concat(i)),t}function Yy(){var n,e;return(e=(n=document.getElementsByTagName("head"))==null?void 0:n[0])!=null?e:document}w_({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=He("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",Yy().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ky("Browser");var of="firebasestorage.googleapis.com",Xy="storageBucket",Zy=120*1e3,eI=600*1e3;var We=class n extends oe{constructor(e,t,r=0){super(Ac(e),"Firebase Storage: ".concat(t," (").concat(Ac(e),")")),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ac(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}},Qe;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Qe||(Qe={}));function Ac(n){return"storage/"+n}function tI(){let n="An unknown error occurred, please check the error payload for server response.";return new We(Qe.UNKNOWN,n)}function nI(){return new We(Qe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function rI(){return new We(Qe.CANCELED,"User canceled the upload/download.")}function iI(n){return new We(Qe.INVALID_URL,"Invalid URL '"+n+"'.")}function sI(n){return new We(Qe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function ef(n){return new We(Qe.INVALID_ARGUMENT,n)}function af(){return new We(Qe.APP_DELETED,"The Firebase app was deleted.")}function oI(n){return new We(Qe.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var nt=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch(i){return new n(e,"")}if(r.path==="")return r;throw sI(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(G){G.path.charAt(G.path.length-1)==="/"&&(G.path_=G.path_.slice(0,-1))}let a="(/(.*))?$",u=new RegExp("^gs://"+i+a,"i"),h={bucket:1,path:3};function f(G){G.path_=decodeURIComponent(G.path)}let _="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),A="(/([^?#]*).*)?$",P=new RegExp("^https?://".concat(y,"/").concat(_,"/b/").concat(i,"/o").concat(A),"i"),k={bucket:1,path:3},O=t===of?"(?:storage.googleapis.com|storage.cloud.google.com)":t,N="([^?#]*)",U=new RegExp("^https?://".concat(O,"/").concat(i,"/").concat(N),"i"),$=[{regex:u,indices:h,postModify:o},{regex:P,indices:k,postModify:f},{regex:U,indices:{bucket:1,path:2},postModify:f}];for(let G=0;G<$.length;G++){let ie=$[G],Q=ie.regex.exec(e);if(Q){let w=Q[ie.indices.bucket],p=Q[ie.indices.path];p||(p=""),r=new n(w,p),ie.postModify(r);break}}if(r==null)throw iI(e);return r}},bc=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function aI(n,e,t){let r=1,i=null,o=null,a=!1,u=0;function h(){return u===2}let f=!1;function _(...N){f||(f=!0,e.apply(null,N))}function y(N){i=setTimeout(()=>{i=null,n(P,h())},N)}function A(){o&&clearTimeout(o)}function P(N,...U){if(f){A();return}if(N){A(),_.call(null,N,...U);return}if(h()||a){A(),_.call(null,N,...U);return}r<64&&(r*=2);let $;u===1?(u=2,$=0):$=(r+Math.random())*1e3,y($)}let k=!1;function O(N){k||(k=!0,A(),!f&&(i!==null?(N||(u=2),clearTimeout(i),y(0)):N||(u=1)))}return y(0),o=setTimeout(()=>{a=!0,O(!0)},t),O}function cI(n){n(!1)}function uI(n){return n!==void 0}function tf(n,e,t,r){if(r<e)throw ef("Invalid value for '".concat(n,"'. Expected ").concat(e," or greater."));if(r>t)throw ef("Invalid value for '".concat(n,"'. Expected ").concat(t," or less."))}function lI(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var cs;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(cs||(cs={}));function hI(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}var Sc=class{constructor(e,t,r,i,o,a,u,h,f,_,y,A=!0,P=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=_,this.connectionFactory_=y,this.retry=A,this.isUsingEmulator=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,O)=>{this.resolve_=k,this.reject_=O,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new En(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let a=u=>{let h=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;let u=o.getErrorCode()===cs.NO_ERROR,h=o.getStatus();if(!u||hI(h,this.additionalRetryCodes_)&&this.retry){let _=o.getErrorCode()===cs.ABORT;r(!1,new En(!1,null,_));return}let f=this.successCodes_.indexOf(h)!==-1;r(!0,new En(f,o))})},t=(r,i)=>{let o=this.resolve_,a=this.reject_,u=i.connection;if(i.wasSuccessCode)try{let h=this.callback_(u,u.getResponse());uI(h)?o(h):o()}catch(h){a(h)}else if(u!==null){let h=tI();h.serverResponse=u.getErrorText(),this.errorCallback_?a(this.errorCallback_(u,h)):a(h)}else if(i.canceled){let h=this.appDelete_?af():rI();a(h)}else{let h=nI();a(h)}};this.canceled_?t(!1,new En(!1,null,!0)):this.backoffId_=aI(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&cI(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},En=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function dI(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function fI(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e!=null?e:"AppManager")}function pI(n,e){e&&(n["X-Firebase-GMPID"]=e)}function mI(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function gI(n,e,t,r,i,o,a=!0,u=!1){let h=lI(n.urlParams),f=n.url+h,_=Object.assign({},n.headers);return pI(_,e),dI(_,t),fI(_,o),mI(_,r),new Sc(f,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,a,u)}function _I(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function yI(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var zT=256*1024;var Rc=class n{constructor(e,t){this._service=e,t instanceof nt?this._location=t:this._location=nt.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new nt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return yI(this._location.path)}get storage(){return this._service}get parent(){let e=_I(this._location.path);if(e===null)return null;let t=new nt(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw oI(e)}};function nf(n,e){let t=e==null?void 0:e[Xy];return t==null?null:nt.makeFromBucketSpec(t,n)}function II(n,e,t,r={}){n.host="".concat(e,":").concat(t);let i=Ue(e);i&&(Kt("https://".concat(n.host,"/b")),Wt("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";let{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:Jr(o,n.app.options.projectId))}var Pc=class{constructor(e,t,r,i,o,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=a,this._bucket=null,this._host=of,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Zy,this._maxUploadRetryTime=eI,this._requests=new Set,i!=null?this._bucket=nt.makeFromBucketSpec(i,this._host):this._bucket=nf(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=nt.makeFromBucketSpec(this._url,e):this._bucket=nf(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){tf("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){tf("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Te(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Rc(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new bc(af());{let a=gI(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){let[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}},rf="@firebase/storage",sf="0.14.0";var cf="storage";function uf(n=Ye(),e){n=me(n);let r=Oe(n,cf).getImmediate({identifier:e}),i=Qr("storage");return i&&wI(r,...i),r}function wI(n,e,t,r={}){II(n,e,t,r)}function EI(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Pc(t,r,i,e,ke)}function TI(){Ee(new ae(cf,EI,"PUBLIC").setMultipleInstances(!0)),Y(rf,sf,""),Y(rf,sf,"esm2020")}TI();var df="@firebase/installations",Dc="0.6.19";var ff=1e4,pf="w:".concat(Dc),mf="FIS_v2",vI="https://firebaseinstallations.googleapis.com/v1",AI=3600*1e3,bI="installations",SI="Installations";var RI={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},zt=new Ce(bI,SI,RI);function gf(n){return n instanceof oe&&n.code.includes("request-failed")}function _f({projectId:n}){return"".concat(vI,"/projects/").concat(n,"/installations")}function yf(n){return{token:n.token,requestStatus:2,expiresIn:CI(n.expiresIn),creationTime:Date.now()}}async function If(n,e){let r=(await e.json()).error;return zt.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function wf({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function PI(n,{refreshToken:e}){let t=wf(n);return t.append("Authorization",kI(e)),t}async function Ef(n){let e=await n();return e.status>=500&&e.status<600?n():e}function CI(n){return Number(n.replace("s","000"))}function kI(n){return"".concat(mf," ").concat(n)}async function NI({appConfig:n,heartbeatServiceProvider:e},{fid:t}){let r=_f(n),i=wf(n),o=e.getImmediate({optional:!0});if(o){let f=await o.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}let a={fid:t,authVersion:mf,appId:n.appId,sdkVersion:pf},u={method:"POST",headers:i,body:JSON.stringify(a)},h=await Ef(()=>fetch(r,u));if(h.ok){let f=await h.json();return{fid:f.fid||t,registrationStatus:2,refreshToken:f.refreshToken,authToken:yf(f.authToken)}}else throw await If("Create Installation",h)}function Tf(n){return new Promise(e=>{setTimeout(e,n)})}function DI(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}var OI=/^[cdef][\w-]{21}$/,Nc="";function xI(){try{let n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;let t=VI(n);return OI.test(t)?t:Nc}catch(n){return Nc}}function VI(n){return DI(n).substr(0,22)}function ls(n){return"".concat(n.appName,"!").concat(n.appId)}var vf=new Map;function Af(n,e){let t=ls(n);bf(t,e),LI(t,e)}function bf(n,e){let t=vf.get(n);if(t)for(let r of t)r(e)}function LI(n,e){let t=MI();t&&t.postMessage({key:n,fid:e}),FI()}var qt=null;function MI(){return!qt&&"BroadcastChannel"in self&&(qt=new BroadcastChannel("[Firebase] FID Change"),qt.onmessage=n=>{bf(n.data.key,n.data.fid)}),qt}function FI(){vf.size===0&&qt&&(qt.close(),qt=null)}var UI="firebase-installations-database",BI=1,jt="firebase-installations-store",Cc=null;function Oc(){return Cc||(Cc=Zr(UI,BI,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(jt)}}})),Cc}async function us(n,e){let t=ls(n),i=(await Oc()).transaction(jt,"readwrite"),o=i.objectStore(jt),a=await o.get(t);return await o.put(e,t),await i.done,(!a||a.fid!==e.fid)&&Af(n,e.fid),e}async function Sf(n){let e=ls(n),r=(await Oc()).transaction(jt,"readwrite");await r.objectStore(jt).delete(e),await r.done}async function hs(n,e){let t=ls(n),i=(await Oc()).transaction(jt,"readwrite"),o=i.objectStore(jt),a=await o.get(t),u=e(a);return u===void 0?await o.delete(t):await o.put(u,t),await i.done,u&&(!a||a.fid!==u.fid)&&Af(n,u.fid),u}async function xc(n){let e,t=await hs(n.appConfig,r=>{let i=qI(r),o=zI(n,i);return e=o.registrationPromise,o.installationEntry});return t.fid===Nc?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function qI(n){let e=n||{fid:xI(),registrationStatus:0};return Rf(e)}function zI(n,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(zt.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=jI(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:$I(n)}:{installationEntry:e}}async function jI(n,e){try{let t=await NI(n,e);return us(n.appConfig,t)}catch(t){throw gf(t)&&t.customData.serverCode===409?await Sf(n.appConfig):await us(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function $I(n){let e=await lf(n.appConfig);for(;e.registrationStatus===1;)await Tf(100),e=await lf(n.appConfig);if(e.registrationStatus===0){let{installationEntry:t,registrationPromise:r}=await xc(n);return r||t}return e}function lf(n){return hs(n,e=>{if(!e)throw zt.create("installation-not-found");return Rf(e)})}function Rf(n){return GI(n)?{fid:n.fid,registrationStatus:0}:n}function GI(n){return n.registrationStatus===1&&n.registrationTime+ff<Date.now()}async function HI({appConfig:n,heartbeatServiceProvider:e},t){let r=KI(n,t),i=PI(n,t),o=e.getImmediate({optional:!0});if(o){let f=await o.getHeartbeatsHeader();f&&i.append("x-firebase-client",f)}let a={installation:{sdkVersion:pf,appId:n.appId}},u={method:"POST",headers:i,body:JSON.stringify(a)},h=await Ef(()=>fetch(r,u));if(h.ok){let f=await h.json();return yf(f)}else throw await If("Generate Auth Token",h)}function KI(n,{fid:e}){return"".concat(_f(n),"/").concat(e,"/authTokens:generate")}async function Vc(n,e=!1){let t,r=await hs(n.appConfig,o=>{if(!Pf(o))throw zt.create("not-registered");let a=o.authToken;if(!e&&JI(a))return o;if(a.requestStatus===1)return t=WI(n,e),o;{if(!navigator.onLine)throw zt.create("app-offline");let u=XI(o);return t=QI(n,u),u}});return t?await t:r.authToken}async function WI(n,e){let t=await hf(n.appConfig);for(;t.authToken.requestStatus===1;)await Tf(100),t=await hf(n.appConfig);let r=t.authToken;return r.requestStatus===0?Vc(n,e):r}function hf(n){return hs(n,e=>{if(!Pf(e))throw zt.create("not-registered");let t=e.authToken;return ZI(t)?de(V({},e),{authToken:{requestStatus:0}}):e})}async function QI(n,e){try{let t=await HI(n,e),r=de(V({},e),{authToken:t});return await us(n.appConfig,r),t}catch(t){if(gf(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await Sf(n.appConfig);else{let r=de(V({},e),{authToken:{requestStatus:0}});await us(n.appConfig,r)}throw t}}function Pf(n){return n!==void 0&&n.registrationStatus===2}function JI(n){return n.requestStatus===2&&!YI(n)}function YI(n){let e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+AI}function XI(n){let e={requestStatus:1,requestTime:Date.now()};return de(V({},n),{authToken:e})}function ZI(n){return n.requestStatus===1&&n.requestTime+ff<Date.now()}async function ew(n){let e=n,{installationEntry:t,registrationPromise:r}=await xc(e);return r?r.catch(console.error):Vc(e).catch(console.error),t.fid}async function tw(n,e=!1){let t=n;return await nw(t),(await Vc(t,e)).token}async function nw(n){let{registrationPromise:e}=await xc(n);e&&await e}function rw(n){if(!n||!n.options)throw kc("App Configuration");if(!n.name)throw kc("App Name");let e=["projectId","apiKey","appId"];for(let t of e)if(!n.options[t])throw kc(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function kc(n){return zt.create("missing-app-config-values",{valueName:n})}var Cf="installations",iw="installations-internal",sw=n=>{let e=n.getProvider("app").getImmediate(),t=rw(e),r=Oe(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},ow=n=>{let e=n.getProvider("app").getImmediate(),t=Oe(e,Cf).getImmediate();return{getId:()=>ew(t),getToken:i=>tw(t,i)}};function aw(){Ee(new ae(Cf,sw,"PUBLIC")),Ee(new ae(iw,ow,"PRIVATE"))}aw();Y(df,Dc);Y(df,Dc,"esm2020");var Lc="@firebase/remote-config",kf="0.7.0";var Fc=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var Ff="remote-config",Nf=100;var cw={"already-initialized":"Remote Config already initialized","registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser","custom-signal-max-allowed-signals":"Setting more than {$maxSignals} custom signals is not supported.","stream-error":"The stream was not able to connect to the backend: {$originalErrorMessage}.","realtime-unavailable":"The Realtime service is unavailable: {$originalErrorMessage}","update-message-invalid":"The stream invalidation message was unparsable: {$originalErrorMessage}","update-not-fetched":"Unable to fetch the latest config: {$originalErrorMessage}"},re=new Ce("remoteconfig","Remote Config",cw);function Uf(n=Ye(),e={}){var i,o;n=me(n);let t=Oe(n,Ff);if(t.isInitialized()){let a=t.getOptions();if(De(a,e))return t.getImmediate();throw re.create("already-initialized")}t.initialize({options:e});let r=t.getImmediate();return e.initialFetchResponse&&(r._initializePromise=Promise.all([r._storage.setLastSuccessfulFetchResponse(e.initialFetchResponse),r._storage.setActiveConfigEtag(((i=e.initialFetchResponse)==null?void 0:i.eTag)||""),r._storage.setActiveConfigTemplateVersion(e.initialFetchResponse.templateVersion||0),r._storageCache.setLastSuccessfulFetchTimestampMillis(Date.now()),r._storageCache.setLastFetchStatus("success"),r._storageCache.setActiveConfig(((o=e.initialFetchResponse)==null?void 0:o.config)||{})]).then(),r._isInitializationComplete=!0),r}function uw(n){let e=me(n);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}var Uc=class{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let r=Date.now()-t,i=r<=e;return this.logger.debug("Config fetch cache check."+" Cache age millis: ".concat(r,".")+" Cache max age millis (minimumFetchIntervalMillis setting): ".concat(e,".")+" Is cache hit: ".concat(i,".")),i}async fetch(e){let[t,r]=await Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,t))return r;e.eTag=r&&r.eTag;let i=await this.client.fetch(e),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return i.status===200&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),await Promise.all(o),i}};function lw(n=navigator){return n.languages&&n.languages[0]||n.language}var Bc=class{constructor(e,t,r,i,o,a){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=o,this.appId=a}async fetch(e){let[t,r]=await Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o="".concat(i,"/v1/projects/").concat(this.projectId,"/namespaces/").concat(this.namespace,":fetch?key=").concat(this.apiKey),a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},u={sdk_version:this.sdkVersion,app_instance_id:t,app_instance_id_token:r,app_id:this.appId,language_code:lw(),custom_signals:e.customSignals},h={method:"POST",headers:a,body:JSON.stringify(u)},f=fetch(o,h),_=new Promise((U,B)=>{e.signal.addEventListener(()=>{let $=new Error("The operation was aborted.");$.name="AbortError",B($)})}),y;try{await Promise.race([f,_]),y=await f}catch(U){let B="fetch-client-network";throw(U==null?void 0:U.name)==="AbortError"&&(B="fetch-timeout"),re.create(B,{originalErrorMessage:U==null?void 0:U.message})}let A=y.status,P=y.headers.get("ETag")||void 0,k,O,N;if(y.status===200){let U;try{U=await y.json()}catch(B){throw re.create("fetch-client-parse",{originalErrorMessage:B==null?void 0:B.message})}k=U.entries,O=U.state,N=U.templateVersion}if(O==="INSTANCE_STATE_UNSPECIFIED"?A=500:O==="NO_CHANGE"?A=304:(O==="NO_TEMPLATE"||O==="EMPTY_CONFIG")&&(k={}),A!==304&&A!==200)throw re.create("fetch-status",{httpStatus:A});return{status:A,eTag:P,config:k,templateVersion:N}}};function hw(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(re.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function dw(n){if(!(n instanceof oe)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var qc=class{constructor(e,t){this.client=e,this.storage=t}async fetch(e){let t=await this.storage.getThrottleMetadata()||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,t)}async attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){await hw(e.signal,t);try{let i=await this.client.fetch(e);return await this.storage.deleteThrottleMetadata(),i}catch(i){if(!dw(i))throw i;let o={throttleEndTimeMillis:Date.now()+Ks(r),backoffCount:r+1};return await this.storage.setThrottleMetadata(o),this.attemptFetch(e,o)}}};var fw=60*1e3,pw=720*60*1e3,zc=class{get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}constructor(e,t,r,i,o,a){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=o,this._realtimeHandler=a,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:fw,minimumFetchIntervalMillis:pw},this.defaultConfig={}}};function ds(n,e){let t=n.target.error||void 0;return re.create(e,{originalErrorMessage:t&&(t==null?void 0:t.message)})}var wt="app_namespace_store",mw="firebase_remote_config",gw=1;function _w(){return new Promise((n,e)=>{try{let t=indexedDB.open(mw,gw);t.onerror=r=>{e(ds(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(wt,{keyPath:"compositeKey"})}}}catch(t){e(re.create("storage-open",{originalErrorMessage:t==null?void 0:t.message}))}})}var fs=class{getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}getCustomSignals(){return this.get("custom_signals")}getRealtimeBackoffMetadata(){return this.get("realtime_backoff_metadata")}setRealtimeBackoffMetadata(e){return this.set("realtime_backoff_metadata",e)}getActiveConfigTemplateVersion(){return this.get("last_known_template_version")}setActiveConfigTemplateVersion(e){return this.set("last_known_template_version",e)}},jc=class extends fs{constructor(e,t,r,i=_w()){super(),this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}async setCustomSignals(e){let r=(await this.openDbPromise).transaction([wt],"readwrite"),i=await this.getWithTransaction("custom_signals",r),o=Bf(e,i||{});return await this.setWithTransaction("custom_signals",o,r),o}async getWithTransaction(e,t){return new Promise((r,i)=>{let o=t.objectStore(wt),a=this.createCompositeKey(e);try{let u=o.get(a);u.onerror=h=>{i(ds(h,"storage-get"))},u.onsuccess=h=>{let f=h.target.result;r(f?f.value:void 0)}}catch(u){i(re.create("storage-get",{originalErrorMessage:u==null?void 0:u.message}))}})}async setWithTransaction(e,t,r){return new Promise((i,o)=>{let a=r.objectStore(wt),u=this.createCompositeKey(e);try{let h=a.put({compositeKey:u,value:t});h.onerror=f=>{o(ds(f,"storage-set"))},h.onsuccess=()=>{i()}}catch(h){o(re.create("storage-set",{originalErrorMessage:h==null?void 0:h.message}))}})}async get(e){let r=(await this.openDbPromise).transaction([wt],"readonly");return this.getWithTransaction(e,r)}async set(e,t){let i=(await this.openDbPromise).transaction([wt],"readwrite");return this.setWithTransaction(e,t,i)}async delete(e){let t=await this.openDbPromise;return new Promise((r,i)=>{let a=t.transaction([wt],"readwrite").objectStore(wt),u=this.createCompositeKey(e);try{let h=a.delete(u);h.onerror=f=>{i(ds(f,"storage-delete"))},h.onsuccess=()=>{r()}}catch(h){i(re.create("storage-delete",{originalErrorMessage:h==null?void 0:h.message}))}})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}},$c=class extends fs{constructor(){super(...arguments),this.storage={}}async get(e){return Promise.resolve(this.storage[e])}async set(e,t){return this.storage[e]=t,Promise.resolve(void 0)}async delete(e){return this.storage[e]=void 0,Promise.resolve()}async setCustomSignals(e){let t=this.storage.custom_signals||{};return this.storage.custom_signals=Bf(e,t),Promise.resolve(this.storage.custom_signals)}};function Bf(n,e){let t=V(V({},e),n),r=Object.fromEntries(Object.entries(t).filter(([i,o])=>o!==null).map(([i,o])=>typeof o=="number"?[i,o.toString()]:[i,o]));if(Object.keys(r).length>Nf)throw re.create("custom-signal-max-allowed-signals",{maxSignals:Nf});return r}var Gc=class{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}getCustomSignals(){return this.customSignals}async loadFromStorage(){let e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),i=this.storage.getCustomSignals(),o=await e;o&&(this.lastFetchStatus=o);let a=await t;a&&(this.lastSuccessfulFetchTimestampMillis=a);let u=await r;u&&(this.activeConfig=u);let h=await i;h&&(this.customSignals=h)}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}async setCustomSignals(e){this.customSignals=await this.storage.setCustomSignals(e)}};var Hc=class{constructor(e){this.allowedEvents_=e,this.listeners_={},Hr(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){Hr(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var Kc=class n extends Hc{static getInstance(){return new n}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return Hr(e==="visible","Unknown event type: "+e),[this.visible_]}};var yw="X-Goog-Api-Key",Iw="X-Goog-Firebase-Installations-Auth",Mc=8,Df=3,Of=-1,xf=0,Vf="featureDisabled",Lf="retryIntervalSeconds",Mf="latestTemplateVersionNumber",Wc=class{constructor(e,t,r,i,o,a,u,h,f,_){this.firebaseInstallations=e,this.storage=t,this.sdkVersion=r,this.namespace=i,this.projectId=o,this.apiKey=a,this.appId=u,this.logger=h,this.storageCache=f,this.cachingClient=_,this.observers=new Set,this.isConnectionActive=!1,this.isRealtimeDisabled=!1,this.httpRetriesRemaining=Mc,this.isInBackground=!1,this.decoder=new TextDecoder("utf-8"),this.isClosingConnection=!1,this.propagateError=y=>this.observers.forEach(A=>{var P;return(P=A.error)==null?void 0:P.call(A,y)}),this.isStatusCodeRetryable=y=>!y||[408,429,502,503,504].includes(y),this.setRetriesRemaining(),Kc.getInstance().on("visible",this.onVisibilityChange,this)}async setRetriesRemaining(){let e=await this.storage.getRealtimeBackoffMetadata(),t=(e==null?void 0:e.numFailedStreams)||0;this.httpRetriesRemaining=Math.max(Mc-t,1)}async updateBackoffMetadataWithLastFailedStreamConnectionTime(e){var i;let t=(((i=await this.storage.getRealtimeBackoffMetadata())==null?void 0:i.numFailedStreams)||0)+1,r=Ks(t,6e4,2);await this.storage.setRealtimeBackoffMetadata({backoffEndTimeMillis:new Date(e.getTime()+r),numFailedStreams:t})}async updateBackoffMetadataWithRetryInterval(e){let t=Date.now(),r=e*1e3,i=new Date(t+r);await this.storage.setRealtimeBackoffMetadata({backoffEndTimeMillis:i,numFailedStreams:0}),await this.retryHttpConnectionWhenBackoffEnds()}async closeRealtimeHttpConnection(){if(!this.isClosingConnection){this.isClosingConnection=!0;try{this.reader&&await this.reader.cancel()}catch(e){this.logger.debug("Failed to cancel the reader, connection was lost.")}finally{this.reader=void 0}this.controller&&(await this.controller.abort(),this.controller=void 0),this.isClosingConnection=!1}}async resetRealtimeBackoff(){await this.storage.setRealtimeBackoffMetadata({backoffEndTimeMillis:new Date(-1),numFailedStreams:0})}resetRetryCount(){this.httpRetriesRemaining=Mc}async establishRealtimeConnection(e,t,r,i){let o=await this.storage.getActiveConfigEtag(),a=await this.storage.getActiveConfigTemplateVersion(),u={[yw]:this.apiKey,[Iw]:r,"Content-Type":"application/json",Accept:"application/json","If-None-Match":o||"*","Content-Encoding":"gzip"},h={project:this.projectId,namespace:this.namespace,lastKnownVersionNumber:a,appId:this.appId,sdkVersion:this.sdkVersion,appInstanceId:t};return await fetch(e,{method:"POST",headers:u,body:JSON.stringify(h),signal:i})}getRealtimeUrl(){let e=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfigrealtime.googleapis.com",t="".concat(e,"/v1/projects/").concat(this.projectId,"/namespaces/").concat(this.namespace,":streamFetchInvalidations?key=").concat(this.apiKey);return new URL(t)}async createRealtimeConnection(){let[e,t]=await Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken(!1)]);this.controller=new AbortController;let r=this.getRealtimeUrl();return await this.establishRealtimeConnection(r,e,t,this.controller.signal)}async retryHttpConnectionWhenBackoffEnds(){let e=await this.storage.getRealtimeBackoffMetadata();e||(e={backoffEndTimeMillis:new Date(Of),numFailedStreams:xf});let t=new Date(e.backoffEndTimeMillis).getTime(),r=Date.now(),i=Math.max(0,t-r);await this.makeRealtimeHttpConnection(i)}setIsHttpConnectionRunning(e){this.isConnectionActive=e}checkAndSetHttpConnectionFlagIfNotRunning(){let e=this.canEstablishStreamConnection();return e&&this.setIsHttpConnectionRunning(!0),e}fetchResponseIsUpToDate(e,t){return e.config!=null&&e.templateVersion?e.templateVersion>=t:this.storageCache.getLastFetchStatus()==="success"}parseAndValidateConfigUpdateMessage(e){let t=e.indexOf("{"),r=e.indexOf("}",t);return t<0||r<0||t>=r?"":e.substring(t,r+1)}isEventListenersEmpty(){return this.observers.size===0}getRandomInt(e){return Math.floor(Math.random()*e)}executeAllListenerCallbacks(e){this.observers.forEach(t=>t.next(e))}getChangedParams(e,t){let r=new Set,i=new Set(Object.keys(e||{})),o=new Set(Object.keys(t||{}));for(let a of i)(!o.has(a)||e[a]!==t[a])&&r.add(a);for(let a of o)i.has(a)||r.add(a);return r}async fetchLatestConfig(e,t){let r=e-1,i=Df-r,o=this.storageCache.getCustomSignals();o&&this.logger.debug("Fetching config with custom signals: ".concat(JSON.stringify(o)));let a=new Fc;try{let u={cacheMaxAgeMillis:0,signal:a,customSignals:o,fetchType:"REALTIME",fetchAttempt:i},h=await this.cachingClient.fetch(u),f=await this.storage.getActiveConfig();if(!this.fetchResponseIsUpToDate(h,t)){this.logger.debug("Fetched template version is the same as SDK's current version. Retrying fetch."),await this.autoFetch(r,t);return}if(h.config==null){this.logger.debug("The fetch succeeded, but the backend had no updates.");return}f==null&&(f={});let _=this.getChangedParams(h.config,f);if(_.size===0){this.logger.debug("Config was fetched, but no params changed.");return}let y={getUpdatedKeys(){return new Set(_)}};this.executeAllListenerCallbacks(y)}catch(u){let h=u instanceof Error?u.message:String(u),f=re.create("update-not-fetched",{originalErrorMessage:"Failed to auto-fetch config update: ".concat(h)});this.propagateError(f)}}async autoFetch(e,t){if(e===0){let o=re.create("update-not-fetched",{originalErrorMessage:"Unable to fetch the latest version of the template."});this.propagateError(o);return}let i=this.getRandomInt(4)*1e3;await new Promise(o=>setTimeout(o,i)),await this.fetchLatestConfig(e,t)}async handleNotifications(e){let t,r="";for(;;){let{done:i,value:o}=await e.read();if(i)break;if(t=this.decoder.decode(o,{stream:!0}),r+=t,t.includes("}")){if(r=this.parseAndValidateConfigUpdateMessage(r),r.length===0)continue;try{let a=JSON.parse(r);if(this.isEventListenersEmpty())break;if(Vf in a&&a[Vf]===!0){let u=re.create("realtime-unavailable",{originalErrorMessage:"The server is temporarily unavailable. Try again in a few minutes."});this.propagateError(u);break}if(Mf in a){let u=await this.storage.getActiveConfigTemplateVersion(),h=Number(a[Mf]);u&&h>u&&await this.autoFetch(Df,h)}if(Lf in a){let u=Number(a[Lf]);await this.updateBackoffMetadataWithRetryInterval(u)}}catch(a){this.logger.debug("Unable to parse latest config update message.",a);let u=a instanceof Error?a.message:String(a);this.propagateError(re.create("update-message-invalid",{originalErrorMessage:u}))}r=""}}}async listenForNotifications(e){try{await this.handleNotifications(e)}catch(t){this.isInBackground||this.logger.debug("Real-time connection was closed due to an exception.")}}async prepareAndBeginRealtimeHttpStream(){if(!this.checkAndSetHttpConnectionFlagIfNotRunning())return;let e=await this.storage.getRealtimeBackoffMetadata();e||(e={backoffEndTimeMillis:new Date(Of),numFailedStreams:xf});let t=e.backoffEndTimeMillis.getTime();if(Date.now()<t){await this.retryHttpConnectionWhenBackoffEnds();return}let r,i;try{if(r=await this.createRealtimeConnection(),i=r.status,r.ok&&r.body){this.resetRetryCount(),await this.resetRealtimeBackoff();let o=r.body.getReader();this.reader=o,await this.listenForNotifications(o)}}catch(o){this.isInBackground?this.resetRetryCount():this.logger.debug("Exception connecting to real-time RC backend. Retrying the connection...:",o)}finally{await this.closeRealtimeHttpConnection(),this.setIsHttpConnectionRunning(!1);let o=!this.isInBackground&&(i===void 0||this.isStatusCodeRetryable(i));if(o&&await this.updateBackoffMetadataWithLastFailedStreamConnectionTime(new Date),o||r!=null&&r.ok)await this.retryHttpConnectionWhenBackoffEnds();else{let a="Unable to connect to the server. HTTP status code: ".concat(i),u=re.create("stream-error",{originalErrorMessage:a});this.propagateError(u)}}}canEstablishStreamConnection(){let e=this.observers.size>0,t=!this.isRealtimeDisabled,r=!this.isConnectionActive,i=!this.isInBackground;return e&&t&&r&&i}async makeRealtimeHttpConnection(e){if(this.canEstablishStreamConnection()){if(this.httpRetriesRemaining>0)this.httpRetriesRemaining--,await new Promise(t=>setTimeout(t,e)),this.prepareAndBeginRealtimeHttpStream();else if(!this.isInBackground){let t=re.create("stream-error",{originalErrorMessage:"Unable to connect to the server. Check your connection and try again."});this.propagateError(t)}}}async beginRealtime(){this.observers.size>0&&await this.makeRealtimeHttpConnection(0)}addObserver(e){this.observers.add(e),this.beginRealtime()}removeObserver(e){this.observers.has(e)&&this.observers.delete(e)}async onVisibilityChange(e){this.isInBackground=!e,e?e&&await this.beginRealtime():await this.closeRealtimeHttpConnection()}};function ww(){Ee(new ae(Ff,n,"PUBLIC").setMultipleInstances(!0)),Y(Lc,kf),Y(Lc,kf,"esm2020");function n(e,{options:t}){let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate(),{projectId:o,apiKey:a,appId:u}=r.options;if(!o)throw re.create("registration-project-id");if(!a)throw re.create("registration-api-key");if(!u)throw re.create("registration-app-id");let h=(t==null?void 0:t.templateId)||"firebase",f=Bn()?new jc(u,r.name,h):new $c,_=new Gc(f),y=new Be(Lc);y.logLevel=F.ERROR;let A=new Bc(i,ke,h,o,a,u),P=new qc(A,f),k=new Uc(P,f,_,y),O=new Wc(i,f,ke,h,o,a,u,y,_,k),N=new zc(r,k,_,f,y,O);return uw(N),N}}ww();console.log("APP START: app.module.js is running.");var Ew=window.__app_id,Sr=window.NETLIFY_FIREBASE_CONFIG,rt=null,Tw=window.GEMINI_API_KEY;console.log("appId (from window.__app_id):",Ew);console.log("rawFirebaseConfig (from window):",Sr);if(Sr)if(typeof Sr=="string")try{rt=JSON.parse(Sr),console.log("Firebase config string successfully parsed.")}catch(n){console.error("Error parsing Firebase config string:",n)}else rt=Sr;console.log("Parsed firebaseConfig (h):",rt);console.log("Gemini API Key (Rn):",Tw);window.currentUserId=null;window.isLoggedIn=!1;window.isPremium=!1;window.nickname="Guest";window.lockerMediaCount=0;window.dbRef={};var br,vw,Qc,Aw,bw,ps=document.getElementById("firebase-init-error-display"),ms=document.getElementById("firebase-init-error-text"),qf=rt&&rt.apiKey&&rt.apiKey.length>5&&rt.projectId&&rt.projectId.length>0;console.log("isValidConfig result (Be):",qf);if(qf){console.log("Firebase config is valid. Attempting to initialize Firebase app and services...");try{br=co(rt),console.log("Firebase app initialized successfully (I)."),vw=Yh(br),console.log("Firestore initialized (Qt)."),window.serverTimestamp=Zh,console.log("window.serverTimestamp assigned."),Qc=vc(br),console.log("Auth initialized (en)."),Aw=uf(br),console.log("Storage initialized (tn)."),bw=Uf(br),console.log("Remote Config initialized (nn)."),console.log("All Firebase services appear to be initialized.");let n=document.getElementById("loading-overlay");n?(console.log("Attempting to hide loading overlay..."),n.classList.add("hidden"),console.log("Loading overlay hide attempt completed.")):console.warn("Loading overlay element with ID 'loading-overlay' not found. Cannot hide it."),wc(Qc,async e=>{console.log("Auth state changed:",e?e.uid:"Logged out");let t=document.getElementById("zeus-avatar-svg"),r=document.getElementById("narrator-launch-btn");e?(window.currentUserId=e.uid,window.isLoggedIn=!0,t&&(t.style.opacity="1",t.classList.add("flying-zeus")),r&&r.classList.remove("hidden"),console.log("Zeus and Narrator button displayed (temp for logged-in user).")):(window.currentUserId=null,window.isLoggedIn=!1,t&&(t.style.opacity="0"),r&&r.classList.add("hidden"),console.log("Zeus and Narrator button hidden (user logged out)."))})}catch(n){console.error("Firebase initialization failed with error:",n),ms&&ps&&(ms.textContent=n.message,ps.classList.remove("hidden")),console.log("Displayed Firebase initialization error message.");let e=document.getElementById("loading-overlay");e&&(console.log("Hiding loading overlay after Firebase init error."),e.classList.add("hidden"))}}else{console.error("Invalid Firebase configuration. Displaying error message."),ms&&ps&&(ms.textContent="Invalid Firebase configuration. Please check your environment variables.",ps.classList.remove("hidden"));let n=document.getElementById("loading-overlay");n&&(console.log("Hiding loading overlay due to invalid Firebase config."),n.classList.add("hidden"))}console.log("APP END: app.module.js execution finished.");document.addEventListener("DOMContentLoaded",()=>{let n=document.getElementById("login-form"),e=document.getElementById("login-email"),t=document.getElementById("login-password"),r=document.getElementById("login-error");n&&n.addEventListener("submit",async u=>{u.preventDefault(),console.log("Login form submitted via JavaScript, default browser action prevented."),r&&(r.textContent="");let h=e.value,f=t.value;if(!h||!f){r&&(r.textContent="Please enter both email and password.");return}try{let y=(await Ic(Qc,h,f)).user;console.log("User logged in:",y.uid);let A=document.getElementById("login-modal");A&&A.classList.add("hidden")}catch(_){let y=_.code,A=_.message;console.error("Login failed:",y,A),r&&(r.textContent="Login failed: ".concat(A))}});let i=document.getElementById("header-auth-btn");i&&i.addEventListener("click",()=>{let u=document.getElementById("login-modal");u&&u.classList.remove("hidden"),e&&(e.value=""),t&&(t.value=""),r&&(r.textContent="")});let o=document.getElementById("register-auth-btn");o&&o.addEventListener("click",()=>{console.log("Register button clicked. Initiating registration process.")});let a=document.getElementById("close-login-modal-btn");a&&a.addEventListener("click",()=>{let u=document.getElementById("login-modal");u&&u.classList.add("hidden"),r&&(r.textContent=""),e&&(e.value=""),t&&(t.value="")})});})();
/*! Bundled license information:

@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/util/dist/index.esm.js:
@firebase/logger/dist/esm/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/installations/dist/esm/index.esm.js:
@firebase/remote-config/dist/esm/index.esm.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/util/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/component/dist/esm/index.esm.js:
@firebase/app/dist/esm/index.esm.js:
@firebase/app/dist/esm/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/storage/dist/index.esm.js:
@firebase/storage/dist/index.esm.js:
@firebase/installations/dist/esm/index.esm.js:
@firebase/installations/dist/esm/index.esm.js:
@firebase/installations/dist/esm/index.esm.js:
@firebase/installations/dist/esm/index.esm.js:
@firebase/remote-config/dist/esm/index.esm.js:
@firebase/remote-config/dist/esm/index.esm.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/app/dist/esm/index.esm.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/app/dist/esm/index.esm.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

firebase/app/dist/esm/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
@firebase/storage/dist/index.esm.js:
@firebase/installations/dist/esm/index.esm.js:
@firebase/remote-config/dist/esm/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/webchannel-wrapper/dist/bloom-blob/esm/bloom_blob_es2018.js:
@firebase/webchannel-wrapper/dist/webchannel-blob/esm/webchannel_blob_es2018.js:
  (** @license
  Copyright The Closure Library Authors.
  SPDX-License-Identifier: Apache-2.0
  *)
  (** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  *)

@firebase/firestore/dist/index.esm.js:
  (**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law | agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/firestore/dist/index.esm.js:
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-1970027f.js:
@firebase/auth/dist/esm/index-1970027f.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-1970027f.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2023 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-1970027f.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-1970027f.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-1970027f.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/auth/dist/esm/index-1970027f.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/storage/dist/index.esm.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@firebase/remote-config/dist/esm/index.esm.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2025 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
  (**
   * @license
   * Copyright 2020 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
*/
//# sourceMappingURL=bundle.js.map
